{"ast":null,"code":"import api from '@/services/api';\nexport default {\n  data() {\n    return {\n      transactions: [],\n      users: {},\n      loading: true,\n      memberFilter: '',\n      typeFilter: '',\n      dateFrom: '',\n      dateTo: '',\n      sortKey: 'transaction_date',\n      sortOrder: -1,\n      // -1 for descending, 1 for ascending\n      currentPage: 1,\n      itemsPerPage: 10\n    };\n  },\n  computed: {\n    uniqueMembers() {\n      const members = [];\n      const memberIds = new Set();\n      this.transactions.forEach(transaction => {\n        if (!memberIds.has(transaction.member_id)) {\n          memberIds.add(transaction.member_id);\n          members.push({\n            member_id: transaction.member_id,\n            name: transaction.name\n          });\n        }\n      });\n      return members.sort((a, b) => a.name.localeCompare(b.name));\n    },\n    filteredTransactions() {\n      return this.transactions.filter(transaction => {\n        // Only include loan-related transactions\n        if (transaction.transaction_status !== 'loan_repayment' && transaction.transaction_status !== 'loan_disbursement') {\n          return false;\n        }\n\n        // Filter by member\n        if (this.memberFilter && transaction.member_id !== parseInt(this.memberFilter)) {\n          return false;\n        }\n\n        // Filter by transaction type\n        if (this.typeFilter && transaction.transaction_status !== this.typeFilter) {\n          return false;\n        }\n\n        // Filter by date range\n        if (this.dateFrom || this.dateTo) {\n          const transactionDate = new Date(transaction.transaction_date);\n          if (this.dateFrom) {\n            const fromDate = new Date(this.dateFrom);\n            if (transactionDate < fromDate) {\n              return false;\n            }\n          }\n          if (this.dateTo) {\n            const toDate = new Date(this.dateTo);\n            toDate.setHours(23, 59, 59, 999); // End of the day\n            if (transactionDate > toDate) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }).sort((a, b) => {\n        let valueA = a[this.sortKey];\n        let valueB = b[this.sortKey];\n\n        // Handle special case for sorting by name\n        if (this.sortKey === 'name') {\n          valueA = a.name.toLowerCase();\n          valueB = b.name.toLowerCase();\n        }\n\n        // Handle date sorting\n        if (this.sortKey === 'transaction_date') {\n          valueA = new Date(valueA).getTime();\n          valueB = new Date(valueB).getTime();\n        }\n        if (valueA < valueB) return -1 * this.sortOrder;\n        if (valueA > valueB) return 1 * this.sortOrder;\n        return 0;\n      });\n    },\n    paginatedTransactions() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredTransactions.slice(start, end);\n    },\n    totalPages() {\n      return Math.ceil(this.filteredTransactions.length / this.itemsPerPage);\n    },\n    totalDisbursement() {\n      return this.filteredTransactions.filter(t => t.transaction_status === 'loan_disbursement').reduce((sum, t) => sum + parseFloat(t.amount), 0);\n    },\n    totalRepayment() {\n      return this.filteredTransactions.filter(t => t.transaction_status === 'loan_repayment').reduce((sum, t) => sum + parseFloat(t.amount), 0);\n    }\n  },\n  mounted() {\n    this.fetchTransactions();\n    this.fetchUsers();\n  },\n  methods: {\n    async fetchTransactions() {\n      this.loading = true;\n      try {\n        const response = await api.getAllTransactions();\n        this.transactions = response.data;\n      } catch (error) {\n        console.error('Error fetching transactions:', error);\n        alert('ไม่สามารถดึงข้อมูลธุรกรรมได้');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async fetchUsers() {\n      try {\n        const response = await api.getAllUsers();\n        const users = response.data.users;\n\n        // Create a map of user IDs to names\n        this.users = users.reduce((map, user) => {\n          map[user.user_id] = `${user.first_name} ${user.last_name}`;\n          return map;\n        }, {});\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    },\n    sortBy(key) {\n      if (this.sortKey === key) {\n        this.sortOrder = -this.sortOrder;\n      } else {\n        this.sortKey = key;\n        this.sortOrder = 1;\n      }\n\n      // Reset to first page when sorting changes\n      this.currentPage = 1;\n    },\n    resetFilters() {\n      this.memberFilter = '';\n      this.typeFilter = '';\n      this.dateFrom = '';\n      this.dateTo = '';\n      this.currentPage = 1;\n    },\n    formatCurrency(value) {\n      if (value === undefined || value === null) return '0.00 บาท';\n      return new Intl.NumberFormat('th-TH', {\n        style: 'currency',\n        currency: 'THB',\n        minimumFractionDigits: 2\n      }).format(value);\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    formatTransactionType(type) {\n      switch (type) {\n        case 'loan_repayment':\n          return 'ชำระเงินกู้';\n        case 'loan_disbursement':\n          return 'รับเงินกู้';\n        default:\n          return type;\n      }\n    },\n    getAmountClass(type) {\n      switch (type) {\n        case 'loan_disbursement':\n          return 'amount-positive';\n        case 'loan_repayment':\n          return 'amount-negative';\n        default:\n          return '';\n      }\n    },\n    getCreatorName(userId) {\n      return this.users[userId] || `ผู้ใช้ #${userId}`;\n    },\n    exportToPDF() {\n      // Create a new window for printing\n      const printWindow = window.open('', '_blank');\n      if (!printWindow) {\n        alert('กรุณาอนุญาตให้เปิดหน้าต่างป๊อปอัพเพื่อพิมพ์เอกสาร');\n        return;\n      }\n\n      // Prepare data for the report\n      const title = 'รายงานการกู้ยืมและชำระเงินกู้';\n      const date = new Date().toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n\n      // Create filters description\n      let filtersText = 'ทั้งหมด';\n      if (this.memberFilter) {\n        const member = this.uniqueMembers.find(m => m.member_id === parseInt(this.memberFilter));\n        filtersText = `สมาชิก: ${member ? member.name : this.memberFilter}`;\n      }\n      if (this.typeFilter) {\n        filtersText += ` | ประเภท: ${this.formatTransactionType(this.typeFilter)}`;\n      }\n      if (this.dateFrom || this.dateTo) {\n        filtersText += ` | วันที่: ${this.dateFrom || '-'} ถึง ${this.dateTo || '-'}`;\n      }\n\n      // Create HTML content for the print window\n      let htmlContent = `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>${title}</title>\n          <meta charset=\"utf-8\">\n          <style>\n            body {\n              font-family: 'Sarabun', sans-serif;\n              margin: 20px;\n              line-height: 1.5;\n            }\n            h1 {\n              text-align: center;\n              margin-bottom: 10px;\n            }\n            .report-info {\n              text-align: right;\n              margin-bottom: 20px;\n            }\n            .filters {\n              margin-bottom: 20px;\n              padding: 10px;\n              background-color: #f5f5f5;\n              border-radius: 5px;\n            }\n            .summary {\n              display: flex;\n              justify-content: space-between;\n              margin-bottom: 20px;\n            }\n            .summary-card {\n              flex: 1;\n              padding: 10px;\n              border: 1px solid #ddd;\n              border-radius: 5px;\n              text-align: center;\n              margin: 0 5px;\n            }\n            .summary-title {\n              font-weight: bold;\n              margin-bottom: 5px;\n            }\n            .disbursement {\n              color: #4CAF50;\n            }\n            .repayment {\n              color: #f44336;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px;\n              text-align: left;\n            }\n            th {\n              background-color: #f2f2f2;\n              font-weight: bold;\n            }\n            .amount-positive {\n              color: #4CAF50;\n            }\n            .amount-negative {\n              color: #f44336;\n            }\n            .footer {\n              text-align: center;\n              margin-top: 30px;\n              font-size: 14px;\n              color: #666;\n            }\n            @media print {\n              .no-print {\n                display: none;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <h1>${title}</h1>\n          \n          <div class=\"report-info\">\n            <p>วันที่พิมพ์: ${date}</p>\n          </div>\n          \n          <div class=\"filters\">\n            <strong>ตัวกรอง:</strong> ${filtersText}\n          </div>\n          \n          <div class=\"summary\">\n            <div class=\"summary-card\">\n              <div class=\"summary-title\">จำนวนธุรกรรม</div>\n              <div>${this.filteredTransactions.length} รายการ</div>\n            </div>\n            \n            <div class=\"summary-card\">\n              <div class=\"summary-title\">ยอดรับเงินกู้รวม</div>\n              <div class=\"disbursement\">${this.formatCurrency(this.totalDisbursement)}</div>\n            </div>\n            \n            <div class=\"summary-card\">\n              <div class=\"summary-title\">ยอดชำระเงินกู้รวม</div>\n              <div class=\"repayment\">${this.formatCurrency(this.totalRepayment)}</div>\n            </div>\n          </div>\n          \n          <table>\n            <thead>\n              <tr>\n                <th>รหัสธุรกรรม</th>\n                <th>ชื่อสมาชิก</th>\n                <th>ประเภทธุรกรรม</th>\n                <th>จำนวนเงิน</th>\n                <th>วันที่ทำรายการ</th>\n                <th>ผู้บันทึกรายการ</th>\n              </tr>\n            </thead>\n            <tbody>\n      `;\n\n      // Add table rows\n      this.filteredTransactions.forEach(transaction => {\n        htmlContent += `\n          <tr>\n            <td>${transaction.transaction_id}</td>\n            <td>${transaction.name}</td>\n            <td>${this.formatTransactionType(transaction.transaction_status)}</td>\n            <td class=\"${this.getAmountClass(transaction.transaction_status)}\">\n              ${this.formatCurrency(transaction.amount)}\n            </td>\n            <td>${this.formatDate(transaction.transaction_date)}</td>\n            <td>${this.getCreatorName(transaction.created_by)}</td>\n          </tr>\n        `;\n      });\n\n      // Close the table and add footer\n      htmlContent += `\n            </tbody>\n          </table>\n          \n          <div class=\"footer\">\n            <p>รายงานนี้สร้างขึ้นโดยระบบจัดการธุรกรรมทางการเงิน</p>\n          </div>\n          \n          <div class=\"no-print\" style=\"text-align: center; margin-top: 20px;\">\n            <button onclick=\"window.print();\" style=\"padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;\">พิมพ์รายงาน</button>\n            <button onclick=\"window.close();\" style=\"padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;\">ปิด</button>\n          </div>\n        </body>\n        </html>\n      `;\n\n      // Write the HTML content to the new window\n      printWindow.document.open();\n      printWindow.document.write(htmlContent);\n      printWindow.document.close();\n    }\n  },\n  watch: {\n    // Reset to first page when filters change\n    memberFilter() {\n      this.currentPage = 1;\n    },\n    typeFilter() {\n      this.currentPage = 1;\n    },\n    dateFrom() {\n      this.currentPage = 1;\n    },\n    dateTo() {\n      this.currentPage = 1;\n    }\n  }\n};","map":{"version":3,"names":["api","data","transactions","users","loading","memberFilter","typeFilter","dateFrom","dateTo","sortKey","sortOrder","currentPage","itemsPerPage","computed","uniqueMembers","members","memberIds","Set","forEach","transaction","has","member_id","add","push","name","sort","a","b","localeCompare","filteredTransactions","filter","transaction_status","parseInt","transactionDate","Date","transaction_date","fromDate","toDate","setHours","valueA","valueB","toLowerCase","getTime","paginatedTransactions","start","end","slice","totalPages","Math","ceil","length","totalDisbursement","t","reduce","sum","parseFloat","amount","totalRepayment","mounted","fetchTransactions","fetchUsers","methods","response","getAllTransactions","error","console","alert","getAllUsers","map","user","user_id","first_name","last_name","sortBy","key","resetFilters","formatCurrency","value","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDate","dateString","date","toLocaleDateString","year","month","day","hour","minute","formatTransactionType","type","getAmountClass","getCreatorName","userId","exportToPDF","printWindow","window","open","title","filtersText","member","find","m","htmlContent","transaction_id","created_by","document","write","close","watch"],"sources":["C:\\Users\\HP\\Documents\\GitHub\\Mooban\\frontend\\src\\views\\LoanTransactionHistory.vue"],"sourcesContent":["<template>\r\n  <div class=\"transaction-history-container\">\r\n    <h1>ประวัติการกู้ยืมและชำระเงินกู้</h1>\r\n    \r\n    <!-- ตัวกรองข้อมูล -->\r\n    <div class=\"filters\">\r\n      <div class=\"filter-group\">\r\n        <label for=\"member-filter\">กรองตามสมาชิก</label>\r\n        <select id=\"member-filter\" v-model=\"memberFilter\">\r\n          <option value=\"\">ทั้งหมด</option>\r\n          <option v-for=\"member in uniqueMembers\" :key=\"member.member_id\" :value=\"member.member_id\">\r\n            {{ member.name }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      \r\n      <div class=\"filter-group\">\r\n        <label for=\"type-filter\">กรองตามประเภทธุรกรรม</label>\r\n        <select id=\"type-filter\" v-model=\"typeFilter\">\r\n          <option value=\"\">ทั้งหมด</option>\r\n          <option value=\"loan_repayment\">ชำระเงินกู้</option>\r\n          <option value=\"loan_disbursement\">รับเงินกู้</option>\r\n        </select>\r\n      </div>\r\n      \r\n      <div class=\"filter-group\">\r\n        <label for=\"date-filter\">กรองตามวันที่</label>\r\n        <div class=\"date-range\">\r\n          <input type=\"date\" id=\"date-from\" v-model=\"dateFrom\" placeholder=\"จาก\">\r\n          <span>ถึง</span>\r\n          <input type=\"date\" id=\"date-to\" v-model=\"dateTo\" placeholder=\"ถึง\">\r\n        </div>\r\n      </div>\r\n      \r\n      <button class=\"btn-reset\" @click=\"resetFilters\">รีเซ็ตตัวกรอง</button>\r\n    </div>\r\n    \r\n    <!-- สรุปข้อมูล -->\r\n    <div class=\"summary\">\r\n      <div class=\"summary-card\">\r\n        <div class=\"summary-title\">จำนวนธุรกรรมทั้งหมด</div>\r\n        <div class=\"summary-value\">{{ filteredTransactions.length }}</div>\r\n      </div>\r\n      \r\n      <div class=\"summary-card\">\r\n        <div class=\"summary-title\">ยอดรับเงินกู้รวม</div>\r\n        <div class=\"summary-value disbursement\">{{ formatCurrency(totalDisbursement) }}</div>\r\n      </div>\r\n      \r\n      <div class=\"summary-card\">\r\n        <div class=\"summary-title\">ยอดชำระเงินกู้รวม</div>\r\n        <div class=\"summary-value repayment\">{{ formatCurrency(totalRepayment) }}</div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- ตารางแสดงข้อมูล -->\r\n    <div class=\"table-container\">\r\n      <table class=\"transaction-table\">\r\n        <thead>\r\n          <tr>\r\n            <th @click=\"sortBy('transaction_id')\">\r\n              รหัสธุรกรรม\r\n              <span v-if=\"sortKey === 'transaction_id'\" :class=\"sortOrder === 1 ? 'sort-asc' : 'sort-desc'\"></span>\r\n            </th>\r\n            <th @click=\"sortBy('name')\">\r\n              ชื่อสมาชิก\r\n              <span v-if=\"sortKey === 'name'\" :class=\"sortOrder === 1 ? 'sort-asc' : 'sort-desc'\"></span>\r\n            </th>\r\n            <th @click=\"sortBy('transaction_status')\">\r\n              ประเภทธุรกรรม\r\n              <span v-if=\"sortKey === 'transaction_status'\" :class=\"sortOrder === 1 ? 'sort-asc' : 'sort-desc'\"></span>\r\n            </th>\r\n            <th @click=\"sortBy('amount')\">\r\n              จำนวนเงิน\r\n              <span v-if=\"sortKey === 'amount'\" :class=\"sortOrder === 1 ? 'sort-asc' : 'sort-desc'\"></span>\r\n            </th>\r\n            <th @click=\"sortBy('transaction_date')\">\r\n              วันที่ทำรายการ\r\n              <span v-if=\"sortKey === 'transaction_date'\" :class=\"sortOrder === 1 ? 'sort-asc' : 'sort-desc'\"></span>\r\n            </th>\r\n            <th>ผู้บันทึกรายการ</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-if=\"loading\">\r\n            <td colspan=\"6\" class=\"loading\">กำลังโหลดข้อมูล...</td>\r\n          </tr>\r\n          <tr v-else-if=\"filteredTransactions.length === 0\">\r\n            <td colspan=\"6\" class=\"no-data\">ไม่พบข้อมูลธุรกรรม</td>\r\n          </tr>\r\n          <tr v-for=\"transaction in paginatedTransactions\" :key=\"transaction.transaction_id\">\r\n            <td>{{ transaction.transaction_id }}</td>\r\n            <td>{{ transaction.name }}</td>\r\n            <td>{{ formatTransactionType(transaction.transaction_status) }}</td>\r\n            <td :class=\"getAmountClass(transaction.transaction_status)\">\r\n              {{ formatCurrency(transaction.amount) }}\r\n            </td>\r\n            <td>{{ formatDate(transaction.transaction_date) }}</td>\r\n            <td>{{ getCreatorName(transaction.created_by) }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    \r\n    <!-- การแบ่งหน้า -->\r\n    <div class=\"pagination\" v-if=\"totalPages > 1\">\r\n      <button \r\n        class=\"page-btn\" \r\n        :class=\"{ disabled: currentPage === 1 }\"\r\n        @click=\"currentPage > 1 && (currentPage--)\"\r\n      >\r\n        &laquo; ก่อนหน้า\r\n      </button>\r\n      \r\n      <div class=\"page-info\">\r\n        หน้า {{ currentPage }} จาก {{ totalPages }}\r\n      </div>\r\n      \r\n      <button \r\n        class=\"page-btn\" \r\n        :class=\"{ disabled: currentPage === totalPages }\"\r\n        @click=\"currentPage < totalPages && (currentPage++)\"\r\n      >\r\n        ถัดไป &raquo;\r\n      </button>\r\n    </div>\r\n    \r\n    <!-- ปุ่มพิมพ์รายงาน -->\r\n    <div class=\"export-actions\">\r\n      <button class=\"btn-export\" @click=\"exportToPDF\">\r\n        <i class=\"fas fa-file-pdf\"></i> พิมพ์รายงาน PDF\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      transactions: [],\r\n      users: {},\r\n      loading: true,\r\n      memberFilter: '',\r\n      typeFilter: '',\r\n      dateFrom: '',\r\n      dateTo: '',\r\n      sortKey: 'transaction_date',\r\n      sortOrder: -1, // -1 for descending, 1 for ascending\r\n      currentPage: 1,\r\n      itemsPerPage: 10\r\n    };\r\n  },\r\n  computed: {\r\n    uniqueMembers() {\r\n      const members = [];\r\n      const memberIds = new Set();\r\n      \r\n      this.transactions.forEach(transaction => {\r\n        if (!memberIds.has(transaction.member_id)) {\r\n          memberIds.add(transaction.member_id);\r\n          members.push({\r\n            member_id: transaction.member_id,\r\n            name: transaction.name\r\n          });\r\n        }\r\n      });\r\n      \r\n      return members.sort((a, b) => a.name.localeCompare(b.name));\r\n    },\r\n    filteredTransactions() {\r\n      return this.transactions.filter(transaction => {\r\n        // Only include loan-related transactions\r\n        if (transaction.transaction_status !== 'loan_repayment' && transaction.transaction_status !== 'loan_disbursement') {\r\n          return false;\r\n        }\r\n        \r\n        // Filter by member\r\n        if (this.memberFilter && transaction.member_id !== parseInt(this.memberFilter)) {\r\n          return false;\r\n        }\r\n        \r\n        // Filter by transaction type\r\n        if (this.typeFilter && transaction.transaction_status !== this.typeFilter) {\r\n          return false;\r\n        }\r\n        \r\n        // Filter by date range\r\n        if (this.dateFrom || this.dateTo) {\r\n          const transactionDate = new Date(transaction.transaction_date);\r\n          \r\n          if (this.dateFrom) {\r\n            const fromDate = new Date(this.dateFrom);\r\n            if (transactionDate < fromDate) {\r\n              return false;\r\n            }\r\n          }\r\n          \r\n          if (this.dateTo) {\r\n            const toDate = new Date(this.dateTo);\r\n            toDate.setHours(23, 59, 59, 999); // End of the day\r\n            if (transactionDate > toDate) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        \r\n        return true;\r\n      }).sort((a, b) => {\r\n        let valueA = a[this.sortKey];\r\n        let valueB = b[this.sortKey];\r\n        \r\n        // Handle special case for sorting by name\r\n        if (this.sortKey === 'name') {\r\n          valueA = a.name.toLowerCase();\r\n          valueB = b.name.toLowerCase();\r\n        }\r\n        \r\n        // Handle date sorting\r\n        if (this.sortKey === 'transaction_date') {\r\n          valueA = new Date(valueA).getTime();\r\n          valueB = new Date(valueB).getTime();\r\n        }\r\n        \r\n        if (valueA < valueB) return -1 * this.sortOrder;\r\n        if (valueA > valueB) return 1 * this.sortOrder;\r\n        return 0;\r\n      });\r\n    },\r\n    paginatedTransactions() {\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n      return this.filteredTransactions.slice(start, end);\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.filteredTransactions.length / this.itemsPerPage);\r\n    },\r\n    totalDisbursement() {\r\n      return this.filteredTransactions\r\n        .filter(t => t.transaction_status === 'loan_disbursement')\r\n        .reduce((sum, t) => sum + parseFloat(t.amount), 0);\r\n    },\r\n    totalRepayment() {\r\n      return this.filteredTransactions\r\n        .filter(t => t.transaction_status === 'loan_repayment')\r\n        .reduce((sum, t) => sum + parseFloat(t.amount), 0);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchTransactions();\r\n    this.fetchUsers();\r\n  },\r\n  methods: {\r\n    async fetchTransactions() {\r\n      this.loading = true;\r\n      try {\r\n        const response = await api.getAllTransactions();\r\n        this.transactions = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching transactions:', error);\r\n        alert('ไม่สามารถดึงข้อมูลธุรกรรมได้');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async fetchUsers() {\r\n      try {\r\n        const response = await api.getAllUsers();\r\n        const users = response.data.users;\r\n        \r\n        // Create a map of user IDs to names\r\n        this.users = users.reduce((map, user) => {\r\n          map[user.user_id] = `${user.first_name} ${user.last_name}`;\r\n          return map;\r\n        }, {});\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n      }\r\n    },\r\n    sortBy(key) {\r\n      if (this.sortKey === key) {\r\n        this.sortOrder = -this.sortOrder;\r\n      } else {\r\n        this.sortKey = key;\r\n        this.sortOrder = 1;\r\n      }\r\n      \r\n      // Reset to first page when sorting changes\r\n      this.currentPage = 1;\r\n    },\r\n    resetFilters() {\r\n      this.memberFilter = '';\r\n      this.typeFilter = '';\r\n      this.dateFrom = '';\r\n      this.dateTo = '';\r\n      this.currentPage = 1;\r\n    },\r\n    formatCurrency(value) {\r\n      if (value === undefined || value === null) return '0.00 บาท';\r\n      \r\n      return new Intl.NumberFormat('th-TH', {\r\n        style: 'currency',\r\n        currency: 'THB',\r\n        minimumFractionDigits: 2\r\n      }).format(value);\r\n    },\r\n    formatDate(dateString) {\r\n      if (!dateString) return '';\r\n      \r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    },\r\n    formatTransactionType(type) {\r\n      switch (type) {\r\n        case 'loan_repayment':\r\n          return 'ชำระเงินกู้';\r\n        case 'loan_disbursement':\r\n          return 'รับเงินกู้';\r\n        default:\r\n          return type;\r\n      }\r\n    },\r\n    getAmountClass(type) {\r\n      switch (type) {\r\n        case 'loan_disbursement':\r\n          return 'amount-positive';\r\n        case 'loan_repayment':\r\n          return 'amount-negative';\r\n        default:\r\n          return '';\r\n      }\r\n    },\r\n    getCreatorName(userId) {\r\n      return this.users[userId] || `ผู้ใช้ #${userId}`;\r\n    },\r\n    exportToPDF() {\r\n      // Create a new window for printing\r\n      const printWindow = window.open('', '_blank');\r\n      \r\n      if (!printWindow) {\r\n        alert('กรุณาอนุญาตให้เปิดหน้าต่างป๊อปอัพเพื่อพิมพ์เอกสาร');\r\n        return;\r\n      }\r\n      \r\n      // Prepare data for the report\r\n      const title = 'รายงานการกู้ยืมและชำระเงินกู้';\r\n      const date = new Date().toLocaleDateString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      });\r\n      \r\n      // Create filters description\r\n      let filtersText = 'ทั้งหมด';\r\n      if (this.memberFilter) {\r\n        const member = this.uniqueMembers.find(m => m.member_id === parseInt(this.memberFilter));\r\n        filtersText = `สมาชิก: ${member ? member.name : this.memberFilter}`;\r\n      }\r\n      if (this.typeFilter) {\r\n        filtersText += ` | ประเภท: ${this.formatTransactionType(this.typeFilter)}`;\r\n      }\r\n      if (this.dateFrom || this.dateTo) {\r\n        filtersText += ` | วันที่: ${this.dateFrom || '-'} ถึง ${this.dateTo || '-'}`;\r\n      }\r\n      \r\n      // Create HTML content for the print window\r\n      let htmlContent = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n          <title>${title}</title>\r\n          <meta charset=\"utf-8\">\r\n          <style>\r\n            body {\r\n              font-family: 'Sarabun', sans-serif;\r\n              margin: 20px;\r\n              line-height: 1.5;\r\n            }\r\n            h1 {\r\n              text-align: center;\r\n              margin-bottom: 10px;\r\n            }\r\n            .report-info {\r\n              text-align: right;\r\n              margin-bottom: 20px;\r\n            }\r\n            .filters {\r\n              margin-bottom: 20px;\r\n              padding: 10px;\r\n              background-color: #f5f5f5;\r\n              border-radius: 5px;\r\n            }\r\n            .summary {\r\n              display: flex;\r\n              justify-content: space-between;\r\n              margin-bottom: 20px;\r\n            }\r\n            .summary-card {\r\n              flex: 1;\r\n              padding: 10px;\r\n              border: 1px solid #ddd;\r\n              border-radius: 5px;\r\n              text-align: center;\r\n              margin: 0 5px;\r\n            }\r\n            .summary-title {\r\n              font-weight: bold;\r\n              margin-bottom: 5px;\r\n            }\r\n            .disbursement {\r\n              color: #4CAF50;\r\n            }\r\n            .repayment {\r\n              color: #f44336;\r\n            }\r\n            table {\r\n              width: 100%;\r\n              border-collapse: collapse;\r\n              margin-bottom: 20px;\r\n            }\r\n            th, td {\r\n              border: 1px solid #ddd;\r\n              padding: 8px;\r\n              text-align: left;\r\n            }\r\n            th {\r\n              background-color: #f2f2f2;\r\n              font-weight: bold;\r\n            }\r\n            .amount-positive {\r\n              color: #4CAF50;\r\n            }\r\n            .amount-negative {\r\n              color: #f44336;\r\n            }\r\n            .footer {\r\n              text-align: center;\r\n              margin-top: 30px;\r\n              font-size: 14px;\r\n              color: #666;\r\n            }\r\n            @media print {\r\n              .no-print {\r\n                display: none;\r\n              }\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <h1>${title}</h1>\r\n          \r\n          <div class=\"report-info\">\r\n            <p>วันที่พิมพ์: ${date}</p>\r\n          </div>\r\n          \r\n          <div class=\"filters\">\r\n            <strong>ตัวกรอง:</strong> ${filtersText}\r\n          </div>\r\n          \r\n          <div class=\"summary\">\r\n            <div class=\"summary-card\">\r\n              <div class=\"summary-title\">จำนวนธุรกรรม</div>\r\n              <div>${this.filteredTransactions.length} รายการ</div>\r\n            </div>\r\n            \r\n            <div class=\"summary-card\">\r\n              <div class=\"summary-title\">ยอดรับเงินกู้รวม</div>\r\n              <div class=\"disbursement\">${this.formatCurrency(this.totalDisbursement)}</div>\r\n            </div>\r\n            \r\n            <div class=\"summary-card\">\r\n              <div class=\"summary-title\">ยอดชำระเงินกู้รวม</div>\r\n              <div class=\"repayment\">${this.formatCurrency(this.totalRepayment)}</div>\r\n            </div>\r\n          </div>\r\n          \r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>รหัสธุรกรรม</th>\r\n                <th>ชื่อสมาชิก</th>\r\n                <th>ประเภทธุรกรรม</th>\r\n                <th>จำนวนเงิน</th>\r\n                <th>วันที่ทำรายการ</th>\r\n                <th>ผู้บันทึกรายการ</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n      `;\r\n      \r\n      // Add table rows\r\n      this.filteredTransactions.forEach(transaction => {\r\n        htmlContent += `\r\n          <tr>\r\n            <td>${transaction.transaction_id}</td>\r\n            <td>${transaction.name}</td>\r\n            <td>${this.formatTransactionType(transaction.transaction_status)}</td>\r\n            <td class=\"${this.getAmountClass(transaction.transaction_status)}\">\r\n              ${this.formatCurrency(transaction.amount)}\r\n            </td>\r\n            <td>${this.formatDate(transaction.transaction_date)}</td>\r\n            <td>${this.getCreatorName(transaction.created_by)}</td>\r\n          </tr>\r\n        `;\r\n      });\r\n      \r\n      // Close the table and add footer\r\n      htmlContent += `\r\n            </tbody>\r\n          </table>\r\n          \r\n          <div class=\"footer\">\r\n            <p>รายงานนี้สร้างขึ้นโดยระบบจัดการธุรกรรมทางการเงิน</p>\r\n          </div>\r\n          \r\n          <div class=\"no-print\" style=\"text-align: center; margin-top: 20px;\">\r\n            <button onclick=\"window.print();\" style=\"padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;\">พิมพ์รายงาน</button>\r\n            <button onclick=\"window.close();\" style=\"padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;\">ปิด</button>\r\n          </div>\r\n        </body>\r\n        </html>\r\n      `;\r\n      \r\n      // Write the HTML content to the new window\r\n      printWindow.document.open();\r\n      printWindow.document.write(htmlContent);\r\n      printWindow.document.close();\r\n    }\r\n  },\r\n  watch: {\r\n    // Reset to first page when filters change\r\n    memberFilter() {\r\n      this.currentPage = 1;\r\n    },\r\n    typeFilter() {\r\n      this.currentPage = 1;\r\n    },\r\n    dateFrom() {\r\n      this.currentPage = 1;\r\n    },\r\n    dateTo() {\r\n      this.currentPage = 1;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.transaction-history-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: 'Sarabun', sans-serif;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-bottom: 30px;\r\n  font-size: 28px;\r\n}\r\n\r\n/* Filters */\r\n.filters {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n  background-color: #f9f9f9;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n  align-items: flex-end;\r\n}\r\n\r\n.filter-group {\r\n  flex: 1;\r\n  min-width: 200px;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\nselect, input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  background-color: white;\r\n}\r\n\r\n.date-range {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.date-range input {\r\n  flex: 1;\r\n}\r\n\r\n.btn-reset {\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 15px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n  height: 42px;\r\n}\r\n\r\n.btn-reset:hover {\r\n  background-color: #d32f2f;\r\n}\r\n\r\n/* Summary */\r\n.summary {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.summary-card {\r\n  flex: 1;\r\n  background-color: white;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  text-align: center;\r\n}\r\n\r\n.summary-title {\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n  color: #555;\r\n}\r\n\r\n.summary-value {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n}\r\n\r\n.summary-value.disbursement {\r\n  color: #4CAF50;\r\n}\r\n\r\n.summary-value.repayment {\r\n  color: #f44336;\r\n}\r\n\r\n/* Table */\r\n.table-container {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.transaction-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.transaction-table th, .transaction-table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.transaction-table th {\r\n  background-color: #f5f5f5;\r\n  font-weight: bold;\r\n  color: #333;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.transaction-table th:hover {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.sort-asc::after {\r\n  content: \" ▲\";\r\n  font-size: 0.8em;\r\n}\r\n\r\n.sort-desc::after {\r\n  content: \" ▼\";\r\n  font-size: 0.8em;\r\n}\r\n\r\n.loading, .no-data {\r\n  text-align: center;\r\n  padding: 30px;\r\n  color: #666;\r\n}\r\n\r\n.amount-positive {\r\n  color: #4CAF50;\r\n  font-weight: bold;\r\n}\r\n\r\n.amount-negative {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n/* Pagination */\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.page-btn {\r\n  background-color: #2196F3;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 8px 15px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.page-btn:hover:not(.disabled) {\r\n  background-color: #0b7dda;\r\n}\r\n\r\n.page-btn.disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.page-info {\r\n  font-size: 16px;\r\n  color: #555;\r\n}\r\n\r\n/* Export actions */\r\n.export-actions {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn-export {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.btn-export:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .filters {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .filter-group {\r\n    width: 100%;\r\n  }\r\n  \r\n  .summary {\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .summary-card {\r\n    min-width: calc(50% - 15px);\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}