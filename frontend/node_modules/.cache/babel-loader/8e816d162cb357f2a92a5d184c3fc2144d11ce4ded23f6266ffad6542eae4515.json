{"ast":null,"code":"import api from '@/services/api';\nexport default {\n  name: 'Profile',\n  data() {\n    return {\n      userProfile: {\n        firstName: '',\n        lastName: '',\n        email: '',\n        phone: '',\n        address: '',\n        status: ''\n      }\n    };\n  },\n  methods: {\n    fetchUserProfile() {\n      console.log('Fetching user profile...');\n\n      // ดึงข้อมูลจาก localStorage\n      this.userProfile = {\n        firstName: localStorage.getItem('userFirstName') || '',\n        lastName: localStorage.getItem('userLastName') || '',\n        email: localStorage.getItem('email') || '',\n        phone: localStorage.getItem('userPhone') || '',\n        address: localStorage.getItem('userAddress') || '',\n        status: localStorage.getItem('userStatus') || localStorage.getItem('status') || ''\n      };\n      console.log('User profile from localStorage:', this.userProfile);\n\n      // ดึงข้อมูลโปรไฟล์จาก API\n      api.getUserProfile().then(response => {\n        console.log('API response:', response);\n        const userData = response.data.user;\n        if (userData) {\n          this.userProfile = {\n            firstName: userData.first_name || this.userProfile.firstName,\n            lastName: userData.last_name || this.userProfile.lastName,\n            email: userData.user_email || this.userProfile.email,\n            phone: userData.phone || this.userProfile.phone,\n            address: userData.address || this.userProfile.address,\n            status: userData.status || this.userProfile.status\n          };\n          console.log('Updated user profile from API:', this.userProfile);\n        }\n      }).catch(error => {\n        console.error('Error fetching user profile:', error);\n      });\n    },\n    async saveProfile() {\n      try {\n        await api.updateUserProfile({\n          firstName: this.userProfile.firstName,\n          lastName: this.userProfile.lastName,\n          phone: this.userProfile.phone,\n          address: this.userProfile.address\n        });\n\n        // บันทึกข้อมูลลง localStorage\n        localStorage.setItem('userFirstName', this.userProfile.firstName);\n        localStorage.setItem('userLastName', this.userProfile.lastName);\n        localStorage.setItem('userPhone', this.userProfile.phone);\n        localStorage.setItem('userAddress', this.userProfile.address);\n        alert('อัปเดตโปรไฟล์เรียบร้อยแล้ว');\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        alert('ไม่สามารถอัปเดตโปรไฟล์ได้ กรุณาลองใหม่อีกครั้ง');\n      }\n    },\n    formatStatus(status) {\n      if (!status) return 'ไม่ทราบสถานะ';\n      const statusMap = {\n        'headman': 'ผู้ใหญ่บ้าน',\n        'assistant': 'ผู้ช่วยผู้ใหญ่บ้าน',\n        'villager': 'ลูกบ้าน',\n        'pending': 'ผู้ใช้ที่รอการอนุมัติ'\n      };\n      return statusMap[status.toLowerCase()] || status.charAt(0).toUpperCase() + status.slice(1);\n    }\n  },\n  created() {\n    console.log('Profile component created');\n  },\n  mounted() {\n    console.log('Profile component mounted');\n    setTimeout(() => {\n      this.fetchUserProfile();\n    }, 100);\n  }\n};","map":{"version":3,"names":["api","name","data","userProfile","firstName","lastName","email","phone","address","status","methods","fetchUserProfile","console","log","localStorage","getItem","getUserProfile","then","response","userData","user","first_name","last_name","user_email","catch","error","saveProfile","updateUserProfile","setItem","alert","formatStatus","statusMap","toLowerCase","charAt","toUpperCase","slice","created","mounted","setTimeout"],"sources":["C:\\Users\\HP\\Documents\\mooban4\\frontend\\src\\views\\Profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <h1>โปรไฟล์ของฉัน</h1>\r\n    <div class=\"profile-card\">\r\n      <div class=\"profile-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"firstName\">ชื่อ</label>\r\n          <input type=\"text\" id=\"firstName\" v-model=\"userProfile.firstName\">\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"lastName\">นามสกุล</label>\r\n          <input type=\"text\" id=\"lastName\" v-model=\"userProfile.lastName\">\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"email\">อีเมล</label>\r\n          <input type=\"email\" id=\"email\" v-model=\"userProfile.email\" disabled>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"phone\">เบอร์โทรศัพท์</label>\r\n          <input type=\"tel\" id=\"phone\" v-model=\"userProfile.phone\">\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"address\">ที่อยู่</label>\r\n          <textarea id=\"address\" v-model=\"userProfile.address\"></textarea>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"status\">สถานะ</label>\r\n          <input type=\"text\" id=\"status\" :value=\"formatStatus(userProfile.status)\" disabled>\r\n        </div>\r\n        \r\n        <div class=\"form-actions\">\r\n          <button @click=\"saveProfile\" class=\"save-btn\">บันทึก</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api';\r\n\r\nexport default {\r\n  name: 'Profile',\r\n  data() {\r\n    return {\r\n      userProfile: {\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        phone: '',\r\n        address: '',\r\n        status: ''\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    fetchUserProfile() {\r\n      console.log('Fetching user profile...');\r\n\r\n      // ดึงข้อมูลจาก localStorage\r\n      this.userProfile = {\r\n        firstName: localStorage.getItem('userFirstName') || '',\r\n        lastName: localStorage.getItem('userLastName') || '',\r\n        email: localStorage.getItem('email') || '',\r\n        phone: localStorage.getItem('userPhone') || '',\r\n        address: localStorage.getItem('userAddress') || '',\r\n        status: localStorage.getItem('userStatus') || localStorage.getItem('status') || ''\r\n      };\r\n\r\n      console.log('User profile from localStorage:', this.userProfile);\r\n\r\n      // ดึงข้อมูลโปรไฟล์จาก API\r\n      api.getUserProfile()\r\n        .then(response => {\r\n          console.log('API response:', response);\r\n          const userData = response.data.user;\r\n\r\n          if (userData) {\r\n            this.userProfile = {\r\n              firstName: userData.first_name || this.userProfile.firstName,\r\n              lastName: userData.last_name || this.userProfile.lastName,\r\n              email: userData.user_email || this.userProfile.email,\r\n              phone: userData.phone || this.userProfile.phone,\r\n              address: userData.address || this.userProfile.address,\r\n              status: userData.status || this.userProfile.status\r\n            };\r\n            console.log('Updated user profile from API:', this.userProfile);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching user profile:', error);\r\n        });\r\n    },\r\n    \r\n    async saveProfile() {\r\n      try {\r\n        await api.updateUserProfile({\r\n          firstName: this.userProfile.firstName,\r\n          lastName: this.userProfile.lastName,\r\n          phone: this.userProfile.phone,\r\n          address: this.userProfile.address\r\n        });\r\n        \r\n        // บันทึกข้อมูลลง localStorage\r\n        localStorage.setItem('userFirstName', this.userProfile.firstName);\r\n        localStorage.setItem('userLastName', this.userProfile.lastName);\r\n        localStorage.setItem('userPhone', this.userProfile.phone);\r\n        localStorage.setItem('userAddress', this.userProfile.address);\r\n        \r\n        alert('อัปเดตโปรไฟล์เรียบร้อยแล้ว');\r\n        \r\n      } catch (error) {\r\n        console.error('Error updating profile:', error);\r\n        alert('ไม่สามารถอัปเดตโปรไฟล์ได้ กรุณาลองใหม่อีกครั้ง');\r\n      }\r\n    },\r\n    \r\n    formatStatus(status) {\r\n      if (!status) return 'ไม่ทราบสถานะ';\r\n      \r\n      const statusMap = {\r\n        'headman': 'ผู้ใหญ่บ้าน',\r\n        'assistant': 'ผู้ช่วยผู้ใหญ่บ้าน',\r\n        'villager': 'ลูกบ้าน',\r\n        'pending': 'ผู้ใช้ที่รอการอนุมัติ'\r\n      };\r\n      \r\n      return statusMap[status.toLowerCase()] || status.charAt(0).toUpperCase() + status.slice(1);\r\n    }\r\n  },\r\n  created() {\r\n    console.log('Profile component created');\r\n  },\r\n\r\n  mounted() {\r\n    console.log('Profile component mounted');\r\n    setTimeout(() => {\r\n      this.fetchUserProfile();\r\n    }, 100);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.profile-card {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.profile-form {\r\n  padding: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\ninput, textarea {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n}\r\n\r\ntextarea {\r\n  min-height: 100px;\r\n  resize: vertical;\r\n}\r\n\r\ninput:disabled, textarea:disabled {\r\n  background-color: #f5f5f5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.save-btn {\r\n  background-color: #2196F3;\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.save-btn:hover {\r\n  background-color: #1976D2;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}