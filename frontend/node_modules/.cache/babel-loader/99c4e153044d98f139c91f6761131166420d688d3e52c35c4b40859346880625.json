{"ast":null,"code":"import axios from 'axios';\n\n// Create axios instance with base URL\nconst apiClient = axios.create({\n  baseURL: '/api',\n  // ใช้ URL แบบสัมพัทธ์เพื่อให้ทำงานได้กับ proxy ของ Vue\n  headers: {\n    'Content-Type': 'application/json',\n    'Cache-Control': 'no-cache'\n  },\n  timeout: 10000 // 10 seconds timeout\n});\n\n// Log the base URL for debugging\nconsole.log('API Client Base URL:', apiClient.defaults.baseURL);\n\n// Add a request interceptor\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nconst api = {\n  // Auth endpoints\n  login(credentials) {\n    return apiClient.post('/auth/login', credentials);\n  },\n  register(userData) {\n    return apiClient.post('/auth/register', userData);\n  },\n  // User management endpoints\n  getPendingUsers() {\n    return apiClient.get('/auth/pending-users');\n  },\n  approveUser(userId) {\n    return apiClient.put(`/auth/approve/${userId}`);\n  },\n  // User profile\n  getUserProfile() {\n    return apiClient.get('/auth/profile');\n  },\n  updateUserProfile(userData) {\n    return apiClient.put('/auth/profile', userData);\n  },\n  // Upload profile picture - ต้องระบุ userId เพื่อให้ตรงกับ route ที่กำหนดไว้\n  uploadProfilePicture(imageData) {\n    // ดึง userId จาก localStorage\n    const userId = localStorage.getItem('userId');\n    if (!userId) {\n      return Promise.reject(new Error('ไม่พบข้อมูลผู้ใช้ กรุณาเข้าสู่ระบบใหม่อีกครั้ง'));\n    }\n    return apiClient.post(`/auth/upload-profile-picture/${userId}`, {\n      imageData\n    }, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Cache-Control': 'no-cache, no-store'\n      }\n    });\n  },\n  // Get all users\n  getAllUsers() {\n    return apiClient.get('/auth/users');\n  },\n  // Get user by ID\n  getUserById(userId) {\n    return apiClient.get(`/auth/users/${userId}`);\n  },\n  // Update user\n  updateUser(userId, userData) {\n    return apiClient.put(`/auth/users/${userId}`, userData);\n  },\n  // Delete user\n  deleteUser(userId) {\n    return apiClient.delete(`/auth/users/${userId}`);\n  },\n  // Get pending users count\n  getPendingUsersCount() {\n    return apiClient.get('/auth/pending-users-count');\n  },\n  // Get dashboard data\n  getDashboardData() {\n    return apiClient.get('/auth/dashboard');\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","apiClient","create","baseURL","headers","timeout","console","log","defaults","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","api","login","credentials","post","register","userData","getPendingUsers","get","approveUser","userId","put","getUserProfile","updateUserProfile","uploadProfilePicture","imageData","Error","getAllUsers","getUserById","updateUser","deleteUser","delete","getPendingUsersCount","getDashboardData"],"sources":["C:/Users/HP/Documents/mooban4/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Create axios instance with base URL\r\nconst apiClient = axios.create({\r\n  baseURL: '/api',  // ใช้ URL แบบสัมพัทธ์เพื่อให้ทำงานได้กับ proxy ของ Vue\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Cache-Control': 'no-cache'\r\n  },\r\n  timeout: 10000 // 10 seconds timeout\r\n});\r\n\r\n// Log the base URL for debugging\r\nconsole.log('API Client Base URL:', apiClient.defaults.baseURL);\r\n\r\n// Add a request interceptor\r\napiClient.interceptors.request.use(\r\n  config => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst api = {\r\n  // Auth endpoints\r\n  login(credentials) {\r\n    return apiClient.post('/auth/login', credentials);\r\n  },\r\n  register(userData) {\r\n    return apiClient.post('/auth/register', userData);\r\n  },\r\n  // User management endpoints\r\n  getPendingUsers() {\r\n    return apiClient.get('/auth/pending-users');\r\n  },\r\n  approveUser(userId) {\r\n    return apiClient.put(`/auth/approve/${userId}`);\r\n  },\r\n  // User profile\r\n  getUserProfile() {\r\n    return apiClient.get('/auth/profile');\r\n  },\r\n  updateUserProfile(userData) {\r\n    return apiClient.put('/auth/profile', userData);\r\n  },\r\n  // Upload profile picture - ต้องระบุ userId เพื่อให้ตรงกับ route ที่กำหนดไว้\r\n  uploadProfilePicture(imageData) {\r\n    // ดึง userId จาก localStorage\r\n    const userId = localStorage.getItem('userId');\r\n    if (!userId) {\r\n      return Promise.reject(new Error('ไม่พบข้อมูลผู้ใช้ กรุณาเข้าสู่ระบบใหม่อีกครั้ง'));\r\n    }\r\n\r\n    return apiClient.post(`/auth/upload-profile-picture/${userId}`, { imageData }, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Cache-Control': 'no-cache, no-store'\r\n      }\r\n    });\r\n  },\r\n  // Get all users\r\n  getAllUsers() {\r\n    return apiClient.get('/auth/users');\r\n  },\r\n  // Get user by ID\r\n  getUserById(userId) {\r\n    return apiClient.get(`/auth/users/${userId}`);\r\n  },\r\n  // Update user\r\n  updateUser(userId, userData) {\r\n    return apiClient.put(`/auth/users/${userId}`, userData);\r\n  },\r\n  // Delete user\r\n  deleteUser(userId) {\r\n    return apiClient.delete(`/auth/users/${userId}`);\r\n  },\r\n  // Get pending users count\r\n  getPendingUsersCount() {\r\n    return apiClient.get('/auth/pending-users-count');\r\n  },\r\n  // Get dashboard data\r\n  getDashboardData() {\r\n    return apiClient.get('/auth/dashboard');\r\n  }\r\n};\r\n\r\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,SAAS,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC7BC,OAAO,EAAE,MAAM;EAAG;EAClBC,OAAO,EAAE;IACP,cAAc,EAAE,kBAAkB;IAClC,eAAe,EAAE;EACnB,CAAC;EACDC,OAAO,EAAE,KAAK,CAAC;AACjB,CAAC,CAAC;;AAEF;AACAC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEN,SAAS,CAACO,QAAQ,CAACL,OAAO,CAAC;;AAE/D;AACAF,SAAS,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAChCC,MAAM,IAAI;EACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACR,OAAO,CAACY,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACDK,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,MAAMG,GAAG,GAAG;EACV;EACAC,KAAKA,CAACC,WAAW,EAAE;IACjB,OAAOrB,SAAS,CAACsB,IAAI,CAAC,aAAa,EAAED,WAAW,CAAC;EACnD,CAAC;EACDE,QAAQA,CAACC,QAAQ,EAAE;IACjB,OAAOxB,SAAS,CAACsB,IAAI,CAAC,gBAAgB,EAAEE,QAAQ,CAAC;EACnD,CAAC;EACD;EACAC,eAAeA,CAAA,EAAG;IAChB,OAAOzB,SAAS,CAAC0B,GAAG,CAAC,qBAAqB,CAAC;EAC7C,CAAC;EACDC,WAAWA,CAACC,MAAM,EAAE;IAClB,OAAO5B,SAAS,CAAC6B,GAAG,CAAC,iBAAiBD,MAAM,EAAE,CAAC;EACjD,CAAC;EACD;EACAE,cAAcA,CAAA,EAAG;IACf,OAAO9B,SAAS,CAAC0B,GAAG,CAAC,eAAe,CAAC;EACvC,CAAC;EACDK,iBAAiBA,CAACP,QAAQ,EAAE;IAC1B,OAAOxB,SAAS,CAAC6B,GAAG,CAAC,eAAe,EAAEL,QAAQ,CAAC;EACjD,CAAC;EACD;EACAQ,oBAAoBA,CAACC,SAAS,EAAE;IAC9B;IACA,MAAML,MAAM,GAAGf,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC7C,IAAI,CAACc,MAAM,EAAE;MACX,OAAOX,OAAO,CAACC,MAAM,CAAC,IAAIgB,KAAK,CAAC,gDAAgD,CAAC,CAAC;IACpF;IAEA,OAAOlC,SAAS,CAACsB,IAAI,CAAC,gCAAgCM,MAAM,EAAE,EAAE;MAAEK;IAAU,CAAC,EAAE;MAC7E9B,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAE;MACnB;IACF,CAAC,CAAC;EACJ,CAAC;EACD;EACAgC,WAAWA,CAAA,EAAG;IACZ,OAAOnC,SAAS,CAAC0B,GAAG,CAAC,aAAa,CAAC;EACrC,CAAC;EACD;EACAU,WAAWA,CAACR,MAAM,EAAE;IAClB,OAAO5B,SAAS,CAAC0B,GAAG,CAAC,eAAeE,MAAM,EAAE,CAAC;EAC/C,CAAC;EACD;EACAS,UAAUA,CAACT,MAAM,EAAEJ,QAAQ,EAAE;IAC3B,OAAOxB,SAAS,CAAC6B,GAAG,CAAC,eAAeD,MAAM,EAAE,EAAEJ,QAAQ,CAAC;EACzD,CAAC;EACD;EACAc,UAAUA,CAACV,MAAM,EAAE;IACjB,OAAO5B,SAAS,CAACuC,MAAM,CAAC,eAAeX,MAAM,EAAE,CAAC;EAClD,CAAC;EACD;EACAY,oBAAoBA,CAAA,EAAG;IACrB,OAAOxC,SAAS,CAAC0B,GAAG,CAAC,2BAA2B,CAAC;EACnD,CAAC;EACD;EACAe,gBAAgBA,CAAA,EAAG;IACjB,OAAOzC,SAAS,CAAC0B,GAAG,CAAC,iBAAiB,CAAC;EACzC;AACF,CAAC;AAED,eAAeP,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}