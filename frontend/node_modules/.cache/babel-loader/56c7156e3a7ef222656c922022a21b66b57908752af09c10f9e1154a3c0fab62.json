{"ast":null,"code":"import api from '@/services/api';\nexport default {\n  data() {\n    return {\n      members: [],\n      selectedMemberId: '',\n      memberData: null,\n      memberBalance: {\n        deposit_balance: 0,\n        loan_balance: 0\n      },\n      memberLoans: [],\n      selectedLoanId: '',\n      amount: '',\n      transactions: [],\n      showResultModal: false,\n      resultModalTitle: '',\n      resultMessage: '',\n      isSuccess: true,\n      updatedBalance: 0\n    };\n  },\n  computed: {\n    hasLoans() {\n      return this.memberBalance && this.memberBalance.loan_balance > 0;\n    },\n    totalLoanAmount() {\n      if (!this.memberLoans || this.memberLoans.length === 0) {\n        return 0;\n      }\n\n      // Calculate total loan amount (principal + interest)\n      const principal = this.memberBalance.loan_balance || 0;\n      const monthlyInterest = principal * 0.01; // 1% monthly interest\n      const totalInterest = monthlyInterest * 12; // 12 months\n      return principal + totalInterest;\n    },\n    loanTransactions() {\n      return this.transactions.filter(t => t.transaction_status === 'loan_repayment' || t.transaction_status === 'loan_disbursement');\n    }\n  },\n  mounted() {\n    this.fetchMembers().then(() => {\n      // ตรวจสอบ URL parameters\n      const urlParams = new URLSearchParams(window.location.search);\n      const memberIdParam = urlParams.get('member_id');\n\n      // ถ้ามีการส่ง member_id มาจากหน้าอื่น\n      if (memberIdParam) {\n        // ตั้งค่า selectedMemberId และโหลดข้อมูล\n        this.selectedMemberId = memberIdParam;\n        this.loadMemberData();\n      }\n    });\n  },\n  methods: {\n    async fetchMembers() {\n      try {\n        const response = await api.getMembers();\n        this.members = response.data;\n        return response.data;\n      } catch (error) {\n        console.error('Error fetching members:', error);\n        alert('ไม่สามารถดึงข้อมูลสมาชิกได้');\n        return [];\n      }\n    },\n    async loadMemberData() {\n      if (!this.selectedMemberId) {\n        this.resetForm();\n        return;\n      }\n      try {\n        // ดึงข้อมูลสมาชิก\n        const memberResponse = await api.getMemberById(this.selectedMemberId);\n        this.memberData = memberResponse.data;\n\n        // ดึงข้อมูลยอดเงิน\n        const balanceResponse = await api.getMemberBalance(this.selectedMemberId);\n        this.memberBalance = balanceResponse.data;\n\n        // ดึงข้อมูลเงินกู้\n        const loansResponse = await api.getLoans();\n        this.memberLoans = loansResponse.data.filter(loan => loan.member_id === parseInt(this.selectedMemberId));\n\n        // ตรวจสอบว่ามีข้อมูลเงินกู้หรือไม่\n        console.log('Member loans:', this.memberLoans);\n\n        // ดึงประวัติธุรกรรม\n        const transactionsResponse = await api.getMemberTransactions(this.selectedMemberId);\n        this.transactions = transactionsResponse.data;\n\n        // รีเซ็ตฟอร์ม\n        this.resetTransactionForm();\n\n        // ตรวจสอบ URL parameters\n        const urlParams = new URLSearchParams(window.location.search);\n        const memberIdParam = urlParams.get('member_id');\n\n        // ถ้ามีการส่ง member_id มาจากหน้าอื่น และตรงกับที่เลือก\n        if (memberIdParam && memberIdParam === this.selectedMemberId) {\n          // ลบ parameter จาก URL โดยไม่ reload หน้า\n          const newUrl = window.location.pathname;\n          window.history.replaceState({}, document.title, newUrl);\n        }\n      } catch (error) {\n        console.error('Error loading member data:', error);\n        alert('ไม่สามารถโหลดข้อมูลสมาชิกได้');\n      }\n    },\n    formatAddress(member) {\n      if (!member) return '';\n      const parts = [member.address_line1, member.subdistrict, member.district, member.province, member.postal_code].filter(part => part && part.trim() !== '');\n      return parts.join(' ');\n    },\n    formatCurrency(value) {\n      if (value === undefined || value === null) return '0.00 บาท';\n      return new Intl.NumberFormat('th-TH', {\n        style: 'currency',\n        currency: 'THB',\n        minimumFractionDigits: 2\n      }).format(value);\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    formatTransactionType(type) {\n      switch (type) {\n        case 'loan_repayment':\n          return 'ชำระเงินกู้';\n        case 'loan_disbursement':\n          return 'รับเงินกู้';\n        default:\n          return type;\n      }\n    },\n    getAmountClass(type) {\n      switch (type) {\n        case 'loan_disbursement':\n          return 'amount-positive';\n        case 'loan_repayment':\n          return 'amount-negative';\n        default:\n          return '';\n      }\n    },\n    async submitLoanRepayment() {\n      if (!this.selectedMemberId || !this.selectedLoanId || !this.amount || this.amount <= 0) {\n        alert('กรุณากรอกข้อมูลให้ครบถ้วน');\n        return;\n      }\n      try {\n        const response = await api.repayLoan({\n          member_id: this.selectedMemberId,\n          loan_id: this.selectedLoanId,\n          amount: parseFloat(this.amount)\n        });\n        this.showSuccessResult('ชำระเงินกู้สำเร็จ', `ชำระเงินกู้จำนวน ${this.formatCurrency(this.amount)} เรียบร้อยแล้ว`, response.data.current_loan_balance);\n\n        // รีเฟรชข้อมูล\n        this.loadMemberData();\n      } catch (error) {\n        console.error('Error repaying loan:', error);\n        let errorMessage = 'ไม่สามารถชำระเงินกู้ได้ กรุณาลองใหม่อีกครั้ง';\n        if (error.response && error.response.data && error.response.data.message) {\n          errorMessage = error.response.data.message;\n        }\n        this.showErrorResult('เกิดข้อผิดพลาด', errorMessage);\n      }\n    },\n    showSuccessResult(title, message, balance) {\n      this.resultModalTitle = title;\n      this.resultMessage = message;\n      this.isSuccess = true;\n      this.updatedBalance = balance;\n      this.showResultModal = true;\n    },\n    showErrorResult(title, message) {\n      this.resultModalTitle = title;\n      this.resultMessage = message;\n      this.isSuccess = false;\n      this.showResultModal = true;\n    },\n    closeResultModal() {\n      this.showResultModal = false;\n      this.resetTransactionForm();\n    },\n    resetTransactionForm() {\n      this.selectedLoanId = '';\n      this.amount = '';\n    },\n    resetForm() {\n      this.memberData = null;\n      this.memberBalance = {\n        deposit_balance: 0,\n        loan_balance: 0\n      };\n      this.memberLoans = [];\n      this.transactions = [];\n      this.resetTransactionForm();\n    }\n  }\n};","map":{"version":3,"names":["api","data","members","selectedMemberId","memberData","memberBalance","deposit_balance","loan_balance","memberLoans","selectedLoanId","amount","transactions","showResultModal","resultModalTitle","resultMessage","isSuccess","updatedBalance","computed","hasLoans","totalLoanAmount","length","principal","monthlyInterest","totalInterest","loanTransactions","filter","t","transaction_status","mounted","fetchMembers","then","urlParams","URLSearchParams","window","location","search","memberIdParam","get","loadMemberData","methods","response","getMembers","error","console","alert","resetForm","memberResponse","getMemberById","balanceResponse","getMemberBalance","loansResponse","getLoans","loan","member_id","parseInt","log","transactionsResponse","getMemberTransactions","resetTransactionForm","newUrl","pathname","history","replaceState","document","title","formatAddress","member","parts","address_line1","subdistrict","district","province","postal_code","part","trim","join","formatCurrency","value","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","formatTransactionType","type","getAmountClass","submitLoanRepayment","repayLoan","loan_id","parseFloat","showSuccessResult","current_loan_balance","errorMessage","message","showErrorResult","balance","closeResultModal"],"sources":["C:\\Users\\HP\\Documents\\GitHub\\Mooban\\frontend\\src\\views\\LoanRepaymentForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"loan-repayment-container\">\r\n    <h1>ระบบชำระเงินกู้</h1>\r\n    \r\n    <!-- เลือกสมาชิก -->\r\n    <div class=\"member-selection\">\r\n      <h2>เลือกสมาชิก</h2>\r\n      <div class=\"form-group\">\r\n        <label for=\"member_id\">สมาชิก *</label>\r\n        <select v-model=\"selectedMemberId\" id=\"member_id\" @change=\"loadMemberData\" required>\r\n          <option value=\"\">-- เลือกสมาชิก --</option>\r\n          <option v-for=\"member in members\" :key=\"member.member_id\" :value=\"member.member_id\">\r\n            {{ member.first_name }} {{ member.last_name }} (ID: {{ member.member_id }})\r\n          </option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- แสดงข้อมูลสมาชิกและยอดเงิน -->\r\n    <div v-if=\"selectedMemberId && memberData\" class=\"member-info\">\r\n      <div class=\"info-card\">\r\n        <h3>ข้อมูลสมาชิก</h3>\r\n        <div class=\"info-row\">\r\n          <div class=\"info-label\">ชื่อ-นามสกุล:</div>\r\n          <div class=\"info-value\">{{ memberData.first_name }} {{ memberData.last_name }}</div>\r\n        </div>\r\n        <div class=\"info-row\">\r\n          <div class=\"info-label\">เบอร์โทรศัพท์:</div>\r\n          <div class=\"info-value\">{{ memberData.phone || '-' }}</div>\r\n        </div>\r\n        <div class=\"info-row\">\r\n          <div class=\"info-label\">ที่อยู่:</div>\r\n          <div class=\"info-value\">{{ formatAddress(memberData) }}</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"balance-card\">\r\n        <h3>ยอดเงินปัจจุบัน</h3>\r\n        <div class=\"balance-row\">\r\n          <div class=\"balance-label\">ยอดเงินกู้คงเหลือ:</div>\r\n          <div class=\"balance-value loan\">{{ formatCurrency(memberBalance.loan_balance || 0) }}</div>\r\n        </div>\r\n        <div class=\"balance-row\" v-if=\"totalLoanAmount > 0\">\r\n          <div class=\"balance-label\">ยอดเงินรวม (เงินต้น+ดอกเบี้ย):</div>\r\n          <div class=\"balance-value loan\">{{ formatCurrency(totalLoanAmount) }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- ฟอร์มชำระเงินกู้ -->\r\n    <div v-if=\"selectedMemberId && hasLoans\" class=\"loan-repayment-form\">\r\n      <h2>ชำระเงินกู้</h2>\r\n      \r\n      <form @submit.prevent=\"submitLoanRepayment\" class=\"form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"loan_id\">เลือกสัญญาเงินกู้ *</label>\r\n          <select v-model=\"selectedLoanId\" id=\"loan_id\" required>\r\n            <option value=\"\">-- เลือกสัญญาเงินกู้ --</option>\r\n            <option v-for=\"loan in memberLoans\" :key=\"loan.loan_id\" :value=\"loan.loan_id\">\r\n              สัญญาเลขที่ {{ loan.loan_id }} - {{ formatCurrency(loan.loan_balance) }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"repayment_amount\">จำนวนเงินชำระ (บาท) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"repayment_amount\" \r\n            v-model=\"amount\" \r\n            min=\"1\" \r\n            step=\"0.01\" \r\n            required\r\n            placeholder=\"กรุณาระบุจำนวนเงิน\"\r\n          >\r\n        </div>\r\n        <div class=\"form-actions\">\r\n          <button type=\"button\" class=\"btn-cancel\" @click=\"resetForm\">ยกเลิก</button>\r\n          <button type=\"submit\" class=\"btn-submit\">ยืนยันการชำระเงินกู้</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    \r\n    <div v-else-if=\"selectedMemberId\" class=\"no-loans-message\">\r\n      <p>สมาชิกนี้ไม่มียอดเงินกู้คงเหลือ</p>\r\n    </div>\r\n    \r\n    <!-- ประวัติการชำระเงินกู้ -->\r\n    <div v-if=\"selectedMemberId && loanTransactions.length > 0\" class=\"transaction-history\">\r\n      <h2>ประวัติการชำระเงินกู้</h2>\r\n\r\n      <table class=\"transaction-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>วันที่</th>\r\n            <th>ประเภท</th>\r\n            <th>จำนวนเงิน</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"transaction in loanTransactions\" :key=\"transaction.transaction_id\">\r\n            <td>{{ formatDate(transaction.transaction_date) }}</td>\r\n            <td>{{ formatTransactionType(transaction.transaction_status) }}</td>\r\n            <td :class=\"getAmountClass(transaction.transaction_status)\">\r\n              {{ formatCurrency(transaction.amount) }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <div v-if=\"loanTransactions.length === 0\" class=\"no-transactions\">\r\n        ไม่พบรายการชำระเงินกู้\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Modal แสดงผลการทำรายการ -->\r\n    <div v-if=\"showResultModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h2>{{ resultModalTitle }}</h2>\r\n          <span class=\"close\" @click=\"showResultModal = false\">&times;</span>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"result-message\" :class=\"{ success: isSuccess, error: !isSuccess }\">\r\n            {{ resultMessage }}\r\n          </div>\r\n          <div v-if=\"isSuccess\" class=\"balance-update\">\r\n            <div class=\"balance-row\">\r\n              <div class=\"balance-label\">ยอดเงินกู้คงเหลือ:</div>\r\n              <div class=\"balance-value loan\">{{ formatCurrency(updatedBalance) }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-actions\">\r\n            <button class=\"btn-close\" @click=\"closeResultModal\">ปิด</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      members: [],\r\n      selectedMemberId: '',\r\n      memberData: null,\r\n      memberBalance: {\r\n        deposit_balance: 0,\r\n        loan_balance: 0\r\n      },\r\n      memberLoans: [],\r\n      selectedLoanId: '',\r\n      amount: '',\r\n      transactions: [],\r\n      showResultModal: false,\r\n      resultModalTitle: '',\r\n      resultMessage: '',\r\n      isSuccess: true,\r\n      updatedBalance: 0\r\n    };\r\n  },\r\n  computed: {\r\n    hasLoans() {\r\n      return this.memberBalance && this.memberBalance.loan_balance > 0;\r\n    },\r\n    totalLoanAmount() {\r\n      if (!this.memberLoans || this.memberLoans.length === 0) {\r\n        return 0;\r\n      }\r\n\r\n      // Calculate total loan amount (principal + interest)\r\n      const principal = this.memberBalance.loan_balance || 0;\r\n      const monthlyInterest = principal * 0.01; // 1% monthly interest\r\n      const totalInterest = monthlyInterest * 12; // 12 months\r\n      return principal + totalInterest;\r\n    },\r\n    loanTransactions() {\r\n      return this.transactions.filter(t =>\r\n        t.transaction_status === 'loan_repayment' || t.transaction_status === 'loan_disbursement'\r\n      );\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchMembers().then(() => {\r\n      // ตรวจสอบ URL parameters\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const memberIdParam = urlParams.get('member_id');\r\n\r\n      // ถ้ามีการส่ง member_id มาจากหน้าอื่น\r\n      if (memberIdParam) {\r\n        // ตั้งค่า selectedMemberId และโหลดข้อมูล\r\n        this.selectedMemberId = memberIdParam;\r\n        this.loadMemberData();\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    async fetchMembers() {\r\n      try {\r\n        const response = await api.getMembers();\r\n        this.members = response.data;\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching members:', error);\r\n        alert('ไม่สามารถดึงข้อมูลสมาชิกได้');\r\n        return [];\r\n      }\r\n    },\r\n    async loadMemberData() {\r\n      if (!this.selectedMemberId) {\r\n        this.resetForm();\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // ดึงข้อมูลสมาชิก\r\n        const memberResponse = await api.getMemberById(this.selectedMemberId);\r\n        this.memberData = memberResponse.data;\r\n\r\n        // ดึงข้อมูลยอดเงิน\r\n        const balanceResponse = await api.getMemberBalance(this.selectedMemberId);\r\n        this.memberBalance = balanceResponse.data;\r\n\r\n        // ดึงข้อมูลเงินกู้\r\n        const loansResponse = await api.getLoans();\r\n        this.memberLoans = loansResponse.data.filter(loan =>\r\n          loan.member_id === parseInt(this.selectedMemberId)\r\n        );\r\n\r\n        // ตรวจสอบว่ามีข้อมูลเงินกู้หรือไม่\r\n        console.log('Member loans:', this.memberLoans);\r\n\r\n        // ดึงประวัติธุรกรรม\r\n        const transactionsResponse = await api.getMemberTransactions(this.selectedMemberId);\r\n        this.transactions = transactionsResponse.data;\r\n\r\n        // รีเซ็ตฟอร์ม\r\n        this.resetTransactionForm();\r\n\r\n        // ตรวจสอบ URL parameters\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const memberIdParam = urlParams.get('member_id');\r\n\r\n        // ถ้ามีการส่ง member_id มาจากหน้าอื่น และตรงกับที่เลือก\r\n        if (memberIdParam && memberIdParam === this.selectedMemberId) {\r\n          // ลบ parameter จาก URL โดยไม่ reload หน้า\r\n          const newUrl = window.location.pathname;\r\n          window.history.replaceState({}, document.title, newUrl);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading member data:', error);\r\n        alert('ไม่สามารถโหลดข้อมูลสมาชิกได้');\r\n      }\r\n    },\r\n    formatAddress(member) {\r\n      if (!member) return '';\r\n      \r\n      const parts = [\r\n        member.address_line1,\r\n        member.subdistrict,\r\n        member.district,\r\n        member.province,\r\n        member.postal_code\r\n      ].filter(part => part && part.trim() !== '');\r\n      \r\n      return parts.join(' ');\r\n    },\r\n    formatCurrency(value) {\r\n      if (value === undefined || value === null) return '0.00 บาท';\r\n      \r\n      return new Intl.NumberFormat('th-TH', {\r\n        style: 'currency',\r\n        currency: 'THB',\r\n        minimumFractionDigits: 2\r\n      }).format(value);\r\n    },\r\n    formatDate(dateString) {\r\n      if (!dateString) return '';\r\n      \r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    },\r\n    formatTransactionType(type) {\r\n      switch (type) {\r\n        case 'loan_repayment':\r\n          return 'ชำระเงินกู้';\r\n        case 'loan_disbursement':\r\n          return 'รับเงินกู้';\r\n        default:\r\n          return type;\r\n      }\r\n    },\r\n    getAmountClass(type) {\r\n      switch (type) {\r\n        case 'loan_disbursement':\r\n          return 'amount-positive';\r\n        case 'loan_repayment':\r\n          return 'amount-negative';\r\n        default:\r\n          return '';\r\n      }\r\n    },\r\n    async submitLoanRepayment() {\r\n      if (!this.selectedMemberId || !this.selectedLoanId || !this.amount || this.amount <= 0) {\r\n        alert('กรุณากรอกข้อมูลให้ครบถ้วน');\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        const response = await api.repayLoan({\r\n          member_id: this.selectedMemberId,\r\n          loan_id: this.selectedLoanId,\r\n          amount: parseFloat(this.amount)\r\n        });\r\n        \r\n        this.showSuccessResult(\r\n          'ชำระเงินกู้สำเร็จ',\r\n          `ชำระเงินกู้จำนวน ${this.formatCurrency(this.amount)} เรียบร้อยแล้ว`,\r\n          response.data.current_loan_balance\r\n        );\r\n        \r\n        // รีเฟรชข้อมูล\r\n        this.loadMemberData();\r\n      } catch (error) {\r\n        console.error('Error repaying loan:', error);\r\n        \r\n        let errorMessage = 'ไม่สามารถชำระเงินกู้ได้ กรุณาลองใหม่อีกครั้ง';\r\n        if (error.response && error.response.data && error.response.data.message) {\r\n          errorMessage = error.response.data.message;\r\n        }\r\n        \r\n        this.showErrorResult('เกิดข้อผิดพลาด', errorMessage);\r\n      }\r\n    },\r\n    showSuccessResult(title, message, balance) {\r\n      this.resultModalTitle = title;\r\n      this.resultMessage = message;\r\n      this.isSuccess = true;\r\n      this.updatedBalance = balance;\r\n      this.showResultModal = true;\r\n    },\r\n    showErrorResult(title, message) {\r\n      this.resultModalTitle = title;\r\n      this.resultMessage = message;\r\n      this.isSuccess = false;\r\n      this.showResultModal = true;\r\n    },\r\n    closeResultModal() {\r\n      this.showResultModal = false;\r\n      this.resetTransactionForm();\r\n    },\r\n    resetTransactionForm() {\r\n      this.selectedLoanId = '';\r\n      this.amount = '';\r\n    },\r\n    resetForm() {\r\n      this.memberData = null;\r\n      this.memberBalance = {\r\n        deposit_balance: 0,\r\n        loan_balance: 0\r\n      };\r\n      this.memberLoans = [];\r\n      this.transactions = [];\r\n      this.resetTransactionForm();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.loan-repayment-container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: 'Sarabun', sans-serif;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-bottom: 30px;\r\n  font-size: 28px;\r\n}\r\n\r\nh2 {\r\n  color: #2c3e50;\r\n  margin: 20px 0;\r\n  font-size: 22px;\r\n  border-bottom: 2px solid #4CAF50;\r\n  padding-bottom: 10px;\r\n}\r\n\r\nh3 {\r\n  color: #2c3e50;\r\n  margin: 15px 0;\r\n  font-size: 18px;\r\n}\r\n\r\n/* Member selection */\r\n.member-selection {\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\nselect, input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  background-color: white;\r\n}\r\n\r\nselect:focus, input:focus {\r\n  border-color: #4CAF50;\r\n  outline: none;\r\n}\r\n\r\n/* Member info */\r\n.member-info {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.info-card, .balance-card {\r\n  flex: 1;\r\n  background-color: white;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.info-row, .balance-row {\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n  border-bottom: 1px dotted #eee;\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.info-label, .balance-label {\r\n  font-weight: bold;\r\n  width: 150px;\r\n  color: #555;\r\n}\r\n\r\n.info-value, .balance-value {\r\n  flex: 1;\r\n}\r\n\r\n.balance-value.loan {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n/* Loan repayment form */\r\n.loan-repayment-form {\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form {\r\n  max-width: 500px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\nbutton {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.btn-cancel {\r\n  background-color: #f44336;\r\n  color: white;\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background-color: #d32f2f;\r\n}\r\n\r\n.btn-submit {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\n.btn-submit:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.btn-close {\r\n  background-color: #2196F3;\r\n  color: white;\r\n  margin: 0 auto;\r\n  display: block;\r\n}\r\n\r\n.btn-close:hover {\r\n  background-color: #0b7dda;\r\n}\r\n\r\n/* No loans message */\r\n.no-loans-message {\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n/* Transaction history */\r\n.transaction-history {\r\n  margin-top: 30px;\r\n}\r\n\r\n.transaction-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n  background-color: white;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.transaction-table th, .transaction-table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.transaction-table th {\r\n  background-color: #f5f5f5;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.amount-positive {\r\n  color: #4CAF50;\r\n  font-weight: bold;\r\n}\r\n\r\n.amount-negative {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n.no-transactions {\r\n  text-align: center;\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n  margin-top: 10px;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n/* Modal */\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  width: 90%;\r\n  max-width: 500px;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.modal-header h2 {\r\n  margin: 0;\r\n  border: none;\r\n  padding: 0;\r\n}\r\n\r\n.close {\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  color: #aaa;\r\n}\r\n\r\n.close:hover {\r\n  color: #333;\r\n}\r\n\r\n.modal-body {\r\n  padding: 20px;\r\n}\r\n\r\n.result-message {\r\n  text-align: center;\r\n  padding: 15px;\r\n  margin-bottom: 20px;\r\n  border-radius: 4px;\r\n  font-size: 18px;\r\n}\r\n\r\n.result-message.success {\r\n  background-color: #e8f5e9;\r\n  color: #2e7d32;\r\n  border: 1px solid #c8e6c9;\r\n}\r\n\r\n.result-message.error {\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n  border: 1px solid #ffcdd2;\r\n}\r\n\r\n.balance-update {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.modal-actions {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .member-info {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}