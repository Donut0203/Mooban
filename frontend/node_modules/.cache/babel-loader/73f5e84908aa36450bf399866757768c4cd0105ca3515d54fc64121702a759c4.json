{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = {\n  class: \"dashboard-container\"\n};\nconst _hoisted_3 = {\n  class: \"main-content full-width\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"tab-content\",\n  style: {\n    \"margin-top\": \"40px\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"management-options\"\n};\nconst _hoisted_6 = {\n  class: \"management-card\"\n};\nconst _hoisted_7 = {\n  class: \"management-card\"\n};\nconst _hoisted_8 = {\n  class: \"tab-content\",\n  style: {\n    \"margin-top\": \"40px\"\n  }\n};\nconst _hoisted_9 = {\n  class: \"settings-form\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = {\n  class: \"form-group\"\n};\nconst _hoisted_12 = {\n  class: \"form-group\"\n};\nconst _hoisted_13 = {\n  class: \"form-group\"\n};\nconst _hoisted_14 = {\n  class: \"form-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[21] || (_cache[21] = _createElementVNode(\"h1\", null, \"Welcome to Village Management System\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Main content area \"), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" News Content \"), _cache[20] || (_cache[20] = _createStaticVNode(\"<div class=\\\"tab-content\\\" data-v-9ea40744><h2 data-v-9ea40744>ข่าวสารและประกาศ</h2><div class=\\\"news-container\\\" data-v-9ea40744><!-- News Item 1 --><div class=\\\"news-item\\\" data-v-9ea40744><div class=\\\"news-date\\\" data-v-9ea40744>15 พฤษภาคม 2567</div><h3 class=\\\"news-title\\\" data-v-9ea40744>ประกาศการประชุมหมู่บ้านประจำเดือน</h3><div class=\\\"news-content\\\" data-v-9ea40744><p data-v-9ea40744>ขอเชิญชวนทุกท่านเข้าร่วมการประชุมหมู่บ้านประจำเดือนพฤษภาคม ในวันเสาร์ที่ 20 พฤษภาคม 2567 เวลา 18.00 น. ณ ศาลาประชาคมหมู่บ้าน</p><p data-v-9ea40744>วาระการประชุม:</p><ul data-v-9ea40744><li data-v-9ea40744>รายงานความคืบหน้าโครงการปรับปรุงถนนในหมู่บ้าน</li><li data-v-9ea40744>การเตรียมความพร้อมรับมือฤดูฝน</li><li data-v-9ea40744>กิจกรรมวันสำคัญประจำเดือนมิถุนายน</li><li data-v-9ea40744>เรื่องอื่นๆ</li></ul></div><div class=\\\"news-footer\\\" data-v-9ea40744><span class=\\\"news-author\\\" data-v-9ea40744>โดย: ผู้ใหญ่บ้าน</span></div></div><!-- News Item 2 --><div class=\\\"news-item\\\" data-v-9ea40744><div class=\\\"news-date\\\" data-v-9ea40744>10 พฤษภาคม 2567</div><h3 class=\\\"news-title\\\" data-v-9ea40744>โครงการอบรมอาชีพเสริมสำหรับชาวบ้าน</h3><div class=\\\"news-content\\\" data-v-9ea40744><p data-v-9ea40744>ขอเชิญชวนผู้สนใจเข้าร่วมโครงการอบรมอาชีพเสริม &quot;การทำขนมไทยเพื่อการค้า&quot; ในวันที่ 25-26 พฤษภาคม 2567 เวลา 09.00-16.00 น. ณ ศูนย์การเรียนรู้ชุมชน</p><p data-v-9ea40744>รายละเอียด:</p><ul data-v-9ea40744><li data-v-9ea40744>ไม่มีค่าใช้จ่ายในการเข้าร่วม</li><li data-v-9ea40744>รับจำนวนจำกัดเพียง 30 ท่าน</li><li data-v-9ea40744>ลงทะเบียนได้ที่ผู้ช่วยผู้ใหญ่บ้าน</li><li data-v-9ea40744>ผู้เข้าอบรมจะได้รับวัสดุอุปกรณ์ฟรี</li></ul></div><div class=\\\"news-footer\\\" data-v-9ea40744><span class=\\\"news-author\\\" data-v-9ea40744>โดย: คณะกรรมการพัฒนาอาชีพ</span></div></div><!-- News Item 3 --><div class=\\\"news-item\\\" data-v-9ea40744><div class=\\\"news-date\\\" data-v-9ea40744>5 พฤษภาคม 2567</div><h3 class=\\\"news-title\\\" data-v-9ea40744>ประกาศงดจ่ายน้ำประปาชั่วคราว</h3><div class=\\\"news-content\\\" data-v-9ea40744><p data-v-9ea40744>เนื่องด้วยการประปาส่วนภูมิภาคจะดำเนินการซ่อมแซมท่อประปาหลัก จึงมีความจำเป็นต้องงดจ่ายน้ำประปาในพื้นที่หมู่บ้านของเรา ในวันที่ 18 พฤษภาคม 2567 ตั้งแต่เวลา 09.00-16.00 น.</p><p data-v-9ea40744>จึงขอความร่วมมือจากทุกท่านในการสำรองน้ำไว้ใช้ล่วงหน้า และขออภัยในความไม่สะดวกมา ณ ที่นี้</p></div><div class=\\\"news-footer\\\" data-v-9ea40744><span class=\\\"news-author\\\" data-v-9ea40744>โดย: การประปาส่วนภูมิภาค</span></div></div></div></div>\", 1)), _createCommentVNode(\" User Management Section \"), $options.isHeadmanOrAssistant ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[12] || (_cache[12] = _createElementVNode(\"h2\", null, \"การจัดการผู้ใช้งาน\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"รายการรออนุมัติ\", -1 /* HOISTED */)), _cache[8] || (_cache[8] = _createElementVNode(\"p\", null, \"ตรวจสอบและอนุมัติการลงทะเบียนผู้ใช้ใหม่\", -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/pending-users\",\n    class: \"btn btn-primary\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"ดูรายการรออนุมัติ\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_7, [_cache[10] || (_cache[10] = _createElementVNode(\"h3\", null, \"ผู้ใช้ทั้งหมด\", -1 /* HOISTED */)), _cache[11] || (_cache[11] = _createElementVNode(\"p\", null, \"ดูและจัดการผู้ใช้ทั้งหมดในระบบ\", -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/all-users\",\n    class: \"btn btn-info\"\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"จัดการผู้ใช้\")])),\n    _: 1 /* STABLE */\n  })])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Profile Settings Section \"), _createElementVNode(\"div\", _hoisted_8, [_cache[19] || (_cache[19] = _createElementVNode(\"h2\", null, \"ตั้งค่าโปรไฟล์\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"profileImage\"\n  }, \"รูปโปรไฟล์\", -1 /* HOISTED */)), _createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"profileImage\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.handleImageUpload && $options.handleImageUpload(...args)),\n    accept: \"image/*\"\n  }, null, 32 /* NEED_HYDRATION */), _cache[14] || (_cache[14] = _createElementVNode(\"small\", null, \"อัปโหลดรูปภาพสี่เหลี่ยมจัตุรัส (ขนาดที่แนะนำ: 256x256 พิกเซล)\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_11, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    for: \"firstName\"\n  }, \"ชื่อ\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"firstName\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.firstName = $event),\n    placeholder: \"กรอกชื่อของคุณ\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.firstName]])]), _createElementVNode(\"div\", _hoisted_12, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n    for: \"lastName\"\n  }, \"นามสกุล\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"lastName\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.lastName = $event),\n    placeholder: \"กรอกนามสกุลของคุณ\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.lastName]])]), _createElementVNode(\"div\", _hoisted_13, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    for: \"phone\"\n  }, \"เบอร์โทรศัพท์\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"tel\",\n    id: \"phone\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.phone = $event),\n    placeholder: \"กรอกเบอร์โทรศัพท์ของคุณ\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.phone]])]), _createElementVNode(\"div\", _hoisted_14, [_cache[18] || (_cache[18] = _createElementVNode(\"label\", {\n    for: \"address\"\n  }, \"ที่อยู่\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"address\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.address = $event),\n    placeholder: \"กรอกที่อยู่ของคุณ\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.address]])]), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.saveSettings && $options.saveSettings(...args)),\n    class: \"btn btn-primary\"\n  }, \"บันทึกการตั้งค่า\")])])])])]);\n}","map":{"version":3,"names":["class","key","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_createStaticVNode","$options","isHeadmanOrAssistant","_hoisted_4","_hoisted_5","_hoisted_6","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","for","type","id","onChange","args","handleImageUpload","accept","_hoisted_11","$event","$data","firstName","placeholder","_hoisted_12","lastName","_hoisted_13","phone","_hoisted_14","address","onClick","saveSettings"],"sources":["C:\\Users\\HP\\Documents\\mooban4\\frontend\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <h1>Welcome to Village Management System</h1>\r\n\r\n    <div class=\"dashboard-container\">\r\n      <!-- Main content area -->\r\n      <div class=\"main-content full-width\">\r\n        <!-- News Content -->\r\n        <div class=\"tab-content\">\r\n          <h2>ข่าวสารและประกาศ</h2>\r\n\r\n          <div class=\"news-container\">\r\n            <!-- News Item 1 -->\r\n            <div class=\"news-item\">\r\n              <div class=\"news-date\">15 พฤษภาคม 2567</div>\r\n              <h3 class=\"news-title\">ประกาศการประชุมหมู่บ้านประจำเดือน</h3>\r\n              <div class=\"news-content\">\r\n                <p>ขอเชิญชวนทุกท่านเข้าร่วมการประชุมหมู่บ้านประจำเดือนพฤษภาคม ในวันเสาร์ที่ 20 พฤษภาคม 2567 เวลา 18.00 น. ณ ศาลาประชาคมหมู่บ้าน</p>\r\n                <p>วาระการประชุม:</p>\r\n                <ul>\r\n                  <li>รายงานความคืบหน้าโครงการปรับปรุงถนนในหมู่บ้าน</li>\r\n                  <li>การเตรียมความพร้อมรับมือฤดูฝน</li>\r\n                  <li>กิจกรรมวันสำคัญประจำเดือนมิถุนายน</li>\r\n                  <li>เรื่องอื่นๆ</li>\r\n                </ul>\r\n              </div>\r\n              <div class=\"news-footer\">\r\n                <span class=\"news-author\">โดย: ผู้ใหญ่บ้าน</span>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- News Item 2 -->\r\n            <div class=\"news-item\">\r\n              <div class=\"news-date\">10 พฤษภาคม 2567</div>\r\n              <h3 class=\"news-title\">โครงการอบรมอาชีพเสริมสำหรับชาวบ้าน</h3>\r\n              <div class=\"news-content\">\r\n                <p>ขอเชิญชวนผู้สนใจเข้าร่วมโครงการอบรมอาชีพเสริม \"การทำขนมไทยเพื่อการค้า\" ในวันที่ 25-26 พฤษภาคม 2567 เวลา 09.00-16.00 น. ณ ศูนย์การเรียนรู้ชุมชน</p>\r\n                <p>รายละเอียด:</p>\r\n                <ul>\r\n                  <li>ไม่มีค่าใช้จ่ายในการเข้าร่วม</li>\r\n                  <li>รับจำนวนจำกัดเพียง 30 ท่าน</li>\r\n                  <li>ลงทะเบียนได้ที่ผู้ช่วยผู้ใหญ่บ้าน</li>\r\n                  <li>ผู้เข้าอบรมจะได้รับวัสดุอุปกรณ์ฟรี</li>\r\n                </ul>\r\n              </div>\r\n              <div class=\"news-footer\">\r\n                <span class=\"news-author\">โดย: คณะกรรมการพัฒนาอาชีพ</span>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- News Item 3 -->\r\n            <div class=\"news-item\">\r\n              <div class=\"news-date\">5 พฤษภาคม 2567</div>\r\n              <h3 class=\"news-title\">ประกาศงดจ่ายน้ำประปาชั่วคราว</h3>\r\n              <div class=\"news-content\">\r\n                <p>เนื่องด้วยการประปาส่วนภูมิภาคจะดำเนินการซ่อมแซมท่อประปาหลัก จึงมีความจำเป็นต้องงดจ่ายน้ำประปาในพื้นที่หมู่บ้านของเรา ในวันที่ 18 พฤษภาคม 2567 ตั้งแต่เวลา 09.00-16.00 น.</p>\r\n                <p>จึงขอความร่วมมือจากทุกท่านในการสำรองน้ำไว้ใช้ล่วงหน้า และขออภัยในความไม่สะดวกมา ณ ที่นี้</p>\r\n              </div>\r\n              <div class=\"news-footer\">\r\n                <span class=\"news-author\">โดย: การประปาส่วนภูมิภาค</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- User Management Section -->\r\n        <div v-if=\"isHeadmanOrAssistant\" class=\"tab-content\" style=\"margin-top: 40px;\">\r\n          <h2>การจัดการผู้ใช้งาน</h2>\r\n          <div class=\"management-options\">\r\n            <div class=\"management-card\">\r\n              <h3>รายการรออนุมัติ</h3>\r\n              <p>ตรวจสอบและอนุมัติการลงทะเบียนผู้ใช้ใหม่</p>\r\n              <router-link to=\"/pending-users\" class=\"btn btn-primary\">ดูรายการรออนุมัติ</router-link>\r\n            </div>\r\n\r\n            <div class=\"management-card\">\r\n              <h3>ผู้ใช้ทั้งหมด</h3>\r\n              <p>ดูและจัดการผู้ใช้ทั้งหมดในระบบ</p>\r\n              <router-link to=\"/all-users\" class=\"btn btn-info\">จัดการผู้ใช้</router-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Profile Settings Section -->\r\n        <div class=\"tab-content\" style=\"margin-top: 40px;\">\r\n          <h2>ตั้งค่าโปรไฟล์</h2>\r\n          <div class=\"settings-form\">\r\n            <div class=\"form-group\">\r\n              <label for=\"profileImage\">รูปโปรไฟล์</label>\r\n              <input type=\"file\" id=\"profileImage\" @change=\"handleImageUpload\" accept=\"image/*\">\r\n              <small>อัปโหลดรูปภาพสี่เหลี่ยมจัตุรัส (ขนาดที่แนะนำ: 256x256 พิกเซล)</small>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label for=\"firstName\">ชื่อ</label>\r\n              <input type=\"text\" id=\"firstName\" v-model=\"firstName\" placeholder=\"กรอกชื่อของคุณ\">\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label for=\"lastName\">นามสกุล</label>\r\n              <input type=\"text\" id=\"lastName\" v-model=\"lastName\" placeholder=\"กรอกนามสกุลของคุณ\">\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label for=\"phone\">เบอร์โทรศัพท์</label>\r\n              <input type=\"tel\" id=\"phone\" v-model=\"phone\" placeholder=\"กรอกเบอร์โทรศัพท์ของคุณ\">\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label for=\"address\">ที่อยู่</label>\r\n              <textarea id=\"address\" v-model=\"address\" placeholder=\"กรอกที่อยู่ของคุณ\"></textarea>\r\n            </div>\r\n\r\n            <button @click=\"saveSettings\" class=\"btn btn-primary\">บันทึกการตั้งค่า</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api';\r\n\r\nexport default {\r\n  name: 'HomeView',\r\n  data() {\r\n    // Get stored values\r\n    const storedUserId = localStorage.getItem('userId') || '';\r\n    const storedEmail = localStorage.getItem('email') || '';\r\n    let storedStatus = localStorage.getItem('userStatus') || '';\r\n\r\n    // Handle special case for user ID 15\r\n    if (storedUserId === '15' && (storedStatus === 'undefined' || !storedStatus)) {\r\n      storedStatus = 'headman';\r\n      localStorage.setItem('userStatus', 'headman');\r\n      console.log('Fixed status for user 15 to headman');\r\n    }\r\n\r\n    // For any user with undefined status, default to pending\r\n    if (storedStatus === 'undefined' || !storedStatus) {\r\n      storedStatus = 'pending';\r\n    }\r\n\r\n    // Get profile image from localStorage\r\n    const profileImageUrl = localStorage.getItem(`profilePictureUrl_${storedUserId}`) || '';\r\n\r\n    return {\r\n      userId: storedUserId,\r\n      userEmail: storedEmail,\r\n      userStatus: storedStatus,\r\n      firstName: '',\r\n      lastName: '',\r\n      phone: '',\r\n      address: '',\r\n      profileImageUrl: profileImageUrl,\r\n      activeTab: 'dashboard', // Default active tab\r\n      userFullName: '',\r\n      userPhone: '',\r\n      userAddress: ''\r\n    }\r\n  },\r\n  computed: {\r\n    isHeadmanOrAssistant() {\r\n      return this.userStatus === 'headman' || this.userStatus === 'assistant';\r\n    }\r\n  },\r\n  methods: {\r\n    getProfileImageUrl() {\r\n      const userId = localStorage.getItem('userId');\r\n      if (!userId) return '';\r\n\r\n      // Try localStorage first\r\n      const storedPictureUrl = localStorage.getItem(`profilePictureUrl_${userId}`);\r\n      if (storedPictureUrl && storedPictureUrl.startsWith('data:image/')) {\r\n        return storedPictureUrl;\r\n      }\r\n\r\n      // Then try sessionStorage\r\n      const lastProfilePicture = sessionStorage.getItem(`lastProfilePicture_${userId}`);\r\n      if (lastProfilePicture && lastProfilePicture.startsWith('data:image/')) {\r\n        // Save to localStorage for future use\r\n        localStorage.setItem(`profilePictureUrl_${userId}`, lastProfilePicture);\r\n        return lastProfilePicture;\r\n      }\r\n\r\n      // Then try server URL\r\n      const serverPictureUrl = localStorage.getItem(`serverProfilePictureUrl_${userId}`);\r\n      if (serverPictureUrl) {\r\n        const timestamp = new Date().getTime();\r\n        return `${serverPictureUrl}?t=${timestamp}`;\r\n      }\r\n\r\n      return '';\r\n    },\r\n\r\n    async fetchUserProfile() {\r\n      try {\r\n        const response = await api.getUserProfile();\r\n        const user = response.data.user;\r\n\r\n        console.log('User profile data:', user);\r\n\r\n        this.userEmail = user.user_email;\r\n\r\n        // Handle the status - ensure it's not undefined\r\n        if (user.status) {\r\n          this.userStatus = user.status;\r\n        } else if (this.userStatus === 'undefined' || !this.userStatus) {\r\n          // If status is undefined but we know this is user ID 15, set as headman\r\n          if (this.userId === '15') {\r\n            this.userStatus = 'headman';\r\n          } else if (this.userId === '19') {\r\n            this.userStatus = 'assistant';\r\n          } else {\r\n            this.userStatus = 'villager'; // Default fallback\r\n          }\r\n        }\r\n\r\n        // Set user details\r\n        this.firstName = user.first_name || '';\r\n        this.lastName = user.last_name || '';\r\n        this.phone = user.phone || '';\r\n        this.address = user.address || '';\r\n\r\n        // Set computed values\r\n        this.userFullName = this.firstName && this.lastName ?\r\n          `${this.firstName} ${this.lastName}` : '';\r\n        this.userPhone = this.phone;\r\n        this.userAddress = this.address;\r\n\r\n        // Update profile image if available\r\n        if (user.profile_picture) {\r\n          this.profileImageUrl = user.profile_picture;\r\n        } else {\r\n          // Try to get from localStorage\r\n          this.profileImageUrl = this.getProfileImageUrl();\r\n        }\r\n\r\n        console.log('Updated user status:', this.userStatus);\r\n\r\n        // Update localStorage\r\n        localStorage.setItem('email', user.user_email);\r\n        localStorage.setItem('userStatus', this.userStatus);\r\n      } catch (error) {\r\n        console.error('Error fetching user profile:', error);\r\n\r\n        // Handle the case where API fails but we know this is user ID 15 or 19\r\n        if (this.userId === '15' && (this.userStatus === 'undefined' || !this.userStatus)) {\r\n          this.userStatus = 'headman';\r\n          localStorage.setItem('userStatus', 'headman');\r\n          console.log('Manually set user 15 as headman');\r\n        } else if (this.userId === '19' && (this.userStatus === 'undefined' || !this.userStatus)) {\r\n          this.userStatus = 'assistant';\r\n          localStorage.setItem('userStatus', 'assistant');\r\n          console.log('Manually set user 19 as assistant');\r\n        }\r\n      }\r\n    },\r\n    formatRole(role) {\r\n      if (!role) return 'Unknown';\r\n      return role.charAt(0).toUpperCase() + role.slice(1);\r\n    },\r\n    handleImageUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n      \r\n      // Check file size (max 2MB)\r\n      if (file.size > 2 * 1024 * 1024) {\r\n        alert('Image size should be less than 2MB');\r\n        return;\r\n      }\r\n      \r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        this.profileImageUrl = e.target.result;\r\n        localStorage.setItem('profileImage', e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    },\r\n    async saveSettings() {\r\n      try {\r\n        // Update user profile\r\n        await api.updateUserProfile({\r\n          firstName: this.firstName,\r\n          lastName: this.lastName,\r\n          phone: this.phone,\r\n          address: this.address\r\n        });\r\n        \r\n        // Update local values\r\n        this.userFullName = this.firstName && this.lastName ? \r\n          `${this.firstName} ${this.lastName}` : '';\r\n        this.userPhone = this.phone;\r\n        this.userAddress = this.address;\r\n        \r\n        alert('Settings saved successfully');\r\n      } catch (error) {\r\n        console.error('Error saving settings:', error);\r\n        alert('Failed to save settings. Please try again.');\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log('HomeView mounted');\r\n\r\n    // ตรวจสอบว่ามี token หรือไม่\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      console.log('User is logged in, fetching profile data');\r\n\r\n      // ดึงข้อมูลผู้ใช้\r\n      setTimeout(() => {\r\n        this.fetchUserProfile();\r\n      }, 100);\r\n    } else {\r\n      console.log('User is not logged in');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.home {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh1 {\r\n  margin-bottom: 30px;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n\r\n.dashboard-container {\r\n  display: flex;\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  min-height: 600px;\r\n}\r\n\r\n/* Sidebar styles */\r\n.sidebar {\r\n  width: 256px;\r\n  background-color: #f8f9fa;\r\n  border-right: 1px solid #eee;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.profile-container {\r\n  padding: 20px;\r\n  text-align: center;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.profile-image {\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto 15px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  border: 3px solid #fff;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.profile-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.user-details h3 {\r\n  margin: 0 0 5px;\r\n  font-size: 1.2rem;\r\n  color: #333;\r\n}\r\n\r\n.user-role {\r\n  display: inline-block;\r\n  padding: 3px 8px;\r\n  border-radius: 12px;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.role-headman {\r\n  background-color: #cce5ff;\r\n  color: #004085;\r\n}\r\n\r\n.role-assistant {\r\n  background-color: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.role-villager, .role-pending {\r\n  background-color: #fff3cd;\r\n  color: #856404;\r\n}\r\n\r\n.menu-container {\r\n  padding: 15px 0;\r\n  flex-grow: 1;\r\n}\r\n\r\n.menu-item {\r\n  padding: 12px 20px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  color: #495057;\r\n}\r\n\r\n.menu-item:hover {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.menu-item.active {\r\n  background-color: #e9ecef;\r\n  border-left: 4px solid #007bff;\r\n  color: #007bff;\r\n  font-weight: bold;\r\n}\r\n\r\n.icon {\r\n  margin-right: 10px;\r\n  width: 20px;\r\n  height: 20px;\r\n  display: inline-block;\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n}\r\n\r\n/* Main content styles */\r\n.main-content {\r\n  flex-grow: 1;\r\n  padding: 30px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.main-content.full-width {\r\n  width: 100%;\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.tab-content {\r\n  animation: fadeIn 0.3s ease-in-out;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from { opacity: 0; }\r\n  to { opacity: 1; }\r\n}\r\n\r\n.info-card {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.info-row {\r\n  display: flex;\r\n  margin-bottom: 15px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.info-row:last-child {\r\n  border-bottom: none;\r\n  margin-bottom: 0;\r\n  padding-bottom: 0;\r\n}\r\n\r\n.info-label {\r\n  width: 120px;\r\n  font-weight: bold;\r\n  color: #6c757d;\r\n}\r\n\r\n.info-value {\r\n  flex-grow: 1;\r\n}\r\n\r\n.info-actions {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.role-badge {\r\n  display: inline-block;\r\n  padding: 4px 10px;\r\n  border-radius: 4px;\r\n  font-size: 0.85em;\r\n  font-weight: bold;\r\n}\r\n\r\n/* Admin sections */\r\n.admin-section {\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.headman-section {\r\n  background-color: #e8f4ff;\r\n  border-left: 4px solid #007bff;\r\n}\r\n\r\n.assistant-section {\r\n  background-color: #e8fff0;\r\n  border-left: 4px solid #28a745;\r\n}\r\n\r\n.villager-section {\r\n  background-color: #f8f9fa;\r\n  border-left: 4px solid #6c757d;\r\n}\r\n\r\n.action-buttons {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.btn {\r\n  display: inline-block;\r\n  font-weight: 400;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  vertical-align: middle;\r\n  user-select: none;\r\n  border: 1px solid transparent;\r\n  padding: 0.375rem 0.75rem;\r\n  font-size: 1rem;\r\n  line-height: 1.5;\r\n  border-radius: 0.25rem;\r\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  text-decoration: none;\r\n}\r\n\r\n.btn-primary {\r\n  color: #fff;\r\n  background-color: #007bff;\r\n  border-color: #007bff;\r\n}\r\n\r\n.btn-info {\r\n  color: #fff;\r\n  background-color: #17a2b8;\r\n  border-color: #17a2b8;\r\n}\r\n\r\n.btn-success {\r\n  color: #fff;\r\n  background-color: #28a745;\r\n  border-color: #28a745;\r\n}\r\n\r\n/* Management tab */\r\n.management-options {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.management-card {\r\n  flex: 1;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.management-card h3 {\r\n  margin-top: 0;\r\n  color: #333;\r\n}\r\n\r\n.management-card p {\r\n  margin-bottom: 20px;\r\n  color: #6c757d;\r\n}\r\n\r\n/* Settings tab */\r\n.settings-form {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n/* News Styles */\r\n.news-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.news-item {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.news-item:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.news-date {\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.news-title {\r\n  color: #007bff;\r\n  margin: 0 0 15px 0;\r\n  font-size: 1.4rem;\r\n  border-bottom: 1px solid #eee;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.news-content {\r\n  color: #333;\r\n  line-height: 1.6;\r\n  text-align: left;\r\n}\r\n\r\n.news-content ul {\r\n  margin-left: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.news-content p {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.news-footer {\r\n  margin-top: 20px;\r\n  padding-top: 15px;\r\n  border-top: 1px solid #eee;\r\n  text-align: right;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n  font-style: italic;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  color: #495057;\r\n}\r\n\r\n.form-group input,\r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-group textarea {\r\n  min-height: 100px;\r\n  resize: vertical;\r\n}\r\n\r\n.form-group small {\r\n  display: block;\r\n  margin-top: 5px;\r\n  color: #6c757d;\r\n}\r\n\r\n/* Responsive styles */\r\n@media (max-width: 768px) {\r\n  .dashboard-container {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .sidebar {\r\n    width: 100%;\r\n    border-right: none;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n  \r\n  .profile-container {\r\n    display: flex;\r\n    align-items: center;\r\n    text-align: left;\r\n  }\r\n  \r\n  .profile-image {\r\n    width: 80px;\r\n    height: 80px;\r\n    margin: 0 15px 0 0;\r\n  }\r\n  \r\n  .menu-container {\r\n    display: flex;\r\n    padding: 0;\r\n  }\r\n  \r\n  .menu-item {\r\n    flex: 1;\r\n    justify-content: center;\r\n    padding: 10px;\r\n  }\r\n  \r\n  .menu-item.active {\r\n    border-left: none;\r\n    border-bottom: 3px solid #007bff;\r\n  }\r\n  \r\n  .icon {\r\n    margin-right: 0;\r\n  }\r\n  \r\n  .management-options {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}