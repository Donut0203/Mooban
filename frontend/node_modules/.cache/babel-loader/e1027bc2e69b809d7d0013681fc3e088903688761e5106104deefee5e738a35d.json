{"ast":null,"code":"import axios from 'axios';\nimport api from '@/services/api';\nexport default {\n  data() {\n    return {\n      members: [],\n      // เพิ่มตัวแปรเก็บข้อมูลสมาชิกทั้งหมด\n      loan: {\n        loan_id: null,\n        member_id: '',\n        // เพิ่ม member_id สำหรับเลือกสมาชิก\n        full_name: '',\n        phone: '',\n        bank_name: '',\n        account_number: '',\n        id_card: '',\n        address: '',\n        subdistrict: '',\n        district: '',\n        province: '',\n        postal_code: '',\n        first_payment_date: '',\n        loan_balance: '',\n        monthly_interest: '',\n        total_amount: '',\n        interest_rate: null,\n        repayment_period: null,\n        start_date: null,\n        end_date: null,\n        guarantee_required: 1,\n        created_by: null,\n        updated_by: null,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        id_card_image: null,\n        house_registration_image: null\n      },\n      guarantors: [{\n        member_id: '',\n        name: '',\n        id_card: '',\n        address: '',\n        id_card_image: null,\n        house_registration_image: null\n      }, {\n        member_id: '',\n        name: '',\n        id_card: '',\n        address: '',\n        id_card_image: null,\n        house_registration_image: null\n      }]\n    };\n  },\n  created() {\n    // ดึงข้อมูลสมาชิกทั้งหมดเมื่อโหลดหน้า\n    this.fetchMembers();\n\n    // ถ้ามีการกรอกจำนวนเงินต้นไว้แล้ว ให้คำนวณดอกเบี้ยอัตโนมัติ\n    if (this.loan.loan_balance) {\n      this.calculateMonthlyInterest();\n    }\n  },\n  methods: {\n    // ดึงข้อมูลสมาชิกทั้งหมด\n    async fetchMembers() {\n      try {\n        const response = await api.getMembers();\n        this.members = response.data;\n      } catch (error) {\n        console.error('Error fetching members:', error);\n        alert('ไม่สามารถดึงข้อมูลสมาชิกได้');\n      }\n    },\n    // โหลดข้อมูลสมาชิกเมื่อเลือก member_id\n    async loadMemberData() {\n      if (!this.loan.member_id) return;\n      try {\n        const response = await api.getMemberById(this.loan.member_id);\n        const member = response.data;\n\n        // นำข้อมูลสมาชิกมาใส่ในฟอร์ม\n        this.loan.full_name = `${member.first_name} ${member.last_name}`;\n        this.loan.phone = member.phone;\n        this.loan.bank_name = member.bank_name || '';\n        this.loan.account_number = member.bank_account || '';\n        this.loan.id_card = member.national_id || '';\n        this.loan.address = member.address_line1 || '';\n        this.loan.subdistrict = member.subdistrict || '';\n        this.loan.district = member.district || '';\n        this.loan.province = member.province || '';\n        this.loan.postal_code = member.postal_code || '';\n\n        // ถ้ามีการกรอกจำนวนเงินต้นไว้แล้ว ให้คำนวณดอกเบี้ยอัตโนมัติ\n        if (this.loan.loan_balance) {\n          this.calculateMonthlyInterest();\n        }\n      } catch (error) {\n        console.error('Error loading member data:', error);\n        alert('ไม่สามารถโหลดข้อมูลสมาชิกได้');\n      }\n    },\n    // โหลดข้อมูลผู้ค้ำประกันคนที่ 1 เมื่อเลือก member_id\n    async loadGuarantor1Data() {\n      if (!this.guarantors[0].member_id) {\n        this.guarantors[0].name = '';\n        this.guarantors[0].id_card = '';\n        this.guarantors[0].address = '';\n        return;\n      }\n      try {\n        const response = await api.getMemberById(this.guarantors[0].member_id);\n        const member = response.data;\n\n        // นำข้อมูลสมาชิกมาใส่ในฟอร์มผู้ค้ำประกัน\n        this.guarantors[0].name = `${member.first_name} ${member.last_name}`;\n        this.guarantors[0].id_card = member.national_id || '';\n        this.guarantors[0].address = this.formatAddress(member);\n      } catch (error) {\n        console.error('Error loading guarantor 1 data:', error);\n        alert('ไม่สามารถโหลดข้อมูลผู้ค้ำประกันคนที่ 1 ได้');\n      }\n    },\n    // โหลดข้อมูลผู้ค้ำประกันคนที่ 2 เมื่อเลือก member_id\n    async loadGuarantor2Data() {\n      if (!this.guarantors[1].member_id) {\n        this.guarantors[1].name = '';\n        this.guarantors[1].id_card = '';\n        this.guarantors[1].address = '';\n        return;\n      }\n      try {\n        const response = await api.getMemberById(this.guarantors[1].member_id);\n        const member = response.data;\n\n        // นำข้อมูลสมาชิกมาใส่ในฟอร์มผู้ค้ำประกัน\n        this.guarantors[1].name = `${member.first_name} ${member.last_name}`;\n        this.guarantors[1].id_card = member.national_id || '';\n        this.guarantors[1].address = this.formatAddress(member);\n      } catch (error) {\n        console.error('Error loading guarantor 2 data:', error);\n        alert('ไม่สามารถโหลดข้อมูลผู้ค้ำประกันคนที่ 2 ได้');\n      }\n    },\n    // ฟังก์ชันจัดรูปแบบที่อยู่\n    formatAddress(member) {\n      const parts = [member.address_line1, member.subdistrict, member.district, member.province, member.postal_code].filter(part => part && part.trim() !== '');\n      return parts.join(' ');\n    },\n    // อัพโหลดเอกสารผู้กู้\n    handleIdCardUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.loan.id_card_image = file;\n      }\n    },\n    handleHouseRegistrationUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.loan.house_registration_image = file;\n      }\n    },\n    // อัพโหลดเอกสารผู้ค้ำประกันคนที่ 1\n    handleGuarantor1IdCardUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.guarantors[0].id_card_image = file;\n      }\n    },\n    handleGuarantor1HouseRegistrationUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.guarantors[0].house_registration_image = file;\n      }\n    },\n    // อัพโหลดเอกสารผู้ค้ำประกันคนที่ 2\n    handleGuarantor2IdCardUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.guarantors[1].id_card_image = file;\n      }\n    },\n    handleGuarantor2HouseRegistrationUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.guarantors[1].house_registration_image = file;\n      }\n    },\n    // คำนวณดอกเบี้ยต่อเดือนอัตโนมัติ (1% ของเงินต้น) และตั้งค่าอื่นๆ\n    calculateMonthlyInterest() {\n      if (this.loan.loan_balance && !isNaN(this.loan.loan_balance)) {\n        const principal = parseFloat(this.loan.loan_balance);\n\n        // คำนวณดอกเบี้ย 1% ของเงินต้น\n        this.loan.monthly_interest = principal * 0.01;\n\n        // ปัดเศษให้เป็นจำนวนเต็ม (ถ้าต้องการ)\n        this.loan.monthly_interest = Math.round(this.loan.monthly_interest);\n\n        // ตั้งค่าอัตราดอกเบี้ยเป็น 1%\n        this.loan.interest_rate = 1;\n\n        // ตั้งค่าระยะเวลาชำระคืนเป็น 12 เดือน (1 ปี)\n        this.loan.repayment_period = 12;\n\n        // คำนวณยอดเงินรวม (เงินต้น + ดอกเบี้ยทั้งหมด)\n        // เงินต้น + (ดอกเบี้ยต่อเดือน x จำนวนเดือน)\n        const totalInterest = this.loan.monthly_interest * this.loan.repayment_period;\n        this.loan.total_amount = principal + totalInterest;\n\n        // ตั้งค่าวันที่เริ่มต้นเป็นวันที่ปัจจุบัน\n        const today = new Date();\n        this.loan.start_date = today.toISOString().split('T')[0];\n\n        // ตั้งค่าวันที่สิ้นสุดเป็นวันที่ปัจจุบัน + 1 ปี\n        const endDate = new Date();\n        endDate.setFullYear(endDate.getFullYear() + 1);\n        this.loan.end_date = endDate.toISOString().split('T')[0];\n      } else {\n        this.loan.monthly_interest = '';\n        this.loan.total_amount = '';\n      }\n    },\n    handleSubmit() {\n      console.log('Starting form submission validation...');\n\n      // ตรวจสอบว่าได้เลือกสมาชิกหรือไม่\n      if (!this.loan.member_id) {\n        alert('กรุณาเลือกสมาชิกที่จะกู้');\n        return;\n      }\n\n      // ตรวจสอบว่าได้กรอกจำนวนเงินกู้หรือไม่\n      if (!this.loan.loan_balance || this.loan.loan_balance <= 0) {\n        alert('กรุณากรอกจำนวนเงินกู้ให้ถูกต้อง');\n        return;\n      }\n\n      // ตรวจสอบว่าได้กรอกวันที่ชำระงวดแรกหรือไม่\n      if (!this.loan.first_payment_date) {\n        alert('กรุณากรอกวันที่ชำระงวดแรก');\n        return;\n      }\n\n      // ตรวจสอบว่าได้เลือกผู้ค้ำประกันหรือไม่\n      if (!this.guarantors[0].member_id || !this.guarantors[1].member_id) {\n        alert('กรุณาเลือกผู้ค้ำประกันให้ครบทั้ง 2 คน');\n        return;\n      }\n\n      // ตรวจสอบว่าผู้ค้ำประกันเป็นคนเดียวกับผู้กู้หรือไม่\n      if (this.guarantors[0].member_id === this.loan.member_id || this.guarantors[1].member_id === this.loan.member_id) {\n        alert('ผู้ค้ำประกันห้ามเป็นผู้กู้');\n        return;\n      }\n\n      // ตรวจสอบว่าผู้ค้ำประกันทั้งสองคนเป็นคนเดียวกันหรือไม่\n      if (this.guarantors[0].member_id === this.guarantors[1].member_id) {\n        alert('ผู้ค้ำประกันทั้งสองคนต้องไม่เป็นคนเดียวกัน');\n        return;\n      }\n\n      // ตรวจสอบว่ามีการอัพโหลดไฟล์ของผู้กู้หรือไม่\n      if (!this.loan.id_card_image || !this.loan.house_registration_image) {\n        alert('กรุณาอัพโหลดเอกสารของผู้กู้ให้ครบถ้วน');\n        return;\n      }\n\n      // ตรวจสอบว่ามีการอัพโหลดไฟล์ของผู้ค้ำประกันคนที่ 1 หรือไม่\n      if (!this.guarantors[0].id_card_image || !this.guarantors[0].house_registration_image) {\n        alert('กรุณาอัพโหลดเอกสารของผู้ค้ำประกันคนที่ 1 ให้ครบถ้วน');\n        return;\n      }\n\n      // ตรวจสอบว่ามีการอัพโหลดไฟล์ของผู้ค้ำประกันคนที่ 2 หรือไม่\n      if (!this.guarantors[1].id_card_image || !this.guarantors[1].house_registration_image) {\n        alert('กรุณาอัพโหลดเอกสารของผู้ค้ำประกันคนที่ 2 ให้ครบถ้วน');\n        return;\n      }\n      console.log('Form validation passed, preparing to submit...');\n\n      // ส่งข้อมูลสินเชื่อและผู้ค้ำประกันไปยัง backend\n      const formData = new FormData();\n\n      // เพิ่มข้อมูลสินเชื่อ\n      Object.keys(this.loan).forEach(key => {\n        if (key !== 'id_card_image' && key !== 'house_registration_image') {\n          // ส่งข้อมูลโดยตรงไม่ใช่ในรูปแบบ loan[key]\n          formData.append(key, this.loan[key]);\n        }\n      });\n\n      // เพิ่มไฟล์ของผู้กู้\n      formData.append('borrower_id_card_image', this.loan.id_card_image);\n      formData.append('borrower_house_registration_image', this.loan.house_registration_image);\n\n      // เพิ่มข้อมูลผู้ค้ำประกัน - ส่งเป็น JSON string แทน\n      formData.append('guarantors', JSON.stringify(this.guarantors.map(g => ({\n        member_id: g.member_id,\n        name: g.name,\n        id_card: g.id_card,\n        address: g.address\n      }))));\n\n      // เพิ่มไฟล์ของผู้ค้ำประกัน\n      this.guarantors.forEach((guarantor, index) => {\n        if (guarantor.id_card_image) {\n          formData.append(`guarantor${index + 1}_id_card_image`, guarantor.id_card_image);\n        }\n        if (guarantor.house_registration_image) {\n          formData.append(`guarantor${index + 1}_house_registration_image`, guarantor.house_registration_image);\n        }\n      });\n\n      // แสดงข้อมูลที่จะส่งไปยัง backend\n      console.log('Form data prepared for submission:');\n      console.log('Loan data:', this.loan);\n      console.log('Guarantors:', this.guarantors);\n\n      // ตรวจสอบข้อมูลใน FormData\n      for (let [key, value] of formData.entries()) {\n        if (value instanceof File) {\n          console.log(`${key}: File - ${value.name} (${value.size} bytes)`);\n        } else {\n          console.log(`${key}: ${value}`);\n        }\n      }\n\n      // ส่งข้อมูลไปยัง backend โดยใช้ api service\n      try {\n        console.log('Submitting loan data...');\n\n        // แสดง loading message\n        const loadingMessage = 'กำลังบันทึกข้อมูล กรุณารอสักครู่...';\n        const loadingAlert = alert(loadingMessage);\n\n        // ใช้ api service แทน axios โดยตรง\n        api.createLoan(formData).then(response => {\n          console.log('Loan created successfully:', response.data);\n          alert('บันทึกข้อมูลสำเร็จ');\n\n          // สร้างรายการธุรกรรมการรับเงินกู้\n          return api.withdrawLoan({\n            member_id: this.loan.member_id,\n            amount: parseFloat(this.loan.total_amount)\n          });\n        }).then(() => {\n          // รีเซ็ตฟอร์มหลังจากบันทึกสำเร็จ\n          this.handleCancel();\n\n          // นำทางไปยังหน้ารายการสินเชื่อ\n          this.$router.push('/loans');\n        }).catch(error => {\n          console.error('Error creating loan:', error);\n          let errorMessage = 'เกิดข้อผิดพลาดในการบันทึกข้อมูล';\n\n          // แสดงข้อความผิดพลาดที่เฉพาะเจาะจงมากขึ้น\n          if (error.response) {\n            console.error('Error response:', error.response.data);\n            if (error.response.data && error.response.data.message) {\n              errorMessage = error.response.data.message;\n            }\n          }\n          alert(errorMessage);\n        });\n      } catch (error) {\n        console.error('Exception during form submission:', error);\n        alert('เกิดข้อผิดพลาดในการส่งข้อมูล กรุณาลองใหม่อีกครั้ง');\n      }\n    },\n    handleCancel() {\n      // รีเซ็ตฟอร์ม\n      this.loan = {\n        loan_id: null,\n        member_id: '',\n        // รีเซ็ต member_id\n        full_name: '',\n        phone: '',\n        bank_name: '',\n        account_number: '',\n        id_card: '',\n        address: '',\n        subdistrict: '',\n        district: '',\n        province: '',\n        postal_code: '',\n        first_payment_date: '',\n        loan_balance: '',\n        monthly_interest: '',\n        total_amount: '',\n        interest_rate: null,\n        repayment_period: null,\n        start_date: null,\n        end_date: null,\n        guarantee_required: 1,\n        created_by: null,\n        updated_by: null,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        id_card_image: null,\n        house_registration_image: null\n      };\n\n      // Reset file input elements ของผู้กู้\n      document.getElementById('id_card_image').value = '';\n      document.getElementById('house_registration_image').value = '';\n\n      // Reset file input elements ของผู้ค้ำประกัน\n      document.getElementById('guarantor1_id_card_image').value = '';\n      document.getElementById('guarantor1_house_registration_image').value = '';\n      document.getElementById('guarantor2_id_card_image').value = '';\n      document.getElementById('guarantor2_house_registration_image').value = '';\n\n      // รีเซ็ตข้อมูลผู้ค้ำประกัน\n      this.guarantors = [{\n        member_id: '',\n        name: '',\n        id_card: '',\n        address: '',\n        id_card_image: null,\n        house_registration_image: null\n      }, {\n        member_id: '',\n        name: '',\n        id_card: '',\n        address: '',\n        id_card_image: null,\n        house_registration_image: null\n      }];\n    }\n  }\n};","map":{"version":3,"names":["axios","api","data","members","loan","loan_id","member_id","full_name","phone","bank_name","account_number","id_card","address","subdistrict","district","province","postal_code","first_payment_date","loan_balance","monthly_interest","total_amount","interest_rate","repayment_period","start_date","end_date","guarantee_required","created_by","updated_by","created_at","Date","toISOString","updated_at","id_card_image","house_registration_image","guarantors","name","created","fetchMembers","calculateMonthlyInterest","methods","response","getMembers","error","console","alert","loadMemberData","getMemberById","member","first_name","last_name","bank_account","national_id","address_line1","loadGuarantor1Data","formatAddress","loadGuarantor2Data","parts","filter","part","trim","join","handleIdCardUpload","event","file","target","files","handleHouseRegistrationUpload","handleGuarantor1IdCardUpload","handleGuarantor1HouseRegistrationUpload","handleGuarantor2IdCardUpload","handleGuarantor2HouseRegistrationUpload","isNaN","principal","parseFloat","Math","round","totalInterest","today","split","endDate","setFullYear","getFullYear","handleSubmit","log","formData","FormData","Object","keys","forEach","key","append","JSON","stringify","map","g","guarantor","index","value","entries","File","size","loadingMessage","loadingAlert","createLoan","then","withdrawLoan","amount","handleCancel","$router","push","catch","errorMessage","message","document","getElementById"],"sources":["C:\\Users\\HP\\Documents\\GitHub\\Mooban\\frontend\\src\\views\\LoanForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"loan\">\r\n    <div>\r\n      <h2>เพิ่มข้อมูลสินเชื่อ</h2>\r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <!-- เลือกสมาชิกที่จะกู้ -->\r\n        <div>\r\n          <label for=\"member_id\">เลือกสมาชิกที่จะกู้ *</label>\r\n          <select v-model=\"loan.member_id\" id=\"member_id\" @change=\"loadMemberData\" required>\r\n            <option value=\"\">-- เลือกสมาชิก --</option>\r\n            <option v-for=\"member in members\" :key=\"member.member_id\" :value=\"member.member_id\">\r\n              {{ member.first_name }} {{ member.last_name }} (ID: {{ member.member_id }})\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- ข้อมูลผู้กู้ (แสดงข้อมูลจากสมาชิกที่เลือก) -->\r\n        <div>\r\n          <label for=\"full_name\">ชื่อ-นามสกุล *</label>\r\n          <input v-model=\"loan.full_name\" type=\"text\" id=\"full_name\" readonly />\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"phone\">เบอร์โทร *</label>\r\n          <input v-model=\"loan.phone\" type=\"text\" id=\"phone\" readonly />\r\n        </div>\r\n    \r\n        <div class=\"form-group\">\r\n          <label for=\"bank_name\">ชื่อธนาคาร <span class=\"required\">*</span></label>\r\n          <select id=\"bank_name\" v-model=\"loan.bank_name\" required>\r\n            <option value=\"\">เลือกธนาคาร</option>\r\n            <option value=\"กรุงเทพ\">ธนาคารกรุงเทพ</option>\r\n            <option value=\"กสิกรไทย\">ธนาคารกสิกรไทย</option>\r\n            <option value=\"กรุงไทย\">ธนาคารกรุงไทย</option>\r\n            <option value=\"ไทยพาณิชย์\">ธนาคารไทยพาณิชย์</option>\r\n            <option value=\"ออมสิน\">ธนาคารออมสิน</option>\r\n            <option value=\"ธกส\">ธนาคารเพื่อการเกษตรและสหกรณ์การเกษตร</option>\r\n            <option value=\"อื่นๆ\">อื่นๆ</option>\r\n          </select>\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"account_number\">เลขบัญชี *</label>\r\n          <input v-model=\"loan.account_number\" type=\"text\" id=\"account_number\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"id_card\">เลขบัตรประชาชน *</label>\r\n          <input v-model=\"loan.id_card\" type=\"text\" id=\"id_card\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"address\">ที่อยู่ *</label>\r\n          <input v-model=\"loan.address\" type=\"text\" id=\"address\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"subdistrict\">ตำบล *</label>\r\n          <input v-model=\"loan.subdistrict\" type=\"text\" id=\"subdistrict\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"district\">อำเภอ *</label>\r\n          <input v-model=\"loan.district\" type=\"text\" id=\"district\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"province\">จังหวัด *</label>\r\n          <input v-model=\"loan.province\" type=\"text\" id=\"province\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"postal_code\">รหัสไปรษณีย์ *</label>\r\n          <input v-model=\"loan.postal_code\" type=\"text\" id=\"postal_code\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"first_payment_date\">กำหนดวันชำระงวดแรก *</label>\r\n          <input v-model=\"loan.first_payment_date\" type=\"date\" id=\"first_payment_date\" required />\r\n        </div>\r\n    \r\n        <div>\r\n          <label for=\"loan_balance\">จำนวนเงินต้น *</label>\r\n          <input v-model=\"loan.loan_balance\" type=\"number\" id=\"loan_balance\" @input=\"calculateMonthlyInterest\" required />\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"monthly_interest\">ชำระดอกเบี้ยต่อเดือน (1% ของเงินต้น) *</label>\r\n          <input v-model=\"loan.monthly_interest\" type=\"number\" id=\"monthly_interest\" readonly />\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"total_amount\">ยอดเงินรวม (เงินต้น+ดอกเบี้ย)</label>\r\n          <input v-model=\"loan.total_amount\" type=\"number\" id=\"total_amount\" readonly />\r\n          <div class=\"hint\">ยอดเงินรวมทั้งหมดที่ต้องชำระ (เงินต้น + ดอกเบี้ย 1% ต่อเดือน x 12 เดือน)</div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"repayment_period\">ระยะเวลาชำระคืน (เดือน)</label>\r\n          <input v-model=\"loan.repayment_period\" type=\"number\" id=\"repayment_period\" value=\"12\" readonly />\r\n          <div class=\"hint\">ระยะเวลาชำระคืนคงที่ 12 เดือน (1 ปี)</div>\r\n        </div>\r\n    \r\n        <!-- ข้อมูลและเอกสารผู้กู้ -->\r\n        <div class=\"borrower-section\">\r\n          <h4>เอกสารผู้กู้</h4>\r\n          <div>\r\n            <label for=\"id_card_image\">สำเนาบัตรประชาชน ผู้กู้ *</label>\r\n            <input type=\"file\" id=\"id_card_image\" @change=\"handleIdCardUpload\" required />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"house_registration_image\">สำเนาทะเบียนบ้าน ผู้กู้ *</label>\r\n            <input type=\"file\" id=\"house_registration_image\" @change=\"handleHouseRegistrationUpload\" required />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ข้อมูลผู้ค้ำประกัน -->\r\n        <h3>ข้อมูลผู้ค้ำประกัน</h3>\r\n\r\n        <!-- ผู้ค้ำประกันคนที่ 1 -->\r\n        <div class=\"guarantor-section\">\r\n          <h4>ผู้ค้ำประกันคนที่ 1</h4>\r\n          <div>\r\n            <label for=\"guarantor1_member_id\">เลือกผู้ค้ำประกัน 1 จากสมาชิก *</label>\r\n            <select v-model=\"guarantors[0].member_id\" id=\"guarantor1_member_id\" @change=\"loadGuarantor1Data\" required>\r\n              <option value=\"\">-- เลือกสมาชิก --</option>\r\n              <option v-for=\"member in members\" :key=\"member.member_id\" :value=\"member.member_id\"\r\n                :disabled=\"member.member_id === loan.member_id || member.member_id === guarantors[1].member_id\">\r\n                {{ member.first_name }} {{ member.last_name }} (ID: {{ member.member_id }})\r\n              </option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor1_name\">ชื่อผู้ค้ำประกัน 1 *</label>\r\n            <input v-model=\"guarantors[0].name\" type=\"text\" id=\"guarantor1_name\" readonly />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor1_id_card\">เลขบัตรประชาชน ผู้ค้ำประกัน 1 *</label>\r\n            <input v-model=\"guarantors[0].id_card\" type=\"text\" id=\"guarantor1_id_card\" readonly />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor1_address\">ที่อยู่ผู้ค้ำประกัน 1 *</label>\r\n            <input v-model=\"guarantors[0].address\" type=\"text\" id=\"guarantor1_address\" readonly />\r\n          </div>\r\n\r\n          <!-- อัพโหลดเอกสารผู้ค้ำประกันคนที่ 1 -->\r\n          <div>\r\n            <label for=\"guarantor1_id_card_image\">สำเนาบัตรประชาชน ผู้ค้ำประกันคนที่ 1 *</label>\r\n            <input type=\"file\" id=\"guarantor1_id_card_image\" @change=\"handleGuarantor1IdCardUpload\" required />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor1_house_registration_image\">สำเนาทะเบียนบ้าน ผู้ค้ำประกันคนที่ 1 *</label>\r\n            <input type=\"file\" id=\"guarantor1_house_registration_image\" @change=\"handleGuarantor1HouseRegistrationUpload\" required />\r\n          </div>\r\n        </div> <!-- ปิด guarantor-section -->\r\n\r\n        <!-- ผู้ค้ำประกันคนที่ 2 -->\r\n        <div class=\"guarantor-section\">\r\n          <h4>ผู้ค้ำประกันคนที่ 2</h4>\r\n          <div>\r\n            <label for=\"guarantor2_member_id\">เลือกผู้ค้ำประกัน 2 จากสมาชิก *</label>\r\n            <select v-model=\"guarantors[1].member_id\" id=\"guarantor2_member_id\" @change=\"loadGuarantor2Data\" required>\r\n              <option value=\"\">-- เลือกสมาชิก --</option>\r\n              <option v-for=\"member in members\" :key=\"member.member_id\" :value=\"member.member_id\"\r\n                :disabled=\"member.member_id === loan.member_id || member.member_id === guarantors[0].member_id\">\r\n                {{ member.first_name }} {{ member.last_name }} (ID: {{ member.member_id }})\r\n              </option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor2_name\">ชื่อผู้ค้ำประกัน 2 *</label>\r\n            <input v-model=\"guarantors[1].name\" type=\"text\" id=\"guarantor2_name\" readonly />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor2_id_card\">เลขบัตรประชาชน ผู้ค้ำประกัน 2 *</label>\r\n            <input v-model=\"guarantors[1].id_card\" type=\"text\" id=\"guarantor2_id_card\" readonly />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor2_address\">ที่อยู่ผู้ค้ำประกัน 2 *</label>\r\n            <input v-model=\"guarantors[1].address\" type=\"text\" id=\"guarantor2_address\" readonly />\r\n          </div>\r\n\r\n          <!-- อัพโหลดเอกสารผู้ค้ำประกันคนที่ 2 -->\r\n          <div>\r\n            <label for=\"guarantor2_id_card_image\">สำเนาบัตรประชาชน ผู้ค้ำประกันคนที่ 2 *</label>\r\n            <input type=\"file\" id=\"guarantor2_id_card_image\" @change=\"handleGuarantor2IdCardUpload\" required />\r\n          </div>\r\n\r\n          <div>\r\n            <label for=\"guarantor2_house_registration_image\">สำเนาทะเบียนบ้าน ผู้ค้ำประกันคนที่ 2 *</label>\r\n            <input type=\"file\" id=\"guarantor2_house_registration_image\" @change=\"handleGuarantor2HouseRegistrationUpload\" required />\r\n          </div>\r\n        </div> <!-- ปิด guarantor-section -->\r\n    \r\n        <!-- ปุ่มการกระทำ -->\r\n        <div>\r\n          <button type=\"submit\">บันทึก</button>\r\n          <button type=\"button\" @click=\"handleCancel\">ยกเลิก</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport api from '@/services/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      members: [], // เพิ่มตัวแปรเก็บข้อมูลสมาชิกทั้งหมด\r\n      loan: {\r\n        loan_id: null,\r\n        member_id: '', // เพิ่ม member_id สำหรับเลือกสมาชิก\r\n        full_name: '',\r\n        phone: '',\r\n        bank_name: '',\r\n        account_number: '',\r\n        id_card: '',\r\n        address: '',\r\n        subdistrict: '',\r\n        district: '',\r\n        province: '',\r\n        postal_code: '',\r\n        first_payment_date: '',\r\n        loan_balance: '',\r\n        monthly_interest: '',\r\n        total_amount: '',\r\n        interest_rate: null,\r\n        repayment_period: null,\r\n        start_date: null,\r\n        end_date: null,\r\n        guarantee_required: 1,\r\n        created_by: null,\r\n        updated_by: null,\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString(),\r\n        id_card_image: null,\r\n        house_registration_image: null,\r\n      },\r\n      guarantors: [\r\n        {\r\n          member_id: '',\r\n          name: '',\r\n          id_card: '',\r\n          address: '',\r\n          id_card_image: null,\r\n          house_registration_image: null\r\n        },\r\n        {\r\n          member_id: '',\r\n          name: '',\r\n          id_card: '',\r\n          address: '',\r\n          id_card_image: null,\r\n          house_registration_image: null\r\n        },\r\n      ],\r\n    };\r\n    },\r\n  created() {\r\n    // ดึงข้อมูลสมาชิกทั้งหมดเมื่อโหลดหน้า\r\n    this.fetchMembers();\r\n\r\n    // ถ้ามีการกรอกจำนวนเงินต้นไว้แล้ว ให้คำนวณดอกเบี้ยอัตโนมัติ\r\n    if (this.loan.loan_balance) {\r\n      this.calculateMonthlyInterest();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // ดึงข้อมูลสมาชิกทั้งหมด\r\n    async fetchMembers() {\r\n      try {\r\n        const response = await api.getMembers();\r\n        this.members = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching members:', error);\r\n        alert('ไม่สามารถดึงข้อมูลสมาชิกได้');\r\n      }\r\n    },\r\n\r\n    // โหลดข้อมูลสมาชิกเมื่อเลือก member_id\r\n    async loadMemberData() {\r\n      if (!this.loan.member_id) return;\r\n\r\n      try {\r\n        const response = await api.getMemberById(this.loan.member_id);\r\n        const member = response.data;\r\n\r\n        // นำข้อมูลสมาชิกมาใส่ในฟอร์ม\r\n        this.loan.full_name = `${member.first_name} ${member.last_name}`;\r\n        this.loan.phone = member.phone;\r\n        this.loan.bank_name = member.bank_name || '';\r\n        this.loan.account_number = member.bank_account || '';\r\n        this.loan.id_card = member.national_id || '';\r\n        this.loan.address = member.address_line1 || '';\r\n        this.loan.subdistrict = member.subdistrict || '';\r\n        this.loan.district = member.district || '';\r\n        this.loan.province = member.province || '';\r\n        this.loan.postal_code = member.postal_code || '';\r\n\r\n        // ถ้ามีการกรอกจำนวนเงินต้นไว้แล้ว ให้คำนวณดอกเบี้ยอัตโนมัติ\r\n        if (this.loan.loan_balance) {\r\n          this.calculateMonthlyInterest();\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading member data:', error);\r\n        alert('ไม่สามารถโหลดข้อมูลสมาชิกได้');\r\n      }\r\n    },\r\n\r\n    // โหลดข้อมูลผู้ค้ำประกันคนที่ 1 เมื่อเลือก member_id\r\n    async loadGuarantor1Data() {\r\n      if (!this.guarantors[0].member_id) {\r\n        this.guarantors[0].name = '';\r\n        this.guarantors[0].id_card = '';\r\n        this.guarantors[0].address = '';\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await api.getMemberById(this.guarantors[0].member_id);\r\n        const member = response.data;\r\n\r\n        // นำข้อมูลสมาชิกมาใส่ในฟอร์มผู้ค้ำประกัน\r\n        this.guarantors[0].name = `${member.first_name} ${member.last_name}`;\r\n        this.guarantors[0].id_card = member.national_id || '';\r\n        this.guarantors[0].address = this.formatAddress(member);\r\n      } catch (error) {\r\n        console.error('Error loading guarantor 1 data:', error);\r\n        alert('ไม่สามารถโหลดข้อมูลผู้ค้ำประกันคนที่ 1 ได้');\r\n      }\r\n    },\r\n\r\n    // โหลดข้อมูลผู้ค้ำประกันคนที่ 2 เมื่อเลือก member_id\r\n    async loadGuarantor2Data() {\r\n      if (!this.guarantors[1].member_id) {\r\n        this.guarantors[1].name = '';\r\n        this.guarantors[1].id_card = '';\r\n        this.guarantors[1].address = '';\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await api.getMemberById(this.guarantors[1].member_id);\r\n        const member = response.data;\r\n\r\n        // นำข้อมูลสมาชิกมาใส่ในฟอร์มผู้ค้ำประกัน\r\n        this.guarantors[1].name = `${member.first_name} ${member.last_name}`;\r\n        this.guarantors[1].id_card = member.national_id || '';\r\n        this.guarantors[1].address = this.formatAddress(member);\r\n      } catch (error) {\r\n        console.error('Error loading guarantor 2 data:', error);\r\n        alert('ไม่สามารถโหลดข้อมูลผู้ค้ำประกันคนที่ 2 ได้');\r\n      }\r\n    },\r\n\r\n    // ฟังก์ชันจัดรูปแบบที่อยู่\r\n    formatAddress(member) {\r\n      const parts = [\r\n        member.address_line1,\r\n        member.subdistrict,\r\n        member.district,\r\n        member.province,\r\n        member.postal_code\r\n      ].filter(part => part && part.trim() !== '');\r\n\r\n      return parts.join(' ');\r\n    },\r\n\r\n    // อัพโหลดเอกสารผู้กู้\r\n    handleIdCardUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.loan.id_card_image = file;\r\n      }\r\n    },\r\n\r\n    handleHouseRegistrationUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.loan.house_registration_image = file;\r\n      }\r\n    },\r\n\r\n    // อัพโหลดเอกสารผู้ค้ำประกันคนที่ 1\r\n    handleGuarantor1IdCardUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.guarantors[0].id_card_image = file;\r\n      }\r\n    },\r\n\r\n    handleGuarantor1HouseRegistrationUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.guarantors[0].house_registration_image = file;\r\n      }\r\n    },\r\n\r\n    // อัพโหลดเอกสารผู้ค้ำประกันคนที่ 2\r\n    handleGuarantor2IdCardUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.guarantors[1].id_card_image = file;\r\n      }\r\n    },\r\n\r\n    handleGuarantor2HouseRegistrationUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.guarantors[1].house_registration_image = file;\r\n      }\r\n    },\r\n\r\n    // คำนวณดอกเบี้ยต่อเดือนอัตโนมัติ (1% ของเงินต้น) และตั้งค่าอื่นๆ\r\n    calculateMonthlyInterest() {\r\n      if (this.loan.loan_balance && !isNaN(this.loan.loan_balance)) {\r\n        const principal = parseFloat(this.loan.loan_balance);\r\n\r\n        // คำนวณดอกเบี้ย 1% ของเงินต้น\r\n        this.loan.monthly_interest = principal * 0.01;\r\n\r\n        // ปัดเศษให้เป็นจำนวนเต็ม (ถ้าต้องการ)\r\n        this.loan.monthly_interest = Math.round(this.loan.monthly_interest);\r\n\r\n        // ตั้งค่าอัตราดอกเบี้ยเป็น 1%\r\n        this.loan.interest_rate = 1;\r\n\r\n        // ตั้งค่าระยะเวลาชำระคืนเป็น 12 เดือน (1 ปี)\r\n        this.loan.repayment_period = 12;\r\n\r\n        // คำนวณยอดเงินรวม (เงินต้น + ดอกเบี้ยทั้งหมด)\r\n        // เงินต้น + (ดอกเบี้ยต่อเดือน x จำนวนเดือน)\r\n        const totalInterest = this.loan.monthly_interest * this.loan.repayment_period;\r\n        this.loan.total_amount = principal + totalInterest;\r\n\r\n        // ตั้งค่าวันที่เริ่มต้นเป็นวันที่ปัจจุบัน\r\n        const today = new Date();\r\n        this.loan.start_date = today.toISOString().split('T')[0];\r\n\r\n        // ตั้งค่าวันที่สิ้นสุดเป็นวันที่ปัจจุบัน + 1 ปี\r\n        const endDate = new Date();\r\n        endDate.setFullYear(endDate.getFullYear() + 1);\r\n        this.loan.end_date = endDate.toISOString().split('T')[0];\r\n      } else {\r\n        this.loan.monthly_interest = '';\r\n        this.loan.total_amount = '';\r\n      }\r\n    },\r\n\r\n    handleSubmit() {\r\n      console.log('Starting form submission validation...');\r\n\r\n      // ตรวจสอบว่าได้เลือกสมาชิกหรือไม่\r\n      if (!this.loan.member_id) {\r\n        alert('กรุณาเลือกสมาชิกที่จะกู้');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่าได้กรอกจำนวนเงินกู้หรือไม่\r\n      if (!this.loan.loan_balance || this.loan.loan_balance <= 0) {\r\n        alert('กรุณากรอกจำนวนเงินกู้ให้ถูกต้อง');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่าได้กรอกวันที่ชำระงวดแรกหรือไม่\r\n      if (!this.loan.first_payment_date) {\r\n        alert('กรุณากรอกวันที่ชำระงวดแรก');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่าได้เลือกผู้ค้ำประกันหรือไม่\r\n      if (!this.guarantors[0].member_id || !this.guarantors[1].member_id) {\r\n        alert('กรุณาเลือกผู้ค้ำประกันให้ครบทั้ง 2 คน');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่าผู้ค้ำประกันเป็นคนเดียวกับผู้กู้หรือไม่\r\n      if (\r\n        this.guarantors[0].member_id === this.loan.member_id ||\r\n        this.guarantors[1].member_id === this.loan.member_id\r\n      ) {\r\n        alert('ผู้ค้ำประกันห้ามเป็นผู้กู้');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่าผู้ค้ำประกันทั้งสองคนเป็นคนเดียวกันหรือไม่\r\n      if (this.guarantors[0].member_id === this.guarantors[1].member_id) {\r\n        alert('ผู้ค้ำประกันทั้งสองคนต้องไม่เป็นคนเดียวกัน');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่ามีการอัพโหลดไฟล์ของผู้กู้หรือไม่\r\n      if (!this.loan.id_card_image || !this.loan.house_registration_image) {\r\n        alert('กรุณาอัพโหลดเอกสารของผู้กู้ให้ครบถ้วน');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่ามีการอัพโหลดไฟล์ของผู้ค้ำประกันคนที่ 1 หรือไม่\r\n      if (!this.guarantors[0].id_card_image || !this.guarantors[0].house_registration_image) {\r\n        alert('กรุณาอัพโหลดเอกสารของผู้ค้ำประกันคนที่ 1 ให้ครบถ้วน');\r\n        return;\r\n      }\r\n\r\n      // ตรวจสอบว่ามีการอัพโหลดไฟล์ของผู้ค้ำประกันคนที่ 2 หรือไม่\r\n      if (!this.guarantors[1].id_card_image || !this.guarantors[1].house_registration_image) {\r\n        alert('กรุณาอัพโหลดเอกสารของผู้ค้ำประกันคนที่ 2 ให้ครบถ้วน');\r\n        return;\r\n      }\r\n\r\n      console.log('Form validation passed, preparing to submit...');\r\n\r\n      // ส่งข้อมูลสินเชื่อและผู้ค้ำประกันไปยัง backend\r\n      const formData = new FormData();\r\n\r\n      // เพิ่มข้อมูลสินเชื่อ\r\n      Object.keys(this.loan).forEach(key => {\r\n        if (key !== 'id_card_image' && key !== 'house_registration_image') {\r\n          // ส่งข้อมูลโดยตรงไม่ใช่ในรูปแบบ loan[key]\r\n          formData.append(key, this.loan[key]);\r\n        }\r\n      });\r\n\r\n      // เพิ่มไฟล์ของผู้กู้\r\n      formData.append('borrower_id_card_image', this.loan.id_card_image);\r\n      formData.append('borrower_house_registration_image', this.loan.house_registration_image);\r\n\r\n      // เพิ่มข้อมูลผู้ค้ำประกัน - ส่งเป็น JSON string แทน\r\n      formData.append('guarantors', JSON.stringify(this.guarantors.map(g => ({\r\n        member_id: g.member_id,\r\n        name: g.name,\r\n        id_card: g.id_card,\r\n        address: g.address\r\n      }))));\r\n\r\n      // เพิ่มไฟล์ของผู้ค้ำประกัน\r\n      this.guarantors.forEach((guarantor, index) => {\r\n        if (guarantor.id_card_image) {\r\n          formData.append(`guarantor${index+1}_id_card_image`, guarantor.id_card_image);\r\n        }\r\n        if (guarantor.house_registration_image) {\r\n          formData.append(`guarantor${index+1}_house_registration_image`, guarantor.house_registration_image);\r\n        }\r\n      });\r\n\r\n      // แสดงข้อมูลที่จะส่งไปยัง backend\r\n      console.log('Form data prepared for submission:');\r\n      console.log('Loan data:', this.loan);\r\n      console.log('Guarantors:', this.guarantors);\r\n\r\n      // ตรวจสอบข้อมูลใน FormData\r\n      for (let [key, value] of formData.entries()) {\r\n        if (value instanceof File) {\r\n          console.log(`${key}: File - ${value.name} (${value.size} bytes)`);\r\n        } else {\r\n          console.log(`${key}: ${value}`);\r\n        }\r\n      }\r\n\r\n      // ส่งข้อมูลไปยัง backend โดยใช้ api service\r\n      try {\r\n        console.log('Submitting loan data...');\r\n\r\n        // แสดง loading message\r\n        const loadingMessage = 'กำลังบันทึกข้อมูล กรุณารอสักครู่...';\r\n        const loadingAlert = alert(loadingMessage);\r\n\r\n        // ใช้ api service แทน axios โดยตรง\r\n        api.createLoan(formData)\r\n          .then(response => {\r\n            console.log('Loan created successfully:', response.data);\r\n            alert('บันทึกข้อมูลสำเร็จ');\r\n\r\n            // สร้างรายการธุรกรรมการรับเงินกู้\r\n            return api.withdrawLoan({\r\n              member_id: this.loan.member_id,\r\n              amount: parseFloat(this.loan.total_amount)\r\n            });\r\n          })\r\n          .then(() => {\r\n            // รีเซ็ตฟอร์มหลังจากบันทึกสำเร็จ\r\n            this.handleCancel();\r\n\r\n            // นำทางไปยังหน้ารายการสินเชื่อ\r\n            this.$router.push('/loans');\r\n          })\r\n          .catch(error => {\r\n            console.error('Error creating loan:', error);\r\n            let errorMessage = 'เกิดข้อผิดพลาดในการบันทึกข้อมูล';\r\n\r\n            // แสดงข้อความผิดพลาดที่เฉพาะเจาะจงมากขึ้น\r\n            if (error.response) {\r\n              console.error('Error response:', error.response.data);\r\n              if (error.response.data && error.response.data.message) {\r\n                errorMessage = error.response.data.message;\r\n              }\r\n            }\r\n\r\n            alert(errorMessage);\r\n          });\r\n      } catch (error) {\r\n        console.error('Exception during form submission:', error);\r\n        alert('เกิดข้อผิดพลาดในการส่งข้อมูล กรุณาลองใหม่อีกครั้ง');\r\n      }\r\n    },\r\n    handleCancel() {\r\n      // รีเซ็ตฟอร์ม\r\n      this.loan = {\r\n        loan_id: null,\r\n        member_id: '', // รีเซ็ต member_id\r\n        full_name: '',\r\n        phone: '',\r\n        bank_name: '',\r\n        account_number: '',\r\n        id_card: '',\r\n        address: '',\r\n        subdistrict: '',\r\n        district: '',\r\n        province: '',\r\n        postal_code: '',\r\n        first_payment_date: '',\r\n        loan_balance: '',\r\n        monthly_interest: '',\r\n        total_amount: '',\r\n        interest_rate: null,\r\n        repayment_period: null,\r\n        start_date: null,\r\n        end_date: null,\r\n        guarantee_required: 1,\r\n        created_by: null,\r\n        updated_by: null,\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString(),\r\n        id_card_image: null,\r\n        house_registration_image: null,\r\n      };\r\n\r\n      // Reset file input elements ของผู้กู้\r\n      document.getElementById('id_card_image').value = '';\r\n      document.getElementById('house_registration_image').value = '';\r\n\r\n      // Reset file input elements ของผู้ค้ำประกัน\r\n      document.getElementById('guarantor1_id_card_image').value = '';\r\n      document.getElementById('guarantor1_house_registration_image').value = '';\r\n      document.getElementById('guarantor2_id_card_image').value = '';\r\n      document.getElementById('guarantor2_house_registration_image').value = '';\r\n\r\n      // รีเซ็ตข้อมูลผู้ค้ำประกัน\r\n      this.guarantors = [\r\n        {\r\n          member_id: '',\r\n          name: '',\r\n          id_card: '',\r\n          address: '',\r\n          id_card_image: null,\r\n          house_registration_image: null\r\n        },\r\n        {\r\n          member_id: '',\r\n          name: '',\r\n          id_card: '',\r\n          address: '',\r\n          id_card_image: null,\r\n          house_registration_image: null\r\n        },\r\n      ];\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  /* General styles */\r\n.loan {\r\n  font-family: 'Arial', sans-serif;\r\n  background-color: #f4f7fa;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nh2, h3 {\r\n  text-align: center;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n}\r\n\r\nform {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  background-color: #fff;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.hint {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-top: 5px;\r\n  font-style: italic;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-weight: bold;\r\n  color: #555;\r\n}\r\n\r\ninput[type=\"text\"],\r\ninput[type=\"number\"],\r\ninput[type=\"date\"],\r\nselect,\r\ninput[type=\"file\"] {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  background-color: #f9f9f9;\r\n}\r\n\r\ninput[type=\"text\"]:focus,\r\ninput[type=\"number\"]:focus,\r\ninput[type=\"date\"]:focus,\r\nselect:focus,\r\ninput[type=\"file\"]:focus {\r\n  border-color: #0056b3;\r\n  outline: none;\r\n  background-color: #fff;\r\n}\r\n\r\n/* For required fields */\r\n.required {\r\n  color: red;\r\n}\r\n\r\n/* Form buttons */\r\nbutton {\r\n  padding: 10px 20px;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  margin-right: 10px;\r\n}\r\n\r\nbutton[type=\"submit\"]:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\nbutton[type=\"button\"] {\r\n  background-color: #f44336;\r\n}\r\n\r\nbutton[type=\"button\"]:hover {\r\n  background-color: #e53935;\r\n}\r\n\r\n/* Styling for sections */\r\nh3, h4 {\r\n  margin-top: 40px;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\nh3 {\r\n  font-size: 22px;\r\n}\r\n\r\nh4 {\r\n  font-size: 18px;\r\n  background-color: #f5f5f5;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  border-left: 4px solid #4CAF50;\r\n}\r\n\r\n/* Styling for borrower and guarantor sections */\r\n.borrower-section, .guarantor-section {\r\n  margin-top: 30px;\r\n  margin-bottom: 30px;\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n  border: 1px solid #e0e0e0;\r\n}\r\n\r\n.borrower-section h4 {\r\n  margin-top: 0;\r\n  background-color: #e3f2fd;\r\n  border-left: 4px solid #4CAF50;\r\n}\r\n\r\n.guarantor-section h4 {\r\n  margin-top: 0;\r\n  background-color: #e8f5e9;\r\n  border-left: 4px solid #2196F3;\r\n}\r\n\r\n/* Form group with select input */\r\n.form-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* Responsiveness */\r\n@media (max-width: 768px) {\r\n  form {\r\n    padding: 20px;\r\n  }\r\n\r\n  label, input, select {\r\n    font-size: 14px;\r\n  }\r\n\r\n  button {\r\n    width: 100%;\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .form-group {\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}