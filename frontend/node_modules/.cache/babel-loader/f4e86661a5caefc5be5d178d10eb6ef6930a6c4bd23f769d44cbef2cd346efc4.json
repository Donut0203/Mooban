{"ast":null,"code":"import api from '@/services/api';\nexport default {\n  data() {\n    return {\n      showAddForm: false,\n      isEditing: false,\n      formData: {\n        first_name: '',\n        last_name: '',\n        phone: '',\n        birth_date: '',\n        national_id: '',\n        bank_name: '',\n        bank_account: '',\n        address_line1: '',\n        subdistrict: '',\n        district: '',\n        province: '',\n        postal_code: '',\n        id_card_copy: '',\n        house_registration_copy: '',\n        balance: 0\n      },\n      members: [],\n      // กำหนดสมาชิก\n      searchQuery: '',\n      selectedMember: null,\n      showViewModal: false,\n      showDeleteModal: false\n    };\n  },\n  computed: {\n    filteredMembers() {\n      return this.members.filter(member => {\n        return member.first_name.toLowerCase().includes(this.searchQuery.toLowerCase()) || member.last_name.toLowerCase().includes(this.searchQuery.toLowerCase()) || member.phone.includes(this.searchQuery);\n      });\n    }\n  },\n  mounted() {\n    // โหลดข้อมูลสมาชิกเมื่อคอมโพเนนต์ถูกโหลด\n    this.loadMembers();\n  },\n  methods: {\n    // โหลดข้อมูลสมาชิกทั้งหมด\n    async loadMembers() {\n      try {\n        // ดึงข้อมูลสมาชิกทั้งหมด\n        const response = await api.getMembers();\n        this.members = response.data;\n\n        // ดึงข้อมูลยอดเงินของสมาชิกแต่ละคน\n        for (const member of this.members) {\n          try {\n            const balanceResponse = await api.getMemberBalance(member.member_id);\n            member.deposit_balance = balanceResponse.data.deposit_balance || 0;\n            member.loan_balance = balanceResponse.data.loan_balance || 0;\n          } catch (balanceError) {\n            console.error(`Error fetching balance for member ${member.member_id}:`, balanceError);\n            member.deposit_balance = 0;\n            member.loan_balance = 0;\n          }\n        }\n      } catch (error) {\n        console.error('Error loading members:', error);\n        alert('ไม่สามารถโหลดข้อมูลสมาชิกได้');\n      }\n    },\n    // จัดการการอัพโหลดรูปภาพ\n    handleIdCardUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        // ตรวจสอบขนาดไฟล์ (ไม่เกิน 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n          alert('ขนาดไฟล์ต้องไม่เกิน 5MB');\n          return;\n        }\n\n        // ตรวจสอบประเภทไฟล์\n        if (!file.type.match('image.*')) {\n          alert('กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น');\n          return;\n        }\n        const reader = new FileReader();\n        reader.onload = () => {\n          // บันทึกข้อมูลรูปภาพในรูปแบบ base64\n          this.formData.id_card_copy = reader.result;\n          console.log('ID card image loaded successfully');\n\n          // บันทึกลงใน localStorage เพื่อให้ข้อมูลไม่หายไป\n          if (this.formData.member_id) {\n            localStorage.setItem(`id_card_${this.formData.member_id}`, reader.result);\n          }\n        };\n        reader.onerror = () => {\n          console.error('Error reading file');\n          alert('เกิดข้อผิดพลาดในการอ่านไฟล์');\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    handleHouseRegUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        // ตรวจสอบขนาดไฟล์ (ไม่เกิน 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n          alert('ขนาดไฟล์ต้องไม่เกิน 5MB');\n          return;\n        }\n\n        // ตรวจสอบประเภทไฟล์\n        if (!file.type.match('image.*')) {\n          alert('กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น');\n          return;\n        }\n        const reader = new FileReader();\n        reader.onload = () => {\n          // บันทึกข้อมูลรูปภาพในรูปแบบ base64\n          this.formData.house_registration_copy = reader.result;\n          console.log('House registration image loaded successfully');\n\n          // บันทึกลงใน localStorage เพื่อให้ข้อมูลไม่หายไป\n          if (this.formData.member_id) {\n            localStorage.setItem(`house_reg_${this.formData.member_id}`, reader.result);\n          }\n        };\n        reader.onerror = () => {\n          console.error('Error reading file');\n          alert('เกิดข้อผิดพลาดในการอ่านไฟล์');\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    // อัพโหลดไฟล์\n    async uploadFile(file, fieldName) {\n      const formData = new FormData();\n      formData.append('file', file);\n      try {\n        const response = await api.uploadFile(formData);\n        this.formData[fieldName] = response.data.fileUrl;\n      } catch (error) {\n        console.error('Error uploading file:', error);\n        alert('ไม่สามารถอัพโหลดไฟล์ได้');\n      }\n    },\n    // ส่งฟอร์ม\n    async submitForm() {\n      try {\n        // บันทึกรูปภาพลงใน localStorage ก่อนส่งข้อมูลไปยังเซิร์ฟเวอร์\n        if (this.formData.id_card_copy && this.formData.id_card_copy.startsWith('data:image')) {\n          console.log('Saving ID card to localStorage');\n          if (this.formData.member_id) {\n            localStorage.setItem(`id_card_${this.formData.member_id}`, this.formData.id_card_copy);\n          }\n        }\n        if (this.formData.house_registration_copy && this.formData.house_registration_copy.startsWith('data:image')) {\n          console.log('Saving house registration to localStorage');\n          if (this.formData.member_id) {\n            localStorage.setItem(`house_reg_${this.formData.member_id}`, this.formData.house_registration_copy);\n          }\n        }\n        let response;\n        if (this.isEditing) {\n          // แก้ไขข้อมูลสมาชิก\n          response = await api.updateMember(this.formData.member_id, this.formData);\n          alert('แก้ไขข้อมูลสมาชิกเรียบร้อยแล้ว');\n        } else {\n          // เพิ่มสมาชิกใหม่\n          response = await api.createMember(this.formData);\n          alert('เพิ่มสมาชิกใหม่เรียบร้อยแล้ว');\n\n          // ถ้าเป็นการเพิ่มสมาชิกใหม่ ให้บันทึกรูปภาพลงใน localStorage ด้วย member_id ที่ได้จากเซิร์ฟเวอร์\n          if (response && response.data && response.data.member_id) {\n            const newMemberId = response.data.member_id;\n            if (this.formData.id_card_copy && this.formData.id_card_copy.startsWith('data:image')) {\n              localStorage.setItem(`id_card_${newMemberId}`, this.formData.id_card_copy);\n            }\n            if (this.formData.house_registration_copy && this.formData.house_registration_copy.startsWith('data:image')) {\n              localStorage.setItem(`house_reg_${newMemberId}`, this.formData.house_registration_copy);\n            }\n          }\n        }\n        this.closeForm();\n        this.loadMembers();\n      } catch (error) {\n        console.error('Error submitting form:', error);\n        alert('ไม่สามารถบันทึกข้อมูลได้');\n      }\n    },\n    // ดูรายละเอียดสมาชิก\n    async viewMember(member) {\n      // สร้างสำเนาข้อมูลสมาชิก\n      this.selectedMember = {\n        ...member\n      };\n\n      // ตรวจสอบว่ามีรูปภาพใน localStorage หรือไม่\n      if (member.member_id) {\n        const idCardFromStorage = localStorage.getItem(`id_card_${member.member_id}`);\n        const houseRegFromStorage = localStorage.getItem(`house_reg_${member.member_id}`);\n\n        // ถ้ามีรูปภาพใน localStorage ให้ใช้รูปภาพนั้นแทน\n        if (idCardFromStorage) {\n          this.selectedMember.id_card_copy = idCardFromStorage;\n          console.log('Loaded ID card from localStorage');\n        }\n        if (houseRegFromStorage) {\n          this.selectedMember.house_registration_copy = houseRegFromStorage;\n          console.log('Loaded house registration from localStorage');\n        }\n\n        // ดึงข้อมูลยอดเงินล่าสุด\n        try {\n          const balanceResponse = await api.getMemberBalance(member.member_id);\n          this.selectedMember.deposit_balance = balanceResponse.data.deposit_balance || 0;\n          this.selectedMember.loan_balance = balanceResponse.data.loan_balance || 0;\n        } catch (error) {\n          console.error(`Error fetching balance for member ${member.member_id}:`, error);\n          this.selectedMember.deposit_balance = member.deposit_balance || 0;\n          this.selectedMember.loan_balance = member.loan_balance || 0;\n        }\n\n        // ดึงประวัติธุรกรรมล่าสุด\n        try {\n          const transactionsResponse = await api.getMemberTransactions(member.member_id);\n          this.selectedMember.transactions = transactionsResponse.data || [];\n        } catch (error) {\n          console.error(`Error fetching transactions for member ${member.member_id}:`, error);\n          this.selectedMember.transactions = [];\n        }\n      }\n      this.showViewModal = true;\n    },\n    // แก้ไขข้อมูลสมาชิก\n    async editMember(member) {\n      this.isEditing = true;\n\n      // สร้างสำเนาข้อมูลสมาชิก\n      this.formData = {\n        ...member\n      };\n\n      // ตรวจสอบว่ามีรูปภาพใน localStorage หรือไม่\n      if (member.member_id) {\n        const idCardFromStorage = localStorage.getItem(`id_card_${member.member_id}`);\n        const houseRegFromStorage = localStorage.getItem(`house_reg_${member.member_id}`);\n\n        // ถ้ามีรูปภาพใน localStorage ให้ใช้รูปภาพนั้นแทน\n        if (idCardFromStorage) {\n          this.formData.id_card_copy = idCardFromStorage;\n          console.log('Loaded ID card from localStorage for editing');\n        }\n        if (houseRegFromStorage) {\n          this.formData.house_registration_copy = houseRegFromStorage;\n          console.log('Loaded house registration from localStorage for editing');\n        }\n\n        // ดึงข้อมูลยอดเงินล่าสุด\n        try {\n          const balanceResponse = await api.getMemberBalance(member.member_id);\n          this.formData.deposit_balance = balanceResponse.data.deposit_balance || 0;\n          this.formData.loan_balance = balanceResponse.data.loan_balance || 0;\n        } catch (error) {\n          console.error(`Error fetching balance for member ${member.member_id}:`, error);\n          this.formData.deposit_balance = member.deposit_balance || 0;\n          this.formData.loan_balance = member.loan_balance || 0;\n        }\n      }\n      this.showAddForm = true;\n    },\n    // พิมพ์ PDF\n    printPDF() {\n      if (!this.selectedMember) return;\n\n      // เตรียมข้อมูลสำหรับการพิมพ์\n      const printWindow = window.open('', '_blank');\n      if (!printWindow) {\n        alert('กรุณาอนุญาตให้เปิดหน้าต่างป๊อปอัพเพื่อพิมพ์เอกสาร');\n        return;\n      }\n\n      // สร้างสำเนาข้อมูลสมาชิก\n      const member = {\n        ...this.selectedMember\n      };\n\n      // ตรวจสอบว่ามีรูปภาพใน localStorage หรือไม่\n      if (member.member_id) {\n        const idCardFromStorage = localStorage.getItem(`id_card_${member.member_id}`);\n        const houseRegFromStorage = localStorage.getItem(`house_reg_${member.member_id}`);\n\n        // ถ้ามีรูปภาพใน localStorage ให้ใช้รูปภาพนั้นแทน\n        if (idCardFromStorage) {\n          member.id_card_copy = idCardFromStorage;\n          console.log('Using ID card from localStorage for printing');\n        }\n        if (houseRegFromStorage) {\n          member.house_registration_copy = houseRegFromStorage;\n          console.log('Using house registration from localStorage for printing');\n        }\n      }\n\n      // ตรวจสอบว่ามีรูปภาพหรือไม่\n      const hasIdCard = member.id_card_copy && member.id_card_copy.length > 0;\n      const hasHouseReg = member.house_registration_copy && member.house_registration_copy.length > 0;\n\n      // จัดรูปแบบที่อยู่และยอดเงินก่อนสร้าง HTML\n      const formattedAddress = this.formatAddress(member);\n      // const formattedBalance = this.formatCurrency(member.balance);\n\n      // สร้าง HTML สำหรับการพิมพ์โดยใช้ DOM API แทนการใช้ string\n      printWindow.document.open();\n\n      // สร้าง DOCTYPE\n      const doctype = document.implementation.createDocumentType('html', '', '');\n      printWindow.document.appendChild(doctype);\n\n      // สร้าง HTML element\n      const html = printWindow.document.createElement('html');\n      printWindow.document.appendChild(html);\n\n      // สร้าง HEAD element\n      const head = printWindow.document.createElement('head');\n      html.appendChild(head);\n\n      // สร้าง TITLE element\n      const title = printWindow.document.createElement('title');\n      title.textContent = `ข้อมูลสมาชิก - ${member.member_id || ''}`;\n      head.appendChild(title);\n\n      // สร้าง META element\n      const meta = printWindow.document.createElement('meta');\n      meta.setAttribute('charset', 'utf-8');\n      head.appendChild(meta);\n\n      // สร้าง STYLE element\n      const style = printWindow.document.createElement('style');\n      style.textContent = `\n        body { font-family: \"Sarabun\", sans-serif; padding: 20px; line-height: 1.5; }\n        .header { text-align: center; margin-bottom: 30px; }\n        .member-info { margin-bottom: 30px; }\n        .info-row { display: flex; margin-bottom: 10px; border-bottom: 1px dotted #ccc; padding-bottom: 5px; }\n        .label { font-weight: bold; width: 200px; }\n        .value { flex: 1; }\n        .documents { margin-top: 30px; }\n        .document-section { margin-bottom: 30px; }\n        .document-image { max-width: 100%; height: auto; margin-top: 10px; border: 1px solid #ddd; page-break-inside: avoid; }\n        @media print { .no-print { display: none; } img { display: block; page-break-inside: avoid; max-width: 100% !important; } }\n      `;\n      head.appendChild(style);\n\n      // สร้าง BODY element\n      const body = printWindow.document.createElement('body');\n      html.appendChild(body);\n\n      // สร้าง HEADER\n      const header = printWindow.document.createElement('div');\n      header.className = 'header';\n      const h1 = printWindow.document.createElement('h1');\n      h1.textContent = 'ข้อมูลสมาชิก';\n      header.appendChild(h1);\n      body.appendChild(header);\n\n      // สร้าง MEMBER INFO\n      const memberInfo = printWindow.document.createElement('div');\n      memberInfo.className = 'member-info';\n      body.appendChild(memberInfo);\n\n      // สร้างฟังก์ชันสำหรับสร้าง info row\n      const createInfoRow = (label, value) => {\n        const row = printWindow.document.createElement('div');\n        row.className = 'info-row';\n        const labelDiv = printWindow.document.createElement('div');\n        labelDiv.className = 'label';\n        labelDiv.textContent = label;\n        row.appendChild(labelDiv);\n        const valueDiv = printWindow.document.createElement('div');\n        valueDiv.className = 'value';\n        valueDiv.textContent = value;\n        row.appendChild(valueDiv);\n        return row;\n      };\n\n      // เพิ่ม info rows\n      memberInfo.appendChild(createInfoRow('รหัสสมาชิก:', member.member_id || '-'));\n      memberInfo.appendChild(createInfoRow('ชื่อ-นามสกุล:', `${member.first_name || ''} ${member.last_name || ''}`));\n      memberInfo.appendChild(createInfoRow('เบอร์โทรศัพท์:', member.phone || '-'));\n      memberInfo.appendChild(createInfoRow('วันเกิด:', member.birth_date || '-'));\n      memberInfo.appendChild(createInfoRow('ธนาคาร:', member.bank_name || '-'));\n      memberInfo.appendChild(createInfoRow('เลขบัญชี:', member.bank_account || '-'));\n      memberInfo.appendChild(createInfoRow('เลขบัตรประชาชน:', member.national_id || '-'));\n      memberInfo.appendChild(createInfoRow('ที่อยู่:', formattedAddress || '-'));\n      // memberInfo.appendChild(createInfoRow('ยอดคงเหลือ:', formattedBalance || '0.00 บาท'));\n\n      // สร้าง DOCUMENTS\n      const documents = printWindow.document.createElement('div');\n      documents.className = 'documents';\n      const h2 = printWindow.document.createElement('h2');\n      h2.textContent = 'เอกสารแนบ';\n      documents.appendChild(h2);\n      body.appendChild(documents);\n\n      // สร้างฟังก์ชันสำหรับสร้าง document section\n      const createDocumentSection = (title, imageSrc, alt) => {\n        const section = printWindow.document.createElement('div');\n        section.className = 'document-section';\n        const h3 = printWindow.document.createElement('h3');\n        h3.textContent = title;\n        section.appendChild(h3);\n        if (imageSrc) {\n          const img = printWindow.document.createElement('img');\n          img.src = imageSrc;\n          img.alt = alt;\n          img.className = 'document-image';\n          section.appendChild(img);\n        } else {\n          const p = printWindow.document.createElement('p');\n          p.textContent = `ไม่มีไฟล์${alt}`;\n          section.appendChild(p);\n        }\n        return section;\n      };\n\n      // เพิ่ม document sections\n      documents.appendChild(createDocumentSection('สำเนาบัตรประชาชน', hasIdCard ? member.id_card_copy : null, 'สำเนาบัตรประชาชน'));\n      documents.appendChild(createDocumentSection('สำเนาทะเบียนบ้าน', hasHouseReg ? member.house_registration_copy : null, 'สำเนาทะเบียนบ้าน'));\n\n      // สร้างปุ่มพิมพ์\n      const printButtonDiv = printWindow.document.createElement('div');\n      printButtonDiv.className = 'no-print';\n      printButtonDiv.style.marginTop = '30px';\n      printButtonDiv.style.textAlign = 'center';\n      const printButton = printWindow.document.createElement('button');\n      printButton.textContent = 'พิมพ์เอกสาร';\n      printButton.onclick = () => printWindow.print();\n      printButtonDiv.appendChild(printButton);\n      body.appendChild(printButtonDiv);\n\n      // สร้าง script สำหรับตรวจสอบการโหลดรูปภาพ\n      const script = printWindow.document.createElement('script');\n      script.textContent = `\n        window.addEventListener('load', function() {\n          console.log('All content loaded');\n\n          document.querySelectorAll('img').forEach(img => {\n            if (img.complete) {\n              console.log('Image already loaded:', img.alt);\n            } else {\n              img.onload = function() {\n                console.log('Image loaded:', img.alt);\n              };\n              img.onerror = function() {\n                console.error('Error loading image:', img.alt);\n                img.style.display = 'none';\n                const errorText = document.createElement('p');\n                errorText.textContent = 'ไม่สามารถโหลดรูปภาพได้';\n                errorText.style.color = 'red';\n                img.parentNode.appendChild(errorText);\n              };\n            }\n          });\n        });\n      `;\n      body.appendChild(script);\n      printWindow.document.close();\n    },\n    // ยืนยันการลบ\n    confirmDelete(member) {\n      this.selectedMember = member;\n      this.showDeleteModal = true;\n    },\n    // ลบสมาชิก\n    async deleteMember() {\n      try {\n        await api.deleteMember(this.selectedMember.member_id);\n        alert('ลบข้อมูลสมาชิกเรียบร้อยแล้ว');\n        this.showDeleteModal = false;\n        this.loadMembers();\n      } catch (error) {\n        console.error('Error deleting member:', error);\n        alert('ไม่สามารถลบข้อมูลสมาชิกได้');\n      }\n    },\n    // ปิดฟอร์ม\n    closeForm() {\n      this.showAddForm = false;\n      this.isEditing = false;\n      this.formData = {\n        first_name: '',\n        last_name: '',\n        phone: '',\n        birth_date: '',\n        national_id: '',\n        bank_name: '',\n        bank_account: '',\n        address_line1: '',\n        subdistrict: '',\n        district: '',\n        province: '',\n        postal_code: '',\n        id_card_copy: '',\n        house_registration_copy: '',\n        balance: 0\n      };\n    },\n    formatAddress(member) {\n      return `${member.address_line1} ${member.subdistrict} ${member.district} ${member.province} ${member.postal_code}`;\n    },\n    formatCurrency(value) {\n      return value.toLocaleString('th-TH', {\n        style: 'currency',\n        currency: 'THB'\n      });\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    formatTransactionType(type) {\n      switch (type) {\n        case 'deposit':\n          return 'ฝากเงิน';\n        case 'withdraw':\n          return 'ถอนเงิน';\n        case 'loan_repayment':\n          return 'ชำระเงินกู้';\n        case 'loan_disbursement':\n          return 'รับเงินกู้';\n        default:\n          return type;\n      }\n    },\n    getAmountClass(type) {\n      switch (type) {\n        case 'deposit':\n        case 'loan_disbursement':\n          return 'amount-positive';\n        case 'withdraw':\n        case 'loan_repayment':\n          return 'amount-negative';\n        default:\n          return '';\n      }\n    }\n  }\n};","map":{"version":3,"names":["api","data","showAddForm","isEditing","formData","first_name","last_name","phone","birth_date","national_id","bank_name","bank_account","address_line1","subdistrict","district","province","postal_code","id_card_copy","house_registration_copy","balance","members","searchQuery","selectedMember","showViewModal","showDeleteModal","computed","filteredMembers","filter","member","toLowerCase","includes","mounted","loadMembers","methods","response","getMembers","balanceResponse","getMemberBalance","member_id","deposit_balance","loan_balance","balanceError","console","error","alert","handleIdCardUpload","event","file","target","files","size","type","match","reader","FileReader","onload","result","log","localStorage","setItem","onerror","readAsDataURL","handleHouseRegUpload","uploadFile","fieldName","FormData","append","fileUrl","submitForm","startsWith","updateMember","createMember","newMemberId","closeForm","viewMember","idCardFromStorage","getItem","houseRegFromStorage","transactionsResponse","getMemberTransactions","transactions","editMember","printPDF","printWindow","window","open","hasIdCard","length","hasHouseReg","formattedAddress","formatAddress","document","doctype","implementation","createDocumentType","appendChild","html","createElement","head","title","textContent","meta","setAttribute","style","body","header","className","h1","memberInfo","createInfoRow","label","value","row","labelDiv","valueDiv","documents","h2","createDocumentSection","imageSrc","alt","section","h3","img","src","p","printButtonDiv","marginTop","textAlign","printButton","onclick","print","script","close","confirmDelete","deleteMember","formatCurrency","toLocaleString","currency","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","formatTransactionType","getAmountClass"],"sources":["C:\\Users\\HP\\Documents\\GitHub\\Mooban\\frontend\\src\\views\\Member.vue"],"sourcesContent":["<template>\r\n  <div class=\"member-container\">\r\n    <div class=\"header\">\r\n      <h1>จัดการข้อมูลสมาชิก</h1>\r\n      <button class=\"btn-add\" @click=\"showAddForm = true\">เพิ่มสมาชิกใหม่</button>\r\n    </div>\r\n\r\n    <!-- ฟอร์มเพิ่มสมาชิก -->\r\n    <div class=\"modal\" v-if=\"showAddForm\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h2>{{ isEditing ? 'แก้ไขข้อมูลสมาชิก' : 'เพิ่มสมาชิกใหม่' }}</h2>\r\n          <span class=\"close\" @click=\"closeForm\">&times;</span>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"form-group\">\r\n              <label for=\"first_name\">ชื่อจริง <span class=\"required\">*</span></label>\r\n              <input type=\"text\" id=\"first_name\" v-model=\"formData.first_name\" required>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"last_name\">นามสกุล <span class=\"required\">*</span></label>\r\n              <input type=\"text\" id=\"last_name\" v-model=\"formData.last_name\" required>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"phone\">เบอร์โทรศัพท์ <span class=\"required\">*</span></label>\r\n              <input type=\"text\" id=\"phone\" v-model=\"formData.phone\" required>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n               <label for=\"birth_date\">วันเกิด <span class=\"required\">*</span></label>\r\n                <input type=\"date\" id=\"birth_date\" v-model=\"formData.birth_date\" required>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label for=\"national_id\">หมายเลขบัตรประชาชน <span class=\"required\">*</span></label>\r\n              <input type=\"text\" id=\"national_id\" v-model=\"formData.national_id\" required>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"bank_name\">ชื่อธนาคาร <span class=\"required\">*</span></label>\r\n              <select id=\"bank_name\" v-model=\"formData.bank_name\" required>\r\n                <option value=\"\">เลือกธนาคาร</option>\r\n                <option value=\"กรุงเทพ\">ธนาคารกรุงเทพ</option>\r\n                <option value=\"กสิกรไทย\">ธนาคารกสิกรไทย</option>\r\n                <option value=\"กรุงไทย\">ธนาคารกรุงไทย</option>\r\n                <option value=\"ไทยพาณิชย์\">ธนาคารไทยพาณิชย์</option>\r\n                <option value=\"ออมสิน\">ธนาคารออมสิน</option>\r\n                <option value=\"ธกส\">ธนาคารเพื่อการเกษตรและสหกรณ์การเกษตร</option>\r\n                <option value=\"อื่นๆ\">อื่นๆ</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"bank_account\">หมายเลขบัญชีธนาคาร <span class=\"required\">*</span></label>\r\n              <input type=\"text\" id=\"bank_account\" v-model=\"formData.bank_account\" required>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"address_line1\">ที่อยู่ <span class=\"required\">*</span></label>\r\n              <textarea id=\"address_line1\" v-model=\"formData.address_line1\" required></textarea>\r\n            </div>\r\n            \r\n            <div class=\"form-row\">\r\n              <div class=\"form-group half\">\r\n                <label for=\"subdistrict\">ตำบล</label>\r\n                <input type=\"text\" id=\"subdistrict\" v-model=\"formData.subdistrict\">\r\n              </div>\r\n              \r\n              <div class=\"form-group half\">\r\n                <label for=\"district\">อำเภอ</label>\r\n                <input type=\"text\" id=\"district\" v-model=\"formData.district\">\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"form-row\">\r\n              <div class=\"form-group half\">\r\n                <label for=\"province\">จังหวัด</label>\r\n                <input type=\"text\" id=\"province\" v-model=\"formData.province\">\r\n              </div>\r\n              \r\n              <div class=\"form-group half\">\r\n                <label for=\"postal_code\">รหัสไปรษณีย์</label>\r\n                <input type=\"text\" id=\"postal_code\" v-model=\"formData.postal_code\">\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"id_card_copy\">สำเนาบัตรประชาชน <span class=\"required\">*</span></label>\r\n              <input type=\"file\" id=\"id_card_copy\" @change=\"handleIdCardUpload\">\r\n              <div class=\"preview\" v-if=\"formData.id_card_copy\">\r\n                <img :src=\"formData.id_card_copy\" alt=\"สำเนาบัตรประชาชน\">\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"house_registration_copy\">สำเนาทะเบียนบ้าน <span class=\"required\">*</span></label>\r\n              <input type=\"file\" id=\"house_registration_copy\" @change=\"handleHouseRegUpload\">\r\n              <div class=\"preview\" v-if=\"formData.house_registration_copy\">\r\n                <img :src=\"formData.house_registration_copy\" alt=\"สำเนาทะเบียนบ้าน\">\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"form-group\" v-if=\"isEditing\">\r\n              <label for=\"deposit_balance\">ยอดเงินฝาก</label>\r\n              <input type=\"number\" id=\"deposit_balance\" v-model=\"formData.deposit_balance\" step=\"0.01\" readonly>\r\n              <div class=\"form-hint\">ยอดเงินฝากจะถูกปรับปรุงอัตโนมัติผ่านระบบธุรกรรมการเงิน</div>\r\n            </div>\r\n\r\n            <div class=\"form-group\" v-if=\"isEditing\">\r\n              <label for=\"loan_balance\">ยอดเงินกู้คงเหลือ</label>\r\n              <input type=\"number\" id=\"loan_balance\" v-model=\"formData.loan_balance\" step=\"0.01\" readonly>\r\n              <div class=\"form-hint\">ยอดเงินกู้จะถูกปรับปรุงอัตโนมัติผ่านระบบธุรกรรมการเงิน</div>\r\n            </div>\r\n\r\n            <div class=\"form-actions\" v-if=\"isEditing\">\r\n              <router-link :to=\"'/transactions?member_id=' + formData.member_id\" class=\"btn-transaction\">\r\n                ไปที่หน้าธุรกรรมการเงิน\r\n              </router-link>\r\n            </div>\r\n            \r\n            <div class=\"form-actions\">\r\n              <button type=\"button\" class=\"btn-cancel\" @click=\"closeForm\">ยกเลิก</button>\r\n              <button type=\"submit\" class=\"btn-submit\">{{ isEditing ? 'บันทึกการแก้ไข' : 'เพิ่มสมาชิก' }}</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ตารางแสดงข้อมูลสมาชิก -->\r\n    <div class=\"table-container\">\r\n      <div class=\"search-bar\">\r\n        <input type=\"text\" v-model=\"searchQuery\" placeholder=\"ค้นหาสมาชิก...\">\r\n      </div>\r\n      <table class=\"member-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>รหัสสมาชิก</th>\r\n            <th>ชื่อ-นามสกุล</th>\r\n            <th>เบอร์โทรศัพท์</th>\r\n            <th>ธนาคาร</th>\r\n            <th>เลขบัญชี</th>\r\n            <th>เลขบัตรประชาชน</th>\r\n            <th>ที่อยู่</th>\r\n            <th>ยอดเงินฝาก</th>\r\n            <th>ยอดเงินกู้คงเหลือ</th>\r\n            <th>การจัดการ</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"member in filteredMembers\" :key=\"member.member_id\">\r\n            <td>{{ member.member_id }}</td>\r\n            <td>{{ member.first_name }} {{ member.last_name }}</td>\r\n            <td>{{ member.phone }}</td>\r\n            <td>{{ member.bank_name }}</td>\r\n            <td>{{ member.bank_account }}</td>\r\n            <td>{{ member.national_id }}</td>\r\n            <td>{{ formatAddress(member) }}</td>\r\n            <td class=\"deposit-balance\">{{ formatCurrency(member.deposit_balance || 0) }}</td>\r\n            <td class=\"loan-balance\">{{ formatCurrency(member.loan_balance || 0) }}</td>\r\n            <td class=\"actions\">\r\n              <button class=\"btn-view\" @click=\"viewMember(member)\">ดู</button>\r\n              <button class=\"btn-edit\" @click=\"editMember(member)\">แก้ไข</button>\r\n              <button class=\"btn-delete\" @click=\"confirmDelete(member)\">ลบ</button>\r\n            </td>\r\n          </tr>\r\n          <tr v-if=\"members.length === 0\">\r\n            <td colspan=\"9\" class=\"no-data\">ไม่พบข้อมูลสมาชิก</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- Modal แสดงรายละเอียดสมาชิก -->\r\n    <div class=\"modal\" v-if=\"showViewModal\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h2>รายละเอียดสมาชิก</h2>\r\n          <span class=\"close\" @click=\"showViewModal = false\">&times;</span>\r\n        </div>\r\n        <div class=\"modal-body member-details\">\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">รหัสสมาชิก:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.member_id }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ชื่อ-นามสกุล:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.first_name }} {{ selectedMember.last_name }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">เบอร์โทรศัพท์:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.phone }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">วันเกิด:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.birth_date }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ธนาคาร:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.bank_name }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">เลขบัญชี:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.bank_account }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">เลขบัตรประชาชน:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.national_id }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ที่อยู่:</div>\r\n            <div class=\"detail-value\">{{ formatAddress(selectedMember) }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ยอดเงินฝาก:</div>\r\n            <div class=\"detail-value deposit-balance\">{{ formatCurrency(selectedMember.deposit_balance || 0) }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ยอดเงินกู้คงเหลือ:</div>\r\n            <div class=\"detail-value loan-balance\">{{ formatCurrency(selectedMember.loan_balance || 0) }}</div>\r\n          </div>\r\n\r\n          <!-- ประวัติธุรกรรมล่าสุด -->\r\n          <div class=\"detail-section\" v-if=\"selectedMember.transactions && selectedMember.transactions.length > 0\">\r\n            <h3>ประวัติธุรกรรมล่าสุด</h3>\r\n            <table class=\"transaction-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>วันที่</th>\r\n                  <th>ประเภท</th>\r\n                  <th>จำนวนเงิน</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"transaction in selectedMember.transactions.slice(0, 5)\" :key=\"transaction.transaction_id\">\r\n                  <td>{{ formatDate(transaction.transaction_date) }}</td>\r\n                  <td>{{ formatTransactionType(transaction.transaction_status) }}</td>\r\n                  <td :class=\"getAmountClass(transaction.transaction_status)\">\r\n                    {{ formatCurrency(transaction.amount) }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <div class=\"view-all-link\">\r\n              <router-link :to=\"'/transactions?member_id=' + selectedMember.member_id\">ดูประวัติธุรกรรมทั้งหมด</router-link>\r\n            </div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">สำเนาบัตรประชาชน:</div>\r\n            <div class=\"detail-value\">\r\n              <img :src=\"selectedMember.id_card_copy\" alt=\"สำเนาบัตรประชาชน\" class=\"document-preview\">\r\n            </div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">สำเนาทะเบียนบ้าน:</div>\r\n            <div class=\"detail-value\">\r\n              <img :src=\"selectedMember.house_registration_copy\" alt=\"สำเนาทะเบียนบ้าน\" class=\"document-preview\">\r\n            </div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ผู้สร้างข้อมูล:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.created_by }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">วันที่สร้างข้อมูล:</div>\r\n            <div class=\"detail-value\">{{ formatDate(selectedMember.created_at) }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">ผู้แก้ไขล่าสุด:</div>\r\n            <div class=\"detail-value\">{{ selectedMember.updated_by }}</div>\r\n          </div>\r\n          <div class=\"detail-row\">\r\n            <div class=\"detail-label\">วันที่แก้ไขล่าสุด:</div>\r\n            <div class=\"detail-value\">{{ formatDate(selectedMember.updated_at) }}</div>\r\n          </div>\r\n           <!-- ปุ่มปิด -->\r\n          <button class=\"btn-close\" @click=\"showViewModal = false\">ปิด</button>\r\n\r\n          <!-- ปุ่มปริ้น PDF -->\r\n          <button class=\"btn-print\" @click=\"printPDF\">พิมพ์ PDF</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal ยืนยันการลบ -->\r\n    <div class=\"modal\" v-if=\"showDeleteModal\">\r\n      <div class=\"modal-content delete-modal\">\r\n        <div class=\"modal-header\">\r\n          <h2>ยืนยันการลบ</h2>\r\n          <span class=\"close\" @click=\"showDeleteModal = false\">&times;</span>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p>คุณต้องการลบข้อมูลสมาชิก {{ selectedMember.first_name }} {{ selectedMember.last_name }} ใช่หรือไม่?</p>\r\n          <div class=\"form-actions\">\r\n            <button class=\"btn-cancel\" @click=\"showDeleteModal = false\">ยกเลิก</button>\r\n            <button class=\"btn-delete\" @click=\"deleteMember\">ยืนยันการลบ</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport api from '@/services/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showAddForm: false,\r\n      isEditing: false,\r\n      formData: {\r\n        first_name: '',\r\n        last_name: '',\r\n        phone: '',\r\n        birth_date: '',\r\n        national_id: '',\r\n        bank_name: '',\r\n        bank_account: '',\r\n        address_line1: '',\r\n        subdistrict: '',\r\n        district: '',\r\n        province: '',\r\n        postal_code: '',\r\n        id_card_copy: '',\r\n        house_registration_copy: '',\r\n        balance: 0,\r\n      },\r\n      members: [],  // กำหนดสมาชิก\r\n      searchQuery: '',\r\n      selectedMember: null,\r\n      showViewModal: false,\r\n      showDeleteModal: false\r\n    };\r\n  },\r\n  computed: {\r\n    filteredMembers() {\r\n      return this.members.filter(member => {\r\n        return (\r\n          member.first_name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n          member.last_name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n          member.phone.includes(this.searchQuery)\r\n        );\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    // โหลดข้อมูลสมาชิกเมื่อคอมโพเนนต์ถูกโหลด\r\n    this.loadMembers();\r\n  },\r\n  methods: {\r\n    // โหลดข้อมูลสมาชิกทั้งหมด\r\n    async loadMembers() {\r\n      try {\r\n        // ดึงข้อมูลสมาชิกทั้งหมด\r\n        const response = await api.getMembers();\r\n        this.members = response.data;\r\n\r\n        // ดึงข้อมูลยอดเงินของสมาชิกแต่ละคน\r\n        for (const member of this.members) {\r\n          try {\r\n            const balanceResponse = await api.getMemberBalance(member.member_id);\r\n            member.deposit_balance = balanceResponse.data.deposit_balance || 0;\r\n            member.loan_balance = balanceResponse.data.loan_balance || 0;\r\n          } catch (balanceError) {\r\n            console.error(`Error fetching balance for member ${member.member_id}:`, balanceError);\r\n            member.deposit_balance = 0;\r\n            member.loan_balance = 0;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading members:', error);\r\n        alert('ไม่สามารถโหลดข้อมูลสมาชิกได้');\r\n      }\r\n    },\r\n\r\n    // จัดการการอัพโหลดรูปภาพ\r\n    handleIdCardUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        // ตรวจสอบขนาดไฟล์ (ไม่เกิน 5MB)\r\n        if (file.size > 5 * 1024 * 1024) {\r\n          alert('ขนาดไฟล์ต้องไม่เกิน 5MB');\r\n          return;\r\n        }\r\n\r\n        // ตรวจสอบประเภทไฟล์\r\n        if (!file.type.match('image.*')) {\r\n          alert('กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น');\r\n          return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          // บันทึกข้อมูลรูปภาพในรูปแบบ base64\r\n          this.formData.id_card_copy = reader.result;\r\n          console.log('ID card image loaded successfully');\r\n\r\n          // บันทึกลงใน localStorage เพื่อให้ข้อมูลไม่หายไป\r\n          if (this.formData.member_id) {\r\n            localStorage.setItem(`id_card_${this.formData.member_id}`, reader.result);\r\n          }\r\n        };\r\n        reader.onerror = () => {\r\n          console.error('Error reading file');\r\n          alert('เกิดข้อผิดพลาดในการอ่านไฟล์');\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    handleHouseRegUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        // ตรวจสอบขนาดไฟล์ (ไม่เกิน 5MB)\r\n        if (file.size > 5 * 1024 * 1024) {\r\n          alert('ขนาดไฟล์ต้องไม่เกิน 5MB');\r\n          return;\r\n        }\r\n\r\n        // ตรวจสอบประเภทไฟล์\r\n        if (!file.type.match('image.*')) {\r\n          alert('กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น');\r\n          return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          // บันทึกข้อมูลรูปภาพในรูปแบบ base64\r\n          this.formData.house_registration_copy = reader.result;\r\n          console.log('House registration image loaded successfully');\r\n\r\n          // บันทึกลงใน localStorage เพื่อให้ข้อมูลไม่หายไป\r\n          if (this.formData.member_id) {\r\n            localStorage.setItem(`house_reg_${this.formData.member_id}`, reader.result);\r\n          }\r\n        };\r\n        reader.onerror = () => {\r\n          console.error('Error reading file');\r\n          alert('เกิดข้อผิดพลาดในการอ่านไฟล์');\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n\r\n    // อัพโหลดไฟล์\r\n    async uploadFile(file, fieldName) {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      try {\r\n        const response = await api.uploadFile(formData);\r\n        this.formData[fieldName] = response.data.fileUrl;\r\n      } catch (error) {\r\n        console.error('Error uploading file:', error);\r\n        alert('ไม่สามารถอัพโหลดไฟล์ได้');\r\n      }\r\n    },\r\n\r\n    // ส่งฟอร์ม\r\n    async submitForm() {\r\n      try {\r\n        // บันทึกรูปภาพลงใน localStorage ก่อนส่งข้อมูลไปยังเซิร์ฟเวอร์\r\n        if (this.formData.id_card_copy && this.formData.id_card_copy.startsWith('data:image')) {\r\n          console.log('Saving ID card to localStorage');\r\n          if (this.formData.member_id) {\r\n            localStorage.setItem(`id_card_${this.formData.member_id}`, this.formData.id_card_copy);\r\n          }\r\n        }\r\n\r\n        if (this.formData.house_registration_copy && this.formData.house_registration_copy.startsWith('data:image')) {\r\n          console.log('Saving house registration to localStorage');\r\n          if (this.formData.member_id) {\r\n            localStorage.setItem(`house_reg_${this.formData.member_id}`, this.formData.house_registration_copy);\r\n          }\r\n        }\r\n\r\n        let response;\r\n\r\n        if (this.isEditing) {\r\n          // แก้ไขข้อมูลสมาชิก\r\n          response = await api.updateMember(this.formData.member_id, this.formData);\r\n          alert('แก้ไขข้อมูลสมาชิกเรียบร้อยแล้ว');\r\n        } else {\r\n          // เพิ่มสมาชิกใหม่\r\n          response = await api.createMember(this.formData);\r\n          alert('เพิ่มสมาชิกใหม่เรียบร้อยแล้ว');\r\n\r\n          // ถ้าเป็นการเพิ่มสมาชิกใหม่ ให้บันทึกรูปภาพลงใน localStorage ด้วย member_id ที่ได้จากเซิร์ฟเวอร์\r\n          if (response && response.data && response.data.member_id) {\r\n            const newMemberId = response.data.member_id;\r\n\r\n            if (this.formData.id_card_copy && this.formData.id_card_copy.startsWith('data:image')) {\r\n              localStorage.setItem(`id_card_${newMemberId}`, this.formData.id_card_copy);\r\n            }\r\n\r\n            if (this.formData.house_registration_copy && this.formData.house_registration_copy.startsWith('data:image')) {\r\n              localStorage.setItem(`house_reg_${newMemberId}`, this.formData.house_registration_copy);\r\n            }\r\n          }\r\n        }\r\n\r\n        this.closeForm();\r\n        this.loadMembers();\r\n      } catch (error) {\r\n        console.error('Error submitting form:', error);\r\n        alert('ไม่สามารถบันทึกข้อมูลได้');\r\n      }\r\n    },\r\n\r\n    // ดูรายละเอียดสมาชิก\r\n    async viewMember(member) {\r\n      // สร้างสำเนาข้อมูลสมาชิก\r\n      this.selectedMember = { ...member };\r\n\r\n      // ตรวจสอบว่ามีรูปภาพใน localStorage หรือไม่\r\n      if (member.member_id) {\r\n        const idCardFromStorage = localStorage.getItem(`id_card_${member.member_id}`);\r\n        const houseRegFromStorage = localStorage.getItem(`house_reg_${member.member_id}`);\r\n\r\n        // ถ้ามีรูปภาพใน localStorage ให้ใช้รูปภาพนั้นแทน\r\n        if (idCardFromStorage) {\r\n          this.selectedMember.id_card_copy = idCardFromStorage;\r\n          console.log('Loaded ID card from localStorage');\r\n        }\r\n\r\n        if (houseRegFromStorage) {\r\n          this.selectedMember.house_registration_copy = houseRegFromStorage;\r\n          console.log('Loaded house registration from localStorage');\r\n        }\r\n\r\n        // ดึงข้อมูลยอดเงินล่าสุด\r\n        try {\r\n          const balanceResponse = await api.getMemberBalance(member.member_id);\r\n          this.selectedMember.deposit_balance = balanceResponse.data.deposit_balance || 0;\r\n          this.selectedMember.loan_balance = balanceResponse.data.loan_balance || 0;\r\n        } catch (error) {\r\n          console.error(`Error fetching balance for member ${member.member_id}:`, error);\r\n          this.selectedMember.deposit_balance = member.deposit_balance || 0;\r\n          this.selectedMember.loan_balance = member.loan_balance || 0;\r\n        }\r\n\r\n        // ดึงประวัติธุรกรรมล่าสุด\r\n        try {\r\n          const transactionsResponse = await api.getMemberTransactions(member.member_id);\r\n          this.selectedMember.transactions = transactionsResponse.data || [];\r\n        } catch (error) {\r\n          console.error(`Error fetching transactions for member ${member.member_id}:`, error);\r\n          this.selectedMember.transactions = [];\r\n        }\r\n      }\r\n\r\n      this.showViewModal = true;\r\n    },\r\n\r\n    // แก้ไขข้อมูลสมาชิก\r\n    async editMember(member) {\r\n      this.isEditing = true;\r\n\r\n      // สร้างสำเนาข้อมูลสมาชิก\r\n      this.formData = { ...member };\r\n\r\n      // ตรวจสอบว่ามีรูปภาพใน localStorage หรือไม่\r\n      if (member.member_id) {\r\n        const idCardFromStorage = localStorage.getItem(`id_card_${member.member_id}`);\r\n        const houseRegFromStorage = localStorage.getItem(`house_reg_${member.member_id}`);\r\n\r\n        // ถ้ามีรูปภาพใน localStorage ให้ใช้รูปภาพนั้นแทน\r\n        if (idCardFromStorage) {\r\n          this.formData.id_card_copy = idCardFromStorage;\r\n          console.log('Loaded ID card from localStorage for editing');\r\n        }\r\n\r\n        if (houseRegFromStorage) {\r\n          this.formData.house_registration_copy = houseRegFromStorage;\r\n          console.log('Loaded house registration from localStorage for editing');\r\n        }\r\n\r\n        // ดึงข้อมูลยอดเงินล่าสุด\r\n        try {\r\n          const balanceResponse = await api.getMemberBalance(member.member_id);\r\n          this.formData.deposit_balance = balanceResponse.data.deposit_balance || 0;\r\n          this.formData.loan_balance = balanceResponse.data.loan_balance || 0;\r\n        } catch (error) {\r\n          console.error(`Error fetching balance for member ${member.member_id}:`, error);\r\n          this.formData.deposit_balance = member.deposit_balance || 0;\r\n          this.formData.loan_balance = member.loan_balance || 0;\r\n        }\r\n      }\r\n\r\n      this.showAddForm = true;\r\n    },\r\n\r\n    // พิมพ์ PDF\r\n    printPDF() {\r\n      if (!this.selectedMember) return;\r\n\r\n      // เตรียมข้อมูลสำหรับการพิมพ์\r\n      const printWindow = window.open('', '_blank');\r\n\r\n      if (!printWindow) {\r\n        alert('กรุณาอนุญาตให้เปิดหน้าต่างป๊อปอัพเพื่อพิมพ์เอกสาร');\r\n        return;\r\n      }\r\n\r\n      // สร้างสำเนาข้อมูลสมาชิก\r\n      const member = { ...this.selectedMember };\r\n\r\n      // ตรวจสอบว่ามีรูปภาพใน localStorage หรือไม่\r\n      if (member.member_id) {\r\n        const idCardFromStorage = localStorage.getItem(`id_card_${member.member_id}`);\r\n        const houseRegFromStorage = localStorage.getItem(`house_reg_${member.member_id}`);\r\n\r\n        // ถ้ามีรูปภาพใน localStorage ให้ใช้รูปภาพนั้นแทน\r\n        if (idCardFromStorage) {\r\n          member.id_card_copy = idCardFromStorage;\r\n          console.log('Using ID card from localStorage for printing');\r\n        }\r\n\r\n        if (houseRegFromStorage) {\r\n          member.house_registration_copy = houseRegFromStorage;\r\n          console.log('Using house registration from localStorage for printing');\r\n        }\r\n      }\r\n\r\n      // ตรวจสอบว่ามีรูปภาพหรือไม่\r\n      const hasIdCard = member.id_card_copy && member.id_card_copy.length > 0;\r\n      const hasHouseReg = member.house_registration_copy && member.house_registration_copy.length > 0;\r\n\r\n      // จัดรูปแบบที่อยู่และยอดเงินก่อนสร้าง HTML\r\n      const formattedAddress = this.formatAddress(member);\r\n      // const formattedBalance = this.formatCurrency(member.balance);\r\n\r\n      // สร้าง HTML สำหรับการพิมพ์โดยใช้ DOM API แทนการใช้ string\r\n      printWindow.document.open();\r\n\r\n      // สร้าง DOCTYPE\r\n      const doctype = document.implementation.createDocumentType('html', '', '');\r\n      printWindow.document.appendChild(doctype);\r\n\r\n      // สร้าง HTML element\r\n      const html = printWindow.document.createElement('html');\r\n      printWindow.document.appendChild(html);\r\n\r\n      // สร้าง HEAD element\r\n      const head = printWindow.document.createElement('head');\r\n      html.appendChild(head);\r\n\r\n      // สร้าง TITLE element\r\n      const title = printWindow.document.createElement('title');\r\n      title.textContent = `ข้อมูลสมาชิก - ${member.member_id || ''}`;\r\n      head.appendChild(title);\r\n\r\n      // สร้าง META element\r\n      const meta = printWindow.document.createElement('meta');\r\n      meta.setAttribute('charset', 'utf-8');\r\n      head.appendChild(meta);\r\n\r\n      // สร้าง STYLE element\r\n      const style = printWindow.document.createElement('style');\r\n      style.textContent = `\r\n        body { font-family: \"Sarabun\", sans-serif; padding: 20px; line-height: 1.5; }\r\n        .header { text-align: center; margin-bottom: 30px; }\r\n        .member-info { margin-bottom: 30px; }\r\n        .info-row { display: flex; margin-bottom: 10px; border-bottom: 1px dotted #ccc; padding-bottom: 5px; }\r\n        .label { font-weight: bold; width: 200px; }\r\n        .value { flex: 1; }\r\n        .documents { margin-top: 30px; }\r\n        .document-section { margin-bottom: 30px; }\r\n        .document-image { max-width: 100%; height: auto; margin-top: 10px; border: 1px solid #ddd; page-break-inside: avoid; }\r\n        @media print { .no-print { display: none; } img { display: block; page-break-inside: avoid; max-width: 100% !important; } }\r\n      `;\r\n      head.appendChild(style);\r\n\r\n      // สร้าง BODY element\r\n      const body = printWindow.document.createElement('body');\r\n      html.appendChild(body);\r\n\r\n      // สร้าง HEADER\r\n      const header = printWindow.document.createElement('div');\r\n      header.className = 'header';\r\n      const h1 = printWindow.document.createElement('h1');\r\n      h1.textContent = 'ข้อมูลสมาชิก';\r\n      header.appendChild(h1);\r\n      body.appendChild(header);\r\n\r\n      // สร้าง MEMBER INFO\r\n      const memberInfo = printWindow.document.createElement('div');\r\n      memberInfo.className = 'member-info';\r\n      body.appendChild(memberInfo);\r\n\r\n      // สร้างฟังก์ชันสำหรับสร้าง info row\r\n      const createInfoRow = (label, value) => {\r\n        const row = printWindow.document.createElement('div');\r\n        row.className = 'info-row';\r\n\r\n        const labelDiv = printWindow.document.createElement('div');\r\n        labelDiv.className = 'label';\r\n        labelDiv.textContent = label;\r\n        row.appendChild(labelDiv);\r\n\r\n        const valueDiv = printWindow.document.createElement('div');\r\n        valueDiv.className = 'value';\r\n        valueDiv.textContent = value;\r\n        row.appendChild(valueDiv);\r\n\r\n        return row;\r\n      };\r\n\r\n      // เพิ่ม info rows\r\n      memberInfo.appendChild(createInfoRow('รหัสสมาชิก:', member.member_id || '-'));\r\n      memberInfo.appendChild(createInfoRow('ชื่อ-นามสกุล:', `${member.first_name || ''} ${member.last_name || ''}`));\r\n      memberInfo.appendChild(createInfoRow('เบอร์โทรศัพท์:', member.phone || '-'));\r\n      memberInfo.appendChild(createInfoRow('วันเกิด:', member.birth_date || '-'));\r\n      memberInfo.appendChild(createInfoRow('ธนาคาร:', member.bank_name || '-'));\r\n      memberInfo.appendChild(createInfoRow('เลขบัญชี:', member.bank_account || '-'));\r\n      memberInfo.appendChild(createInfoRow('เลขบัตรประชาชน:', member.national_id || '-'));\r\n      memberInfo.appendChild(createInfoRow('ที่อยู่:', formattedAddress || '-'));\r\n      // memberInfo.appendChild(createInfoRow('ยอดคงเหลือ:', formattedBalance || '0.00 บาท'));\r\n\r\n      // สร้าง DOCUMENTS\r\n      const documents = printWindow.document.createElement('div');\r\n      documents.className = 'documents';\r\n      const h2 = printWindow.document.createElement('h2');\r\n      h2.textContent = 'เอกสารแนบ';\r\n      documents.appendChild(h2);\r\n      body.appendChild(documents);\r\n\r\n      // สร้างฟังก์ชันสำหรับสร้าง document section\r\n      const createDocumentSection = (title, imageSrc, alt) => {\r\n        const section = printWindow.document.createElement('div');\r\n        section.className = 'document-section';\r\n\r\n        const h3 = printWindow.document.createElement('h3');\r\n        h3.textContent = title;\r\n        section.appendChild(h3);\r\n\r\n        if (imageSrc) {\r\n          const img = printWindow.document.createElement('img');\r\n          img.src = imageSrc;\r\n          img.alt = alt;\r\n          img.className = 'document-image';\r\n          section.appendChild(img);\r\n        } else {\r\n          const p = printWindow.document.createElement('p');\r\n          p.textContent = `ไม่มีไฟล์${alt}`;\r\n          section.appendChild(p);\r\n        }\r\n\r\n        return section;\r\n      };\r\n\r\n      // เพิ่ม document sections\r\n      documents.appendChild(createDocumentSection('สำเนาบัตรประชาชน', hasIdCard ? member.id_card_copy : null, 'สำเนาบัตรประชาชน'));\r\n      documents.appendChild(createDocumentSection('สำเนาทะเบียนบ้าน', hasHouseReg ? member.house_registration_copy : null, 'สำเนาทะเบียนบ้าน'));\r\n\r\n      // สร้างปุ่มพิมพ์\r\n      const printButtonDiv = printWindow.document.createElement('div');\r\n      printButtonDiv.className = 'no-print';\r\n      printButtonDiv.style.marginTop = '30px';\r\n      printButtonDiv.style.textAlign = 'center';\r\n\r\n      const printButton = printWindow.document.createElement('button');\r\n      printButton.textContent = 'พิมพ์เอกสาร';\r\n      printButton.onclick = () => printWindow.print();\r\n\r\n      printButtonDiv.appendChild(printButton);\r\n      body.appendChild(printButtonDiv);\r\n\r\n      // สร้าง script สำหรับตรวจสอบการโหลดรูปภาพ\r\n      const script = printWindow.document.createElement('script');\r\n      script.textContent = `\r\n        window.addEventListener('load', function() {\r\n          console.log('All content loaded');\r\n\r\n          document.querySelectorAll('img').forEach(img => {\r\n            if (img.complete) {\r\n              console.log('Image already loaded:', img.alt);\r\n            } else {\r\n              img.onload = function() {\r\n                console.log('Image loaded:', img.alt);\r\n              };\r\n              img.onerror = function() {\r\n                console.error('Error loading image:', img.alt);\r\n                img.style.display = 'none';\r\n                const errorText = document.createElement('p');\r\n                errorText.textContent = 'ไม่สามารถโหลดรูปภาพได้';\r\n                errorText.style.color = 'red';\r\n                img.parentNode.appendChild(errorText);\r\n              };\r\n            }\r\n          });\r\n        });\r\n      `;\r\n      body.appendChild(script);\r\n\r\n      printWindow.document.close();\r\n    },\r\n\r\n    // ยืนยันการลบ\r\n    confirmDelete(member) {\r\n      this.selectedMember = member;\r\n      this.showDeleteModal = true;\r\n    },\r\n\r\n    // ลบสมาชิก\r\n    async deleteMember() {\r\n      try {\r\n        await api.deleteMember(this.selectedMember.member_id);\r\n        alert('ลบข้อมูลสมาชิกเรียบร้อยแล้ว');\r\n        this.showDeleteModal = false;\r\n        this.loadMembers();\r\n      } catch (error) {\r\n        console.error('Error deleting member:', error);\r\n        alert('ไม่สามารถลบข้อมูลสมาชิกได้');\r\n      }\r\n    },\r\n\r\n    // ปิดฟอร์ม\r\n    closeForm() {\r\n      this.showAddForm = false;\r\n      this.isEditing = false;\r\n      this.formData = {\r\n        first_name: '',\r\n        last_name: '',\r\n        phone: '',\r\n        birth_date: '',\r\n        national_id: '',\r\n        bank_name: '',\r\n        bank_account: '',\r\n        address_line1: '',\r\n        subdistrict: '',\r\n        district: '',\r\n        province: '',\r\n        postal_code: '',\r\n        id_card_copy: '',\r\n        house_registration_copy: '',\r\n        balance: 0,\r\n      };\r\n    },\r\n    formatAddress(member) {\r\n      return `${member.address_line1} ${member.subdistrict} ${member.district} ${member.province} ${member.postal_code}`;\r\n    },\r\n    formatCurrency(value) {\r\n      return value.toLocaleString('th-TH', { style: 'currency', currency: 'THB' });\r\n    },\r\n    formatDate(dateString) {\r\n      if (!dateString) return '';\r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    },\r\n\r\n    formatTransactionType(type) {\r\n      switch (type) {\r\n        case 'deposit':\r\n          return 'ฝากเงิน';\r\n        case 'withdraw':\r\n          return 'ถอนเงิน';\r\n        case 'loan_repayment':\r\n          return 'ชำระเงินกู้';\r\n        case 'loan_disbursement':\r\n          return 'รับเงินกู้';\r\n        default:\r\n          return type;\r\n      }\r\n    },\r\n\r\n    getAmountClass(type) {\r\n      switch (type) {\r\n        case 'deposit':\r\n        case 'loan_disbursement':\r\n          return 'amount-positive';\r\n        case 'withdraw':\r\n        case 'loan_repayment':\r\n          return 'amount-negative';\r\n        default:\r\n          return '';\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n/* สไตล์ทั่วไป */\r\n.member-container {\r\n  font-family: 'Sarabun', sans-serif;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  color: #333;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\nh1 {\r\n  color: #2c3e50;\r\n  font-size: 28px;\r\n  margin: 0;\r\n}\r\n\r\n/* สไตล์ปุ่ม */\r\nbutton {\r\n  cursor: pointer;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 8px 16px;\r\n  font-size: 14px;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.btn-add {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n}\r\n\r\n.btn-add:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.btn-view {\r\n  background-color: #2196F3;\r\n  color: white;\r\n  margin-right: 5px;\r\n}\r\n\r\n.btn-view:hover {\r\n  background-color: #0b7dda;\r\n}\r\n\r\n.btn-edit {\r\n  background-color: #FFC107;\r\n  color: #333;\r\n  margin-right: 5px;\r\n}\r\n\r\n.btn-edit:hover {\r\n  background-color: #e0a800;\r\n}\r\n\r\n.btn-delete {\r\n  background-color: #F44336;\r\n  color: white;\r\n}\r\n\r\n.btn-delete:hover {\r\n  background-color: #d32f2f;\r\n}\r\n\r\n.btn-cancel {\r\n  background-color: #9e9e9e;\r\n  color: white;\r\n  margin-right: 10px;\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background-color: #757575;\r\n}\r\n\r\n.btn-submit {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 10px 20px;\r\n}\r\n\r\n.btn-submit:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.btn-transaction {\r\n  display: inline-block;\r\n  background-color: #2196F3;\r\n  color: white;\r\n  padding: 8px 15px;\r\n  border-radius: 4px;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.btn-transaction:hover {\r\n  background-color: #0b7dda;\r\n  text-decoration: none;\r\n  color: white;\r\n}\r\n\r\n/* สไตล์ตาราง */\r\n.table-container {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  margin-top: 20px;\r\n}\r\n\r\n.search-bar {\r\n  padding: 15px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.search-bar input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n}\r\n\r\n.member-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.member-table th {\r\n  background-color: #3f51b5;\r\n  color: white;\r\n  text-align: left;\r\n  padding: 12px 15px;\r\n  font-weight: 500;\r\n}\r\n\r\n.member-table td {\r\n  padding: 12px 15px;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.member-table tr:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.member-table .actions {\r\n  white-space: nowrap;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 30px;\r\n  color: #757575;\r\n}\r\n\r\n/* สไตล์ Modal */\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  width: 80%;\r\n  max-width: 800px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.delete-modal {\r\n  max-width: 500px;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  border-bottom: 1px solid #ddd;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.modal-header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n  font-size: 20px;\r\n}\r\n\r\n.close {\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  color: #757575;\r\n  cursor: pointer;\r\n}\r\n\r\n.close:hover {\r\n  color: #333;\r\n}\r\n\r\n.modal-body {\r\n  padding: 20px;\r\n}\r\n\r\n/* สไตล์ฟอร์ม */\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.form-group.half {\r\n  flex: 1;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.required {\r\n  color: #F44336;\r\n}\r\n\r\ninput[type=\"text\"],\r\ninput[type=\"number\"],\r\nselect,\r\ntextarea {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\ninput[type=\"text\"]:focus,\r\ninput[type=\"number\"]:focus,\r\nselect:focus,\r\ntextarea:focus {\r\n  border-color: #3f51b5;\r\n  outline: none;\r\n}\r\n\r\ntextarea {\r\n  min-height: 100px;\r\n  resize: vertical;\r\n}\r\n\r\n.form-hint {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-top: 5px;\r\n  font-style: italic;\r\n}\r\n\r\n.preview {\r\n  margin-top: 10px;\r\n}\r\n\r\n.preview img {\r\n  max-width: 200px;\r\n  max-height: 150px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 20px;\r\n}\r\n\r\n/* สไตล์รายละเอียดสมาชิก */\r\n.member-details {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 15px;\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  border-bottom: 1px solid #eee;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.detail-label {\r\n  font-weight: 500;\r\n  width: 180px;\r\n  color: #555;\r\n}\r\n\r\n.detail-value {\r\n  flex: 1;\r\n}\r\n\r\n.document-preview {\r\n  max-width: 300px;\r\n  max-height: 200px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  margin-top: 5px;\r\n}\r\n\r\n/* สไตล์สำหรับประวัติธุรกรรม */\r\n.detail-section {\r\n  margin-top: 20px;\r\n  border-top: 1px solid #eee;\r\n  padding-top: 15px;\r\n}\r\n\r\n.detail-section h3 {\r\n  margin-bottom: 15px;\r\n  color: #333;\r\n  font-size: 18px;\r\n}\r\n\r\n.transaction-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.transaction-table th, .transaction-table td {\r\n  padding: 8px 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.transaction-table th {\r\n  background-color: #f5f5f5;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.amount-positive {\r\n  color: #4CAF50;\r\n  font-weight: bold;\r\n}\r\n\r\n.amount-negative {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n.deposit-balance {\r\n  color: #4CAF50;\r\n  font-weight: bold;\r\n}\r\n\r\n.loan-balance {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n.view-all-link {\r\n  text-align: right;\r\n  margin-top: 10px;\r\n}\r\n\r\n.view-all-link a {\r\n  color: #2196F3;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n}\r\n\r\n.view-all-link a:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .form-row {\r\n    flex-direction: column;\r\n    gap: 0;\r\n  }\r\n  \r\n  .modal-content {\r\n    width: 95%;\r\n  }\r\n  \r\n  .member-table {\r\n    display: block;\r\n    overflow-x: auto;\r\n  }\r\n  \r\n  .header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .btn-add {\r\n    margin-top: 10px;\r\n  }\r\n  \r\n  .detail-row {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .detail-label {\r\n    width: 100%;\r\n    margin-bottom: 5px;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}